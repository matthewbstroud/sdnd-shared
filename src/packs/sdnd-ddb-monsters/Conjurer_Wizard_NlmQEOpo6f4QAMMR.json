{
  "name": "Conjurer Wizard",
  "type": "npc",
  "_id": "NlmQEOpo6f4QAMMR",
  "img": "https://www.dndbeyond.com/avatars/thumbnails/25746/237/1000/1000/637880557303639850.jpeg",
  "system": {
    "currency": {
      "pp": 0,
      "gp": 0,
      "ep": 0,
      "sp": 0,
      "cp": 0
    },
    "abilities": {
      "str": {
        "value": 9,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        },
        "check": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        },
        "save": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        }
      },
      "dex": {
        "value": 14,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        },
        "check": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        },
        "save": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        }
      },
      "con": {
        "value": 11,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        },
        "check": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        },
        "save": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        }
      },
      "int": {
        "value": 17,
        "proficient": 1,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        },
        "check": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        },
        "save": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        }
      },
      "wis": {
        "value": 12,
        "proficient": 1,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        },
        "check": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        },
        "save": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        }
      },
      "cha": {
        "value": 11,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        },
        "check": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        },
        "save": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        }
      }
    },
    "bonuses": {
      "mwak": {
        "attack": "",
        "damage": ""
      },
      "rwak": {
        "attack": "",
        "damage": ""
      },
      "msak": {
        "attack": "",
        "damage": ""
      },
      "rsak": {
        "attack": "",
        "damage": ""
      },
      "abilities": {
        "check": "",
        "save": "",
        "skill": ""
      },
      "spell": {
        "dc": ""
      }
    },
    "skills": {
      "acr": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ani": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "arc": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ath": {
        "ability": "str",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "dec": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "his": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ins": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "itm": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "inv": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "med": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "nat": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "prc": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "prf": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "per": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "rel": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "slt": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ste": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "sur": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      }
    },
    "tools": {},
    "spells": {
      "spell1": {
        "value": 0,
        "override": null
      },
      "spell2": {
        "value": 0,
        "override": null
      },
      "spell3": {
        "value": 0,
        "override": null
      },
      "spell4": {
        "value": 0,
        "override": null
      },
      "spell5": {
        "value": 0,
        "override": null
      },
      "spell6": {
        "value": 0,
        "override": null
      },
      "spell7": {
        "value": 0,
        "override": null
      },
      "spell8": {
        "value": 0,
        "override": null
      },
      "spell9": {
        "value": 0,
        "override": null
      },
      "pact": {
        "value": 0,
        "override": null
      }
    },
    "attributes": {
      "init": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonus": ""
      },
      "movement": {
        "burrow": null,
        "climb": null,
        "fly": null,
        "swim": null,
        "walk": 30,
        "units": "ft",
        "hover": false
      },
      "attunement": {
        "max": 3
      },
      "senses": {
        "darkvision": 0,
        "blindsight": 0,
        "tremorsense": 0,
        "truesight": 0,
        "units": "ft",
        "special": ""
      },
      "spellcasting": "int",
      "exhaustion": 0,
      "concentration": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonuses": {
          "save": ""
        },
        "limit": 1
      },
      "ac": {
        "flat": 12,
        "calc": "natural",
        "formula": ""
      },
      "hp": {
        "value": 58,
        "max": 58,
        "temp": 0,
        "tempmax": 0,
        "formula": "13d8"
      },
      "death": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "success": 0,
        "failure": 0,
        "bonuses": {
          "save": ""
        }
      },
      "spell": {
        "level": 0
      },
      "loyalty": {
        "value": null
      },
      "hd": {
        "spent": 0
      }
    },
    "details": {
      "biography": {
        "value": "<p>Conjurers summon creatures from other planes of existence and teleport themselves and others in the blink of an eye.</p>\n<hr />\n<h3>Wizards</h3>\n<p>Wizards pursue magical power through the study of arcane texts. Some travel the world searching for esoteric tomes, while others train lesser wizards or collaborate with colleagues to create new spells.</p>",
        "public": ""
      },
      "alignment": "Any Alignment",
      "race": null,
      "type": {
        "value": "humanoid",
        "subtype": ""
      },
      "environment": "Urban",
      "cr": 6,
      "spellLevel": 0,
      "source": {
        "book": "Mordenkainen Presents: Monsters of the Multiverse",
        "page": "260",
        "custom": "",
        "license": ""
      },
      "habitat": {
        "custom": "Urban",
        "value": []
      },
      "ideal": "",
      "bond": "",
      "flaw": "",
      "treasure": {
        "value": []
      }
    },
    "resources": {
      "legact": {
        "value": 0,
        "max": 0
      },
      "legres": {
        "value": 0,
        "max": 0
      },
      "lair": {
        "value": false,
        "initiative": null,
        "inside": false
      }
    },
    "traits": {
      "size": "med",
      "di": {
        "value": [],
        "bypasses": [],
        "custom": ""
      },
      "dr": {
        "value": [],
        "bypasses": [],
        "custom": ""
      },
      "dv": {
        "value": [],
        "bypasses": [],
        "custom": ""
      },
      "dm": {
        "amount": {},
        "bypasses": []
      },
      "ci": {
        "value": [],
        "custom": ""
      },
      "languages": {
        "value": [],
        "custom": "any four languages",
        "communication": {}
      },
      "important": false
    },
    "source": {
      "book": "Mordenkainen Presents: Monsters of the Multiverse",
      "page": "260",
      "custom": "",
      "license": "",
      "revision": 1,
      "rules": "2014"
    }
  },
  "prototypeToken": {
    "name": "Conjurer Wizard",
    "displayName": 20,
    "actorLink": false,
    "appendNumber": false,
    "prependAdjective": false,
    "texture": {
      "src": "ddb-images/other/npc-token-Conjurer-Wizard.jpeg",
      "scaleX": 1,
      "scaleY": 1,
      "offsetX": 0,
      "offsetY": 0,
      "rotation": 0,
      "anchorX": 0.5,
      "anchorY": 0.5,
      "fit": "contain",
      "tint": "#ffffff",
      "alphaThreshold": 0.75
    },
    "width": 1,
    "height": 1,
    "lockRotation": false,
    "rotation": 0,
    "alpha": 1,
    "disposition": -1,
    "displayBars": 20,
    "bar1": {
      "attribute": "attributes.hp"
    },
    "bar2": {
      "attribute": null
    },
    "light": {
      "alpha": 0.5,
      "angle": 360,
      "bright": 0,
      "coloration": 1,
      "dim": 0,
      "attenuation": 0.5,
      "luminosity": 0.5,
      "saturation": 0,
      "contrast": 0,
      "shadows": 0,
      "animation": {
        "type": null,
        "speed": 5,
        "intensity": 5,
        "reverse": false
      },
      "darkness": {
        "min": 0,
        "max": 1
      },
      "negative": false,
      "priority": 0,
      "color": null
    },
    "sight": {
      "enabled": false,
      "range": 0,
      "angle": 360,
      "visionMode": "basic",
      "color": null,
      "attenuation": 0.1,
      "brightness": 0,
      "saturation": 0,
      "contrast": 0
    },
    "detectionModes": [],
    "flags": {
      "monks-tokenbar": {
        "include": "default"
      },
      "tagger": {
        "tags": [
          "dndbeyond",
          "ddb-importer",
          "humanoid"
        ]
      }
    },
    "randomImg": false,
    "hexagonalShape": 0,
    "occludable": {
      "radius": 0
    },
    "ring": {
      "enabled": false,
      "colors": {
        "ring": null,
        "background": null
      },
      "effects": 1,
      "subject": {
        "scale": 1,
        "texture": null
      }
    }
  },
  "items": [
    {
      "_id": "BspEscfVeZTGQxqD",
      "name": "Multiattack",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p> The conjurer makes three Arcane Burst attacks.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Mordenkainen Presents: Monsters of the Multiverse",
          "page": "260",
          "custom": "",
          "license": "",
          "revision": 1,
          "rules": "2024"
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": [],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "utility",
            "activation": {
              "type": "action",
              "value": 1,
              "condition": "",
              "override": false
            },
            "consumption": {
              "targets": [],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "concentration": false,
              "value": "",
              "units": "inst",
              "special": "",
              "override": false
            },
            "effects": [],
            "range": {
              "units": "",
              "special": "",
              "override": false
            },
            "target": {
              "template": {
                "count": "",
                "contiguous": false,
                "type": "",
                "size": "",
                "width": "",
                "height": "",
                "units": ""
              },
              "affects": {
                "count": "",
                "type": "",
                "choice": false,
                "special": ""
              },
              "prompt": true,
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "roll": {
              "formula": "",
              "name": "",
              "prompt": false,
              "visible": false
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "none"
          }
        },
        "identifier": "",
        "advancement": [],
        "enchant": {},
        "prerequisites": {
          "level": null,
          "repeatable": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<strong>Multiattack.</strong>",
          "fullName": "Multiattack.",
          "actionCopy": false,
          "type": "action",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        },
        "dnd5e": {}
      },
      "img": "icons/skills/melee/strike-weapons-orange.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "12.331",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null
      },
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.BspEscfVeZTGQxqD"
    },
    {
      "_id": "s6eKOiDnIuzN1JVb",
      "name": "Arcane Burst",
      "type": "weapon",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong></strong> Melee or Ranged Spell Attack:</em> +6 to hit, reach 5 ft. or range 120 ft., one target. <em>Hit:</em> [[/damage 3d10 + @mod type=force average=true]] damage.</p>\n</section>\nThe [[lookup @name]] casts [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Mordenkainen Presents: Monsters of the Multiverse",
          "page": "260",
          "custom": "",
          "license": "",
          "revision": 1,
          "rules": "2024"
        },
        "identified": true,
        "unidentified": {
          "description": ""
        },
        "container": null,
        "quantity": 1,
        "weight": {
          "value": 0,
          "units": "lb"
        },
        "price": {
          "value": 0,
          "denomination": "gp"
        },
        "rarity": "",
        "attunement": "",
        "equipped": true,
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "ft",
          "reach": 120
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": [],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": "int",
        "actionType": "msak",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "3d10[force] + @mod",
              "force"
            ]
          ],
          "versatile": {
            "number": null,
            "denomination": null,
            "bonus": "",
            "types": [],
            "custom": {
              "enabled": false,
              "formula": ""
            },
            "scaling": {
              "mode": "",
              "number": null,
              "formula": ""
            }
          },
          "base": {
            "number": null,
            "denomination": null,
            "bonus": "",
            "types": [
              "force"
            ],
            "custom": {
              "enabled": true,
              "formula": "3d10[force] + @mod"
            },
            "scaling": {
              "mode": "",
              "number": null,
              "formula": ""
            }
          }
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "armor": {
          "value": null
        },
        "hp": {
          "value": null,
          "max": null,
          "dt": null,
          "conditions": ""
        },
        "type": {
          "value": "simpleM",
          "baseItem": ""
        },
        "magicalBonus": null,
        "properties": [],
        "proficient": 1,
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "attack",
            "activation": {
              "type": "action",
              "value": 1,
              "condition": "",
              "override": false
            },
            "consumption": {
              "targets": [],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "concentration": false,
              "value": "",
              "units": "inst",
              "special": "",
              "override": false
            },
            "effects": [],
            "range": {
              "units": "ft",
              "special": "",
              "override": false
            },
            "target": {
              "template": {
                "count": "",
                "contiguous": false,
                "type": "",
                "size": "",
                "width": "",
                "height": "",
                "units": ""
              },
              "affects": {
                "count": "",
                "type": "",
                "choice": false,
                "special": ""
              },
              "prompt": true,
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "attack": {
              "ability": "int",
              "bonus": "",
              "critical": {
                "threshold": null
              },
              "flat": false,
              "type": {
                "value": "melee",
                "classification": "spell"
              }
            },
            "damage": {
              "critical": {
                "bonus": ""
              },
              "includeBase": true,
              "parts": []
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "",
            "attackMode": "oneHanded",
            "ammunition": "",
            "otherActivityUuid": ""
          }
        },
        "identifier": "",
        "attuned": false,
        "ammunition": {}
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<strong>Arcane Burst.</strong>",
          "fullName": "Arcane Burst.",
          "actionCopy": false,
          "type": "action",
          "actionInfo": {
            "damage": {
              "parts": [
                [
                  "3d10[force] + @mod",
                  "force"
                ]
              ],
              "versatile": ""
            },
            "baseAbility": "int",
            "toHit": 6,
            "proficient": true,
            "extraAttackBonus": 0
          }
        },
        "midiProperties": {
          "magicdam": true,
          "magiceffect": true,
          "confirmTargets": "default"
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "dnd5e": {}
      },
      "img": "icons/magic/light/hand-sparks-smoke-teal.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "12.331",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null
      },
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.s6eKOiDnIuzN1JVb"
    },
    {
      "_id": "3vkwNkxBNBgjy061",
      "name": "Spellcasting",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p> The conjurer casts one of the following spells, using &amp;Reference[int]{Intelligence} as the spellcasting ability (spell save DC 14):</p><p>At will: dancing lights, mage hand, prestidigitation</p><p>2/day each: fireball, mage armor, unseen servant</p><p>1/day each: fly, stinking cloud, web</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Mordenkainen Presents: Monsters of the Multiverse",
          "page": "260",
          "custom": "",
          "license": "",
          "revision": 1,
          "rules": "2024"
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": [],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "utility",
            "activation": {
              "type": "action",
              "value": 1,
              "condition": "",
              "override": false
            },
            "consumption": {
              "targets": [],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "concentration": false,
              "value": "",
              "units": "inst",
              "special": "",
              "override": false
            },
            "effects": [],
            "range": {
              "units": "",
              "special": "",
              "override": false
            },
            "target": {
              "template": {
                "count": "",
                "contiguous": false,
                "type": "",
                "size": "",
                "width": "",
                "height": "",
                "units": ""
              },
              "affects": {
                "count": "",
                "type": "",
                "choice": false,
                "special": ""
              },
              "prompt": true,
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "roll": {
              "formula": "",
              "name": "",
              "prompt": false,
              "visible": false
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "none"
          }
        },
        "identifier": "",
        "advancement": [],
        "enchant": {},
        "prerequisites": {
          "level": null,
          "repeatable": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<strong>Spellcasting.</strong>",
          "fullName": "Spellcasting.",
          "actionCopy": false,
          "type": "action",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        },
        "dnd5e": {}
      },
      "img": "icons/magic/light/beam-rays-magenta-large.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "12.331",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null
      },
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.3vkwNkxBNBgjy061"
    },
    {
      "_id": "iaiDrm8bg0LANgvt",
      "name": "Benign Transportation",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p> The conjurer teleports, along with any equipment it is wearing or carrying, up to 30 feet to an unoccupied space that it can see. If it instead chooses a space within range that is occupied by a willing Small or Medium creature, they both teleport, swapping places.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Mordenkainen Presents: Monsters of the Multiverse",
          "page": "260",
          "custom": "",
          "license": "",
          "revision": 1,
          "rules": "2024"
        },
        "activation": {
          "type": "bonus",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "1",
          "per": null,
          "recovery": [
            {
              "period": "recharge",
              "formula": "4",
              "type": "recoverAll"
            }
          ],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "charges",
          "target": "iaiDrm8bg0LANgvt",
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": 4,
          "charged": true
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "utility",
            "activation": {
              "type": "bonus",
              "value": 1,
              "condition": "",
              "override": false
            },
            "consumption": {
              "targets": [
                {
                  "type": "itemUses",
                  "target": "iaiDrm8bg0LANgvt",
                  "value": "1",
                  "scaling": {
                    "mode": "",
                    "formula": ""
                  }
                }
              ],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "concentration": false,
              "value": "",
              "units": "inst",
              "special": "",
              "override": false
            },
            "effects": [],
            "range": {
              "units": "",
              "special": "",
              "override": false
            },
            "target": {
              "template": {
                "count": "",
                "contiguous": false,
                "type": "",
                "size": "",
                "width": "",
                "height": "",
                "units": ""
              },
              "affects": {
                "count": "",
                "type": "",
                "choice": false,
                "special": ""
              },
              "prompt": true,
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "roll": {
              "formula": "",
              "name": "",
              "prompt": false,
              "visible": false
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "none"
          }
        },
        "identifier": "",
        "advancement": [],
        "enchant": {},
        "prerequisites": {
          "level": null,
          "repeatable": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<strong>Benign Transportation (Recharge 4–6).</strong>",
          "fullName": "Benign Transportation (Recharge 4–6).",
          "actionCopy": false,
          "type": "bonus",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        },
        "dnd5e": {}
      },
      "img": "icons/magic/control/energy-stream-link-blue.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "12.331",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null
      },
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.iaiDrm8bg0LANgvt"
    },
    {
      "_id": "8FydS5i8lH9WuCME",
      "name": "Summon Elemental",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p> The conjurer magically summons an air &amp;Reference[elemental]{elemental}, an earth &amp;Reference[elemental]{elemental}, a &amp;Reference[fire]{fire} &amp;Reference[elemental]{elemental}, or a water &amp;Reference[elemental]{elemental} (all appear in the <em><a href=\"https://www.dndbeyond.com/sources/mm\">Monster Manual</a></em>). The &amp;Reference[elemental]{elemental} appears in an unoccupied space within 60 feet of the conjurer, whom it obeys. It takes its turn immediately after the conjurer. It lasts for 1 hour, until it or the conjurer dies, or until the conjurer dismisses it as a bonus action.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Mordenkainen Presents: Monsters of the Multiverse",
          "page": "260",
          "custom": "",
          "license": "",
          "revision": 1,
          "rules": "2024"
        },
        "activation": {
          "type": "bonus",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": 60,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": [
            {
              "period": "day",
              "type": "recoverAll"
            }
          ],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "utility",
            "activation": {
              "type": "bonus",
              "value": 1,
              "condition": "",
              "override": false
            },
            "consumption": {
              "targets": [
                {
                  "type": "itemUses",
                  "target": "",
                  "value": "1",
                  "scaling": {
                    "mode": "",
                    "formula": ""
                  }
                }
              ],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "concentration": false,
              "value": "",
              "units": "inst",
              "special": "",
              "override": false
            },
            "effects": [],
            "range": {
              "value": "60",
              "units": "ft",
              "special": "",
              "override": false
            },
            "target": {
              "template": {
                "count": "",
                "contiguous": false,
                "type": "",
                "size": "",
                "width": "",
                "height": "",
                "units": ""
              },
              "affects": {
                "count": "",
                "type": "",
                "choice": false,
                "special": ""
              },
              "prompt": true,
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "roll": {
              "formula": "",
              "name": "",
              "prompt": false,
              "visible": false
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "none"
          }
        },
        "identifier": "",
        "advancement": [],
        "enchant": {},
        "prerequisites": {
          "level": null,
          "repeatable": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<strong>Summon Elemental (1/Day).</strong>",
          "fullName": "Summon Elemental (1/Day).",
          "actionCopy": false,
          "type": "bonus",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        },
        "dnd5e": {}
      },
      "img": "icons/magic/earth/lava-explosion-orange.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "12.331",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null
      },
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.8FydS5i8lH9WuCME"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You create up to four torch-sized lights within range, making them appear as torches, lanterns, or glowing orbs that hover in the air for the duration. You can also combine the four lights into one glowing vaguely &amp;Reference[humanoid]{humanoid} form of Medium size. Whichever form you choose, each light sheds dim light in a 10-foot radius.</p>\n<p>As a bonus action on your turn, you can move the lights up to 60 feet to a new spot within range. A light must be within 20 feet of another light created by this spell, and a light winks out if it exceeds the spell's range.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "230",
          "license": "",
          "custom": "",
          "revision": 1,
          "rules": "2014"
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": "",
          "value": 1
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "",
          "width": null,
          "prompt": true,
          "affects": {
            "choice": false
          },
          "template": {
            "units": "",
            "contiguous": false
          }
        },
        "range": {
          "value": "120",
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": [],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 0,
        "school": "evo",
        "properties": [
          "vocal",
          "somatic",
          "material",
          "concentration"
        ],
        "materials": {
          "value": "a bit of phosphorus or wychwood, or a glowworm",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "utility",
            "activation": {
              "type": "action",
              "value": null,
              "override": false
            },
            "consumption": {
              "targets": [],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "units": "inst",
              "concentration": false,
              "override": false
            },
            "effects": [],
            "range": {
              "override": false
            },
            "target": {
              "prompt": true,
              "template": {
                "contiguous": false,
                "units": "ft"
              },
              "affects": {
                "choice": false
              },
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "roll": {
              "formula": "",
              "name": "",
              "prompt": false,
              "visible": false
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "none"
          }
        },
        "identifier": "dancing-lights"
      },
      "name": "Dancing Lights",
      "flags": {
        "ddbimporter": {
          "id": 136489,
          "definitionId": 2057,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Dancing Lights",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 230,
              "sourceType": 1
            }
          ],
          "tags": [
            "Utility"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "onUseMacroName": "[postActiveEffects]ItemMacro",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dae": {
          "macro": {
            "name": "Dancing Lights",
            "type": "script",
            "scope": "global",
            "command": "if (!DDBImporter?.EffectHelper.checkJB2a(true, true, true)) return false;\n\nconst summonType = 'Dancing light';\nconst caster = game.actors.get(args[0].actor._id);\nconst spawnedIds = [];\n\n// this is called when the item is created, you can run this manually if your actors are not created yet\n// await DDBImporter.EffectHelper._createJB2aActors(\"Dancing Lights\", \"Dancing light\");\n\nconst lightActors = game.actors.filter((f) =>f.name.includes(summonType));\n\nconst actorChoices = lightActors.map((actor) => {\n  const labelSrc = actor.img.replace(/\\\\d+x\\\\d+\\\\.webm$/, 'Thumb.webp');\n  const labelText = actor.name.split(' - ')[1];\n  return {\n    label: `<img src=\"${labelSrc}\" width=\"40\" height=\"40\" style=\"border:0px\"><br>${labelText}`,\n    value: actor,\n  };\n});\n\nasync function preEffects(template, update) {\n  //prep summoning area\n  new Sequence()\n    .effect()\n    .atLocation(template)\n    .file(getJB2aName(update.token.name))\n    .center()\n    .scale(1.5)\n    .belowTokens()\n    .play();\n}\n\nasync function postEffects(template, token) {\n  //bring in our minion\n  new Sequence().animation().on(token).fadeIn(2000).play();\n}\n\nfunction getJB2aName(colorChoice) {\n  if (game.modules.get('jb2a_patreon')?.active) {\n    if (colorChoice.includes('Blue')) {\n      return 'jb2a.markers.light.intro.blue';\n    } else if (colorChoice.includes('Green')) {\n      return 'jb2a.markers.light.intro.green';\n    } else if (colorChoice.includes('Yellow')) {\n      return 'jb2a.markers.light.intro.yellow02';\n    } else {\n      return 'jb2a.markers.light.intro.yellow';\n    }\n  } else {\n    return 'jb2a.markers.light.intro.blue';\n  }\n}\n\nfor (let i = 0; i < 4; i++) {\n  const choice = await warpgate.buttonDialog({\n    title: 'Choose your color:',\n    buttons: actorChoices,\n  });\n\n  if (!choice) break;\n\n  const updates = {\n    token: {\n      name: `${choice.name} of ${caster.name}`,\n      alpha: 0,\n    },\n    actor: {\n      name: `${choice.name} of ${caster.name}`,\n      system: {\n        attributes: {\n          hp: {\n            value: 100,\n            max: 100,\n          },\n        },\n        details: {\n          type: {\n            custom: 'NoTarget',\n            value: 'custom',\n          },\n        },\n      },\n    },\n    flags: {\n      'mid-qol': {\n        neverTarget: true,\n      }\n    }\n  };\n\n  const callbacks = {\n    pre: async (template, update) => {\n      preEffects(template, update);\n      await DDBImporter?.EffectHelper.wait(500);\n    },\n    post: async (template, token, updates) => {\n      postEffects(template, token);\n      await DDBImporter?.EffectHelper.wait(500);\n      const sourceActorOrToken = fromUuidSync(\n        updates.actor.flags.warpgate.control.actor\n      );\n      const sourceActor = sourceActorOrToken.actor ?? sourceActorOrToken;\n      const concentrationFlag = sourceActor.getFlag('midi-qol', 'concentration-data');\n      concentrationFlag.removeUuids.push(token.uuid);\n      await sourceActor.setFlag('midi-qol', 'concentration-data', concentrationFlag);\n    },\n  };\n\n  const options = { controllingActor: caster };\n  const ids = await warpgate.spawn(\n    await choice.getTokenDocument(),\n    updates,\n    callbacks,\n    options,\n  );\n\n  if (!ids) break;\n  spawnedIds.push(ids[0]);\n}\n\nawait token.actor.setFlag('midi-qol', 'spawnedTokenIds', spawnedIds);\nfor (const id of spawnedIds) {\n  const spawnedActor = canvas.scene.tokens.get(id).actor;\n  await DAE.setFlag(spawnedActor, 'spawnedByTokenUuid', token.document.uuid);\n}\n\nconst hookIdForSpawnedCreatures = Hooks.on('preDeleteToken', async (tokenDoc) => {\n  const sourceTokenUuid = tokenDoc.actor.getFlag('dae', 'spawnedByTokenUuid');\n  if (!sourceTokenUuid) return;\n  new Sequence()\n    .effect()\n    .atLocation(tokenDoc.object.center)\n    .file(`jb2a.smoke.puff.centered.grey.2`)\n    .scale(tokenDoc.width / canvas.scene.grid.distance)\n    .play();\n  const sourceActor = fromUuidSync(sourceTokenUuid).actor;\n  const spawnedIds = sourceActor.getFlag('midi-qol', 'spawnedTokenIds');\n  if (!spawnedIds) return;\n  const spawnedTokenDocs = [];\n  for (const i of spawnedIds) {\n    if (canvas.scene.tokens.get(i))\n      spawnedTokenDocs.push(canvas.scene.tokens.get(i));\n  }\n  if (spawnedTokenDocs.length === 1) {\n    await sourceActor.unsetFlag('midi-qol', 'spawnedTokenIds');\n    Hooks.off('preDeleteToken', hookIdForSpawnedCreatures);\n  }\n});\n"
          }
        },
        "dnd5e": {}
      },
      "effects": [],
      "img": "icons/magic/light/explosion-star-glow-yellow.webp",
      "folder": "rkqMMY58A8Xdl9Mg",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675268,
        "modifiedTime": 1721274675268,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "5vyvZUNhdTPGiVTb",
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.5vyvZUNhdTPGiVTb"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>A spectral, floating hand appears at a point you choose within range. The hand lasts for the duration or until you dismiss it as an action. The hand vanishes if it is ever more than 30 feet away from you or if you cast this spell again.</p>\n<p>You can use your action to control the hand. You can use the hand to manipulate an object, open an unlocked door or container, stow or retrieve an item from an open container, or pour the contents out of a vial. You can move the hand up to 30 feet each time you use it.</p>\n<p>The hand can't attack, activate magic items, or carry more than 10 pounds.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "256",
          "license": "",
          "custom": "",
          "revision": 1,
          "rules": "2014"
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": "",
          "value": 1
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "",
          "width": null,
          "prompt": true,
          "affects": {
            "choice": false
          },
          "template": {
            "units": "",
            "contiguous": false
          }
        },
        "range": {
          "value": "30",
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": [],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 0,
        "school": "con",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "utility",
            "activation": {
              "type": "action",
              "value": null,
              "override": false
            },
            "consumption": {
              "targets": [],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "units": "inst",
              "concentration": false,
              "override": false
            },
            "effects": [],
            "range": {
              "override": false
            },
            "target": {
              "prompt": true,
              "template": {
                "contiguous": false,
                "units": "ft"
              },
              "affects": {
                "choice": false
              },
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "roll": {
              "formula": "",
              "name": "",
              "prompt": false,
              "visible": false
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "none"
          }
        },
        "identifier": "mage-hand"
      },
      "name": "Mage Hand",
      "flags": {
        "ddbimporter": {
          "id": 138434,
          "definitionId": 2173,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Mage Hand",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 256,
              "sourceType": 1
            }
          ],
          "tags": [
            "Utility"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dnd5e": {}
      },
      "effects": [],
      "img": "icons/magic/unholy/strike-hand-glow-pink.webp",
      "folder": "e8UeRF8mmfaJRx4e",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675285,
        "modifiedTime": 1721274675285,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "LtQIuc6M248bxk0o",
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.LtQIuc6M248bxk0o"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>This spell is a minor magical trick that novice spellcasters use for practice. You create one of the following magical effects within range:</p>\n<ul>\n<li>You create an instantaneous, harmless sensory effect, such as a shower of sparks, a puff of wind, faint musical notes, or an odd odor.</li>\n<li>You instantaneously light or snuff out a candle, a torch, or a small campfire.</li>\n<li>You instantaneously clean or soil an object no larger than 1 cubic foot.</li>\n<li>You chill, warm, or flavor up to 1 cubic foot of nonliving &amp;Reference[material]{material} for 1 hour.</li>\n<li>You make a color, a small mark, or a symbol appear on an object or a surface for 1 hour.</li>\n<li>You create a nonmagical trinket or an illusory image that can fit in your hand and that lasts until the end of your next turn.</li>\n</ul>\n<p><br />If you cast this spell multiple times, you can have up to three of its non-instantaneous effects active at a time, and you can dismiss such an effect as an action.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "267",
          "license": "",
          "custom": "",
          "revision": 1,
          "rules": "2014"
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": "",
          "value": 1
        },
        "duration": {
          "value": "1",
          "units": "hour"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "",
          "width": null,
          "prompt": true,
          "affects": {
            "choice": false
          },
          "template": {
            "units": "",
            "contiguous": false
          }
        },
        "range": {
          "value": "10",
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": [],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 0,
        "school": "trs",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "utility",
            "activation": {
              "type": "action",
              "value": null,
              "override": false
            },
            "consumption": {
              "targets": [],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "units": "inst",
              "concentration": false,
              "override": false
            },
            "effects": [],
            "range": {
              "override": false
            },
            "target": {
              "prompt": true,
              "template": {
                "contiguous": false,
                "units": "ft"
              },
              "affects": {
                "choice": false
              },
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "roll": {
              "formula": "",
              "name": "",
              "prompt": false,
              "visible": false
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "none"
          }
        },
        "identifier": "prestidigitation"
      },
      "name": "Prestidigitation",
      "flags": {
        "ddbimporter": {
          "id": 138586,
          "definitionId": 2213,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Prestidigitation",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 267,
              "sourceType": 1
            }
          ],
          "tags": [
            "Utility"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dnd5e": {}
      },
      "effects": [],
      "img": "icons/magic/symbols/runes-triangle-magenta.webp",
      "folder": "Muf6CObMiNg37DS4",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675305,
        "modifiedTime": 1721274675305,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "ULnhs3ZJNBWT6eOH",
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.ULnhs3ZJNBWT6eOH"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>A bright streak flashes from your pointing finger to a point you choose within range and then blossoms with a low roar into an explosion of flame. Each creature in a 20-foot-radius &amp;Reference[sphere]{sphere} centered on that point must make a &amp;Reference[dex]{Dexterity} saving throw. A target takes 8d6 &amp;Reference[fire]{fire} damage on a failed save, or half as much damage on a successful one.</p>\n<p>The &amp;Reference[fire]{fire} spreads around corners. It ignites flammable objects in the area that aren't being worn or carried.</p>\n<p><em><strong>At Higher Levels.</strong></em> When you cast this spell using a spell slot of 4th level or higher, the damage increases by 1d6 for each slot level above 3rd.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "241",
          "license": "",
          "custom": "",
          "revision": 1,
          "rules": "2014"
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": "",
          "value": 1
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 20,
          "units": "ft",
          "type": "sphere",
          "width": null,
          "prompt": true,
          "affects": {
            "choice": false
          },
          "template": {
            "units": "ft",
            "type": "sphere",
            "size": "20",
            "contiguous": false
          }
        },
        "range": {
          "value": "150",
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 2,
          "max": "2",
          "per": "day",
          "recovery": [
            {
              "period": "day",
              "type": "recoverAll"
            }
          ],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "8d6[fire]",
              "fire"
            ]
          ],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "dex",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 3,
        "school": "evo",
        "properties": [
          "vocal",
          "somatic",
          "material"
        ],
        "materials": {
          "value": "a tiny ball of bat guano and sulfur",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "atwill",
          "prepared": true
        },
        "scaling": {
          "mode": "level",
          "formula": "1d6"
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "save",
            "activation": {
              "type": "action",
              "value": null,
              "override": false
            },
            "consumption": {
              "targets": [
                {
                  "type": "itemUses",
                  "target": "",
                  "value": "1",
                  "scaling": {
                    "mode": "",
                    "formula": ""
                  }
                }
              ],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "units": "inst",
              "concentration": false,
              "override": false
            },
            "effects": [],
            "range": {
              "override": false
            },
            "target": {
              "prompt": true,
              "template": {
                "contiguous": false,
                "units": "ft"
              },
              "affects": {
                "choice": false
              },
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "damage": {
              "onSave": "half",
              "parts": [
                {
                  "number": null,
                  "denomination": null,
                  "bonus": "",
                  "types": [
                    "fire"
                  ],
                  "custom": {
                    "enabled": true,
                    "formula": "8d6[fire]"
                  },
                  "scaling": {
                    "mode": "whole",
                    "number": null,
                    "formula": "1d6"
                  }
                }
              ],
              "critical": {
                "allow": false
              }
            },
            "save": {
              "ability": [
                "dex"
              ],
              "dc": {
                "calculation": "spellcasting",
                "formula": ""
              }
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": ""
          }
        },
        "identifier": "fireball"
      },
      "name": "Fireball",
      "flags": {
        "ddbimporter": {
          "id": 136815,
          "definitionId": 2102,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Fireball",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 241,
              "sourceType": 1
            }
          ],
          "tags": [
            "Damage"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dnd5e": {}
      },
      "effects": [],
      "img": "icons/magic/fire/projectile-fireball-smoke-large-orange.webp",
      "folder": "rkqMMY58A8Xdl9Mg",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274674865,
        "modifiedTime": 1721274674865,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "qLPmn0A2aafihftI",
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.qLPmn0A2aafihftI"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You touch a willing creature who isn't wearing armor, and a protective magical &amp;Reference[force]{force} surrounds it until the spell ends. The target's base AC becomes 13 + its &amp;Reference[dex]{Dexterity} modifier. The spell ends if the target dons armor or if you dismiss the spell as an action.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "256",
          "license": "",
          "custom": "",
          "revision": 1,
          "rules": "2014"
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": "",
          "value": 1
        },
        "duration": {
          "value": "8",
          "units": "hour"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 1,
          "units": "1",
          "type": "creature",
          "width": null,
          "prompt": true,
          "affects": {
            "type": "creature",
            "count": "1",
            "choice": false
          },
          "template": {
            "units": "1",
            "contiguous": false
          }
        },
        "range": {
          "value": null,
          "long": null,
          "units": "touch"
        },
        "uses": {
          "value": 2,
          "max": "2",
          "per": "day",
          "recovery": [
            {
              "period": "day",
              "type": "recoverAll"
            }
          ],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "util",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "abj",
        "properties": [
          "vocal",
          "somatic",
          "material"
        ],
        "materials": {
          "value": "a piece of cured leather",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "atwill",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "utility",
            "activation": {
              "type": "action",
              "value": null,
              "override": false
            },
            "consumption": {
              "targets": [
                {
                  "type": "itemUses",
                  "target": "",
                  "value": "1",
                  "scaling": {
                    "mode": "",
                    "formula": ""
                  }
                }
              ],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "units": "inst",
              "concentration": false,
              "override": false
            },
            "effects": [
              {
                "_id": "GKWzm5lv6xh23n8o"
              }
            ],
            "range": {
              "override": false
            },
            "target": {
              "prompt": true,
              "template": {
                "contiguous": false,
                "units": "ft"
              },
              "affects": {
                "choice": false
              },
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "roll": {
              "formula": "",
              "name": "",
              "prompt": false,
              "visible": false
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "none"
          }
        },
        "identifier": "mage-armor"
      },
      "name": "Mage Armor",
      "flags": {
        "ddbimporter": {
          "id": 138431,
          "definitionId": 2172,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Mage Armor",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 256,
              "sourceType": 1
            }
          ],
          "tags": [
            "Buff",
            "Warding"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dnd5e": {}
      },
      "effects": [
        {
          "changes": [
            {
              "key": "system.attributes.ac.calc",
              "mode": 5,
              "value": "mage",
              "priority": 5
            }
          ],
          "duration": {
            "seconds": 28800,
            "startTime": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": "#ffffff",
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName"
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Mage Armor",
          "statuses": [],
          "_id": "GKWzm5lv6xh23n8o",
          "description": "",
          "origin": null,
          "_stats": {
            "coreVersion": "12.331",
            "systemId": null,
            "systemVersion": null,
            "createdTime": null,
            "modifiedTime": null,
            "lastModifiedBy": null,
            "compendiumSource": null,
            "duplicateSource": null
          },
          "img": "icons/magic/defensive/shield-barrier-glowing-triangle-blue.webp",
          "type": "base",
          "system": {},
          "sort": 0,
          "_key": "!actors.items.effects!NlmQEOpo6f4QAMMR.KKYQMNNJr1iSzE7h.GKWzm5lv6xh23n8o"
        }
      ],
      "img": "icons/magic/defensive/shield-barrier-glowing-triangle-blue.webp",
      "folder": "QG5P4iTezYNjNLlu",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274674976,
        "modifiedTime": 1721274674976,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "KKYQMNNJr1iSzE7h",
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.KKYQMNNJr1iSzE7h"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>This spell creates an &amp;Reference[invisible]{invisible}, mindless, shapeless, Medium &amp;Reference[force]{force} that performs simple tasks at your command until the spell ends. The servant springs into existence in an unoccupied space on the ground within range. It has AC 10, 1 hit point, and a &amp;Reference[str]{Strength} of 2, and it can't attack. If it drops to 0 hit points, the spell ends.</p>\n<p>Once on each of your turns as a bonus action, you can mentally command the servant to move up to 15 feet and interact with an object. The servant can perform simple tasks that a human servant could do, such as fetching things, cleaning, mending, folding clothes, lighting fires, serving food, and pouring wine. Once you give the command, the servant performs the task to the best of its ability until it completes the task, then waits for your next command.</p>\n<p>If you command the servant to perform a task that would move it more than 60 feet away from you, the spell ends.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "284",
          "license": "",
          "custom": "",
          "revision": 1,
          "rules": "2014"
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": "",
          "value": 1
        },
        "duration": {
          "value": "1",
          "units": "hour"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "",
          "width": null,
          "prompt": true,
          "affects": {
            "choice": false
          },
          "template": {
            "units": "",
            "contiguous": false
          }
        },
        "range": {
          "value": "60",
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 2,
          "max": "2",
          "per": "day",
          "recovery": [
            {
              "period": "day",
              "type": "recoverAll"
            }
          ],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "con",
        "properties": [
          "vocal",
          "somatic",
          "material",
          "ritual"
        ],
        "materials": {
          "value": "a bit of string and of wood",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "atwill",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "utility",
            "activation": {
              "type": "action",
              "value": null,
              "override": false
            },
            "consumption": {
              "targets": [
                {
                  "type": "itemUses",
                  "target": "",
                  "value": "1",
                  "scaling": {
                    "mode": "",
                    "formula": ""
                  }
                }
              ],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "units": "inst",
              "concentration": false,
              "override": false
            },
            "effects": [],
            "range": {
              "override": false
            },
            "target": {
              "prompt": true,
              "template": {
                "contiguous": false,
                "units": "ft"
              },
              "affects": {
                "choice": false
              },
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "roll": {
              "formula": "",
              "name": "",
              "prompt": false,
              "visible": false
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "none"
          }
        },
        "identifier": "unseen-servant"
      },
      "name": "Unseen Servant",
      "flags": {
        "ddbimporter": {
          "id": 138901,
          "definitionId": 2288,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Unseen Servant",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 284,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dnd5e": {}
      },
      "effects": [],
      "img": "icons/magic/unholy/silhouette-robe-evil-power.webp",
      "folder": "e8UeRF8mmfaJRx4e",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675375,
        "modifiedTime": 1721274675375,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "ZUrcrmRSDX3slRSo",
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.ZUrcrmRSDX3slRSo"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You touch a willing creature. The target gains a flying speed of 60 feet for the duration. When the spell ends, the target falls if it is still aloft, unless it can stop the fall.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 4th level or higher, you can target one additional creature for each slot level above 3rd.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "243",
          "license": "",
          "custom": "",
          "revision": 1,
          "rules": "2014"
        },
        "activation": {
          "type": "",
          "cost": null,
          "condition": "",
          "value": null
        },
        "duration": {
          "value": "10",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "creature",
          "prompt": true,
          "affects": {
            "type": "creature",
            "choice": false
          },
          "template": {
            "units": "",
            "contiguous": false
          }
        },
        "range": {
          "value": null,
          "long": null,
          "units": "touch"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": [
            {
              "period": "day",
              "type": "recoverAll"
            }
          ],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 3,
        "school": "trs",
        "properties": [
          "vocal",
          "somatic",
          "material",
          "concentration"
        ],
        "materials": {
          "value": "a wing feather from any bird",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "atwill",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "utility",
            "activation": {
              "type": "action",
              "value": null,
              "override": false
            },
            "consumption": {
              "targets": [
                {
                  "type": "itemUses",
                  "target": "",
                  "value": "1",
                  "scaling": {
                    "mode": "",
                    "formula": ""
                  }
                }
              ],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "units": "inst",
              "concentration": false,
              "override": false
            },
            "effects": [
              {
                "_id": "9Fq76qcX7xoTN7vx"
              }
            ],
            "range": {
              "override": false
            },
            "target": {
              "prompt": true,
              "template": {
                "contiguous": false,
                "units": "ft"
              },
              "affects": {
                "choice": false
              },
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "roll": {
              "formula": "",
              "name": "",
              "prompt": false,
              "visible": false
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "none"
          }
        },
        "identifier": "fly"
      },
      "name": "Fly",
      "flags": {
        "ddbimporter": {
          "id": 137868,
          "definitionId": 2111,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Fly",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 243,
              "sourceType": 1
            }
          ],
          "tags": [
            "Movement"
          ],
          "version": "5.1.27",
          "effectsApplied": true,
          "chrisEffectsApplied": true,
          "chrisPreEffectName": "Fly"
        },
        "midi-qol": {
          "forceCEOff": true,
          "effectActivation": false,
          "forceCEOn": false,
          "rollAttackPerTarget": "default",
          "itemCondition": "",
          "reactionCondition": "",
          "otherCondition": "",
          "effectCondition": "",
          "removeAttackDamageButtons": "default"
        },
        "custom-character-sheet-sections": {
          "sectionName": ""
        },
        "rest-recovery": {
          "data": {
            "recovery": {
              "enabled": false
            }
          }
        },
        "midiProperties": {
          "nodam": false,
          "fulldam": false,
          "halfdam": false,
          "autoFailFriendly": false,
          "autoSaveFriendly": false,
          "rollOther": false,
          "critOther": false,
          "offHandWeapon": false,
          "magicdam": false,
          "magiceffect": false,
          "concentration": false,
          "toggleEffect": false,
          "ignoreTotalCover": false,
          "confirmTargets": "default",
          "noConcentrationCheck": false
        },
        "chris-premades": {
          "info": {
            "name": "Fly",
            "version": "0.7.45",
            "hasAnimation": true
          }
        },
        "autoanimations": {
          "id": "a21b3999-3913-4ed7-a1d5-16c6740c6205",
          "label": "Fly",
          "levels3d": {
            "type": "explosion",
            "data": {
              "color01": "#FFFFFF",
              "color02": "#FFFFFF",
              "spritePath": "modules/levels-3d-preview/assets/particles/dust.png"
            },
            "sound": {
              "enable": false
            },
            "secondary": {
              "enable": false,
              "data": {
                "color01": "#FFFFFF",
                "color02": "#FFFFFF",
                "spritePath": "modules/levels-3d-preview/assets/particles/dust.png"
              }
            }
          },
          "macro": {
            "enable": false
          },
          "meleeSwitch": {
            "video": {
              "dbSection": "range",
              "menuType": "weapon",
              "animation": "arrow",
              "variant": "regular",
              "color": "regular"
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "detect": "automatic",
              "range": 2,
              "returning": false,
              "switchType": "on"
            }
          },
          "menu": "melee",
          "primary": {
            "video": {
              "dbSection": "melee",
              "menuType": "weapon",
              "animation": "club",
              "variant": "01",
              "color": "white",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "isWait": false,
              "opacity": 1,
              "playbackRate": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "secondary": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": true,
              "isWait": false,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1.5,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "soundOnly": {
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            }
          },
          "source": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "isWait": true,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "target": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "opacity": 1,
              "persistent": false,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "unbindAlpha": false,
              "unbindVisibility": false,
              "zIndex": 1
            }
          },
          "isEnabled": false,
          "isCustomized": false,
          "fromAmmo": false,
          "version": 5
        },
        "dnd5e": {}
      },
      "effects": [
        {
          "changes": [
            {
              "key": "system.attributes.movement.fly",
              "mode": 4,
              "value": "60",
              "priority": 20
            }
          ],
          "duration": {
            "startTime": null,
            "seconds": null,
            "combat": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null
          },
          "tint": "#ffffff",
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "none",
              "selfTarget": false,
              "selfTargetAlways": false,
              "durationExpression": "",
              "macroRepeat": "none",
              "specialDuration": []
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "dfreds-convenient-effects": {
              "description": ""
            },
            "core": {
              "statusId": ""
            },
            "ActiveAuras": {
              "isAura": false,
              "aura": "None",
              "radius": "undefined",
              "alignment": "",
              "type": "",
              "ignoreSelf": false,
              "height": false,
              "hidden": false,
              "displayTemp": false,
              "hostile": false,
              "onlyOnce": false
            },
            "effectmacro": {
              "onCreate": {
                "script": "await chrisPremades.macros.fly.animationStart(token, origin);"
              },
              "onDelete": {
                "script": "await await chrisPremades.macros.fly.animationEnd(token, origin);"
              }
            }
          },
          "_id": "9Fq76qcX7xoTN7vx",
          "origin": null,
          "name": "Fly",
          "description": "",
          "statuses": [],
          "_stats": {
            "coreVersion": "12.331",
            "systemId": null,
            "systemVersion": null,
            "createdTime": null,
            "modifiedTime": null,
            "lastModifiedBy": null,
            "compendiumSource": null,
            "duplicateSource": null
          },
          "img": "icons/commodities/treasure/trinket-wing-white.webp",
          "type": "base",
          "system": {},
          "sort": 0,
          "_key": "!actors.items.effects!NlmQEOpo6f4QAMMR.3u0nZ71jFS5RoBtf.9Fq76qcX7xoTN7vx"
        }
      ],
      "img": "icons/commodities/treasure/trinket-wing-white.webp",
      "folder": "Muf6CObMiNg37DS4",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274674870,
        "modifiedTime": 1721274674870,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "3u0nZ71jFS5RoBtf",
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.3u0nZ71jFS5RoBtf"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You create a 20-foot-radius &amp;Reference[sphere]{sphere} of yellow, nauseating gas centered on a point within range. The cloud spreads around corners, and its area is heavily obscured. The cloud lingers in the air for the duration.</p>\n<p>Each creature that is completely within the cloud at the start of its turn must make a &amp;Reference[con]{Constitution} saving throw against &amp;Reference[poison]{poison}. On a failed save, the creature spends its action that turn retching and reeling. Creatures that don't need to breathe or are immune to &amp;Reference[poison]{poison} automatically succeed on this saving throw.</p>\n<p>A moderate wind (at least 10 miles per hour) disperses the cloud after 4 rounds. A strong wind (at least 20 miles per hour) disperses it after 1 round.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "278",
          "license": "",
          "custom": "",
          "revision": 1,
          "rules": "2014"
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": "",
          "value": 1
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 20,
          "units": "ft",
          "type": "sphere",
          "width": null,
          "prompt": true,
          "affects": {
            "choice": false
          },
          "template": {
            "units": "ft",
            "type": "sphere",
            "size": "20",
            "contiguous": false
          }
        },
        "range": {
          "value": "90",
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": [
            {
              "period": "day",
              "type": "recoverAll"
            }
          ],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "con",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 3,
        "school": "con",
        "properties": [
          "vocal",
          "somatic",
          "material",
          "concentration"
        ],
        "materials": {
          "value": "a rotten egg or several skunk cabbage leaves",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "atwill",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "save",
            "activation": {
              "type": "action",
              "value": null,
              "override": false
            },
            "consumption": {
              "targets": [
                {
                  "type": "itemUses",
                  "target": "",
                  "value": "1",
                  "scaling": {
                    "mode": "",
                    "formula": ""
                  }
                }
              ],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "units": "inst",
              "concentration": false,
              "override": false
            },
            "effects": [],
            "range": {
              "override": false
            },
            "target": {
              "prompt": true,
              "template": {
                "contiguous": false,
                "units": "ft"
              },
              "affects": {
                "choice": false
              },
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "damage": {
              "onSave": "half",
              "parts": [],
              "critical": {
                "allow": false
              }
            },
            "save": {
              "ability": [
                "con"
              ],
              "dc": {
                "calculation": "spellcasting",
                "formula": ""
              }
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": ""
          }
        },
        "identifier": "stinking-cloud"
      },
      "name": "Stinking Cloud",
      "flags": {
        "ddbimporter": {
          "id": 138796,
          "definitionId": 2265,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Stinking Cloud",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 278,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dnd5e": {}
      },
      "effects": [],
      "img": "icons/magic/air/fog-gas-smoke-dense-green.webp",
      "folder": "e8UeRF8mmfaJRx4e",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675120,
        "modifiedTime": 1721274675120,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "N83yOBt9pHmgZiAW",
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.N83yOBt9pHmgZiAW"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You conjure a mass of thick, sticky webbing at a point of your choice within range. The webs fill a 20-foot &amp;Reference[cube]{cube} from that point for the duration. The webs are difficult terrain and lightly obscure their area.</p>\n<p>If the webs aren't anchored between two solid masses (such as walls or trees) or layered across a floor, wall, or ceiling, the conjured web collapses on itself, and the spell ends at the start of your next turn. Webs layered over a flat surface have a depth of 5 feet.</p>\n<p>Each creature that starts its turn in the webs or that enters them during its turn must make a &amp;Reference[dex]{Dexterity} saving throw. On a failed save, the creature is &amp;Reference[restrained]{restrained} as long as it remains in the webs or until it breaks free.</p>\n<p>A creature &amp;Reference[restrained]{restrained} by the webs can use its action to make a &amp;Reference[str]{Strength} check against your spell save DC. If it succeeds, it is no longer &amp;Reference[restrained]{restrained}.</p>\n<p>The webs are flammable. Any 5-foot &amp;Reference[cube]{cube} of webs exposed to &amp;Reference[fire]{fire} burns away in 1 round, dealing 2d4 &amp;Reference[fire]{fire} damage to any creature that starts its turn in the &amp;Reference[fire]{fire}.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "287",
          "license": "",
          "custom": "",
          "revision": 1,
          "rules": "2014"
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": "",
          "value": 1
        },
        "duration": {
          "value": "1",
          "units": "hour"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 20,
          "units": "ft",
          "type": "cube",
          "width": null,
          "prompt": true,
          "affects": {
            "choice": false
          },
          "template": {
            "units": "ft",
            "type": "cube",
            "size": "20",
            "contiguous": false
          }
        },
        "range": {
          "value": "60",
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": [
            {
              "period": "day",
              "type": "recoverAll"
            }
          ],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 2,
        "school": "con",
        "properties": [
          "vocal",
          "somatic",
          "material",
          "concentration"
        ],
        "materials": {
          "value": "a bit of spiderweb",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "atwill",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "utility",
            "activation": {
              "type": "action",
              "value": null,
              "override": false
            },
            "consumption": {
              "targets": [
                {
                  "type": "itemUses",
                  "target": "",
                  "value": "1",
                  "scaling": {
                    "mode": "",
                    "formula": ""
                  }
                }
              ],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "units": "inst",
              "concentration": false,
              "override": false
            },
            "effects": [
              {
                "_id": "7VBk2HTl8DECJguR"
              }
            ],
            "range": {
              "override": false
            },
            "target": {
              "prompt": true,
              "template": {
                "contiguous": false,
                "units": "ft"
              },
              "affects": {
                "choice": false
              },
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "roll": {
              "formula": "",
              "name": "",
              "prompt": false,
              "visible": false
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "none"
          }
        },
        "identifier": "web"
      },
      "name": "Web",
      "flags": {
        "ddbimporter": {
          "id": 138944,
          "definitionId": 2299,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Web",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 287,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effect": {
            "applyStart": true,
            "applyEntry": true,
            "applyImmediate": false,
            "everyEntry": false,
            "allowVsRemoveCondition": true,
            "removalCheck": "str",
            "removalSave": null,
            "saveRemoves": false,
            "condition": "Restrained",
            "save": "dex"
          },
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "onUseMacroName": "[preActiveEffects]ItemMacro",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dae": {
          "macro": {
            "name": "Web",
            "type": "script",
            "scope": "global",
            "command": "if(!game.modules.get(\"ActiveAuras\")?.active) {\n  ui.notifications.error(\"ActiveAuras is not enabled\");\n  return;\n} else if (!game.modules.get(\"ddb-importer\")?.active) {\n  ui.notifications.error(\"ddb-importer is not enabled\");\n  return;\n}\n\nconst lastArg = args[args.length - 1];\n\nconsole.warn(\"ARGS\", {\n  args,\n  lastArg,\n})\n\nasync function attemptRemoval(targetToken, condition, item) {\n  if (game.dfreds.effectInterface.hasEffectApplied(condition, targetToken.document.uuid)) {\n    new Dialog({\n      title: `Use action to attempt to remove ${condition}?`,\n      buttons: {\n        one: {\n          label: \"Yes\",\n          callback: async () => {\n            const caster = item.parent;\n            const saveDc = caster.system.attributes.spelldc;\n            const removalCheck = item.flags.ddbimporter.effect.removalCheck;\n            const removalSave = item.flags.ddbimporter.effect.removalSave;\n            const ability = removalCheck ? removalCheck : removalSave;\n            const type = removalCheck ? \"check\" : \"save\";\n            const flavor = `${condition} (via ${item.name}) : ${CONFIG.DND5E.abilities[ability].label} ${type} vs DC${saveDc}`;\n            const rollResult = removalCheck\n              ? (await targetToken.actor.rollAbilityTest(ability, { flavor })).total\n              : (await targetToken.actor.rollAbilitySave(ability, { flavor })).total;\n\n            if (rollResult >= saveDc) {\n              game.dfreds.effectInterface.removeEffect({ effectName: condition, uuid: targetToken.document.uuid });\n            } else {\n              if (rollResult < saveDc) ChatMessage.create({ content: `${targetToken.name} fails the ${type} for ${item.name}, still has the ${condition} condition.` });\n            }\n          },\n        },\n        two: {\n          label: \"No\",\n          callback: () => {},\n        },\n      },\n    }).render(true);\n  }\n}\n\nasync function applyCondition(condition, targetToken, item, itemLevel) {\n  if (!game.dfreds.effectInterface.hasEffectApplied(condition, targetToken.document.uuid)) {\n    const caster = item.parent;\n    const workflowItemData = foundry.utils.duplicate(item);\n    workflowItemData.system.target = { value: 1, units: \"\", type: \"creature\" };\n    workflowItemData.system.save.ability = item.flags.ddbimporter.effect.save;\n    workflowItemData.system.properties = DDBImporter?.EffectHelper.removeFromProperties(workflowItemData.system.properties, \"concentration\");\n    workflowItemData.system.level = itemLevel;\n    workflowItemData.system.duration = { value: null, units: \"inst\" };\n    workflowItemData.system.target = { value: null, width: null, units: \"\", type: \"creature\" };\n    workflowItemData.system.uses = { value: null, max: \"\", per: null, recovery: \"\", autoDestroy: false };\n    workflowItemData.system.consume = { \"type\": \"\", \"target\": null, \"amount\": null };\n    workflowItemData.system.preparation.mode = \"atwill\";\n    foundry.utils.setProperty(workflowItemData, \"flags.itemacro\", {});\n    foundry.utils.setProperty(workflowItemData, \"flags.midi-qol\", {});\n    foundry.utils.setProperty(workflowItemData, \"flags.dae\", {});\n    foundry.utils.setProperty(workflowItemData, \"effects\", []);\n    delete workflowItemData._id;\n    workflowItemData.name = `${workflowItemData.name}: ${item.name} Condition save`;\n\n    const saveTargets = [...game.user?.targets].map((t )=> t.id);\n    game.user.updateTokenTargets([targetToken.id]);\n    const saveItem = new CONFIG.Item.documentClass(workflowItemData, { parent: caster });\n    const [config, options] = DDBImporter.EffectHelper.syntheticItemWorkflowOptions();\n    const result = await MidiQOL.completeItemUse(saveItem, config, options);\n\n    game.user.updateTokenTargets(saveTargets);\n    const failedSaves = [...result.failedSaves];\n    if (failedSaves.length > 0) {\n      await game.dfreds.effectInterface.addEffect({ effectName: condition, uuid: failedSaves[0].document.uuid });\n    }\n\n    return result;\n  }\n}\n\nif (args[0].tag === \"OnUse\" && args[0].macroPass === \"preActiveEffects\") {\n  const safeName = lastArg.itemData.name.replace(/\\s|'|\\.|’/g, \"_\");\n  const dataTracker = {\n    randomId: foundry.utils.randomID(),\n    targetUuids: lastArg.targetUuids,\n    startRound: game.combat.round,\n    startTurn: game.combat.turn,\n    spellLevel: lastArg.spellLevel,\n  };\n\n  const item = await fromUuid(lastArg.itemUuid);\n  // await item.update(dataTracker);\n  await DAE.unsetFlag(item.actor, `${safeName}Tracker`);\n  await DAE.setFlag(item.actor, `${safeName}Tracker`, dataTracker);\n\n  const sequencerFile = lastArg.item.flags.ddbimporter?.effect?.sequencerFile;\n  if (sequencerFile) {\n    const scale = lastArg.item.flags.ddbimporter.effect.sequencerScale ?? 1;\n    await DDBImporter?.EffectHelper.attachSequencerFileToTemplate(lastArg.templateUuid, sequencerFile, lastArg.itemUuid, scale);\n  }\n\n  if (lastArg.item.flags.ddbimporter?.effect?.applyImmediate) {\n    await DDBImporter?.EffectHelper.wait(500);\n    const condition = lastArg.item.flags.ddbimporter.effect.condition;\n    for (const token of lastArg.failedSaves) {\n      if (!game.dfreds.effectInterface.hasEffectApplied(condition, token.actor.uuid)) {\n        console.debug(`Applying ${condition} to ${token.name}`);\n        await game.dfreds.effectInterface.addEffect({ effectName: condition, uuid: token.actor.uuid });\n      }\n    };\n  }\n\n  return await game.modules.get(\"ActiveAuras\").api.AAHelpers.applyTemplate(args);\n\n} else if (args[0].tag === \"OnUse\" && args[0].macroPass === \"postActiveEffects\") {\n  if (lastArg.item.flags.ddbimporter?.effect?.applyImmediate) {\n    const condition = lastArg.item.flags.ddbimporter.effect.condition;\n    for (const token of lastArg.failedSaves) {\n      if (!game.dfreds.effectInterface.hasEffectApplied(condition, token.actor.uuid)) {\n        console.debug(`Applying ${condition} to ${token.name}`);\n        await game.dfreds.effectInterface.addEffect({ effectName: condition, uuid: token.actor.uuid });\n      }\n    };\n  }\n} else if (args[0] == \"on\" || args[0] == \"each\") {\n  const safeName = (lastArg.efData.name ?? lastArg.efData.label).replace(/\\s|'|\\.|’/g, \"_\");\n  const item = await fromUuid(lastArg.efData.origin);\n  // sometimes the round info has not updated, so we pause a bit\n  if (args[0] == \"each\") await DDBImporter?.EffectHelper.wait(500);\n  const targetItemTracker = DAE.getFlag(item.parent, `${safeName}Tracker`);\n  const originalTarget = targetItemTracker.targetUuids.includes(lastArg.tokenUuid);\n  const target = canvas.tokens.get(lastArg.tokenId);\n  const targetTokenTrackerFlag = DAE.getFlag(target.actor, `${safeName}Tracker`);\n  const targetedThisCombat = targetTokenTrackerFlag && targetItemTracker.randomId === targetTokenTrackerFlag.randomId;\n  const targetTokenTracker = targetedThisCombat\n    ? targetTokenTrackerFlag\n    : {\n      randomId: targetItemTracker.randomId,\n      round: game.combat.round,\n      turn: game.combat.turn,\n      hasLeft: false,\n      condition: item.flags.ddbimporter.effect.condition,\n    };\n\n  const castTurn = targetItemTracker.startRound === game.combat.round && targetItemTracker.startTurn === game.combat.turn;\n  const isLaterTurn = game.combat.round > targetTokenTracker.round || game.combat.turn > targetTokenTracker.turn;\n  const everyEntry = foundry.utils.hasProperty(item, \"flags.ddbimporter.effect.everyEntry\")\n    ? item.flags.ddbimporter.effect.everyEntry\n    : false;\n\n  // if:\n  // not cast turn, and not part of the original target\n  // AND one of the following\n  // not original template and have not yet had this effect applied this combat OR\n  // has been targeted this combat, left and re-entered effect, and is a later turn\n\n  if (castTurn && originalTarget) {\n    console.debug(`Token ${target.name} is part of the original target for ${item.name}`);\n  } else if (everyEntry || !targetedThisCombat || (targetedThisCombat && isLaterTurn)) {\n    console.debug(`Token ${target.name} is targeted for immediate save vs condition with ${item.name}, using the following factors`, { originalTarget, castTurn, targetedThisCombat, targetTokenTracker, isLaterTurn });\n    targetTokenTracker.hasLeft = false;\n    await applyCondition(targetTokenTracker.condition, target, item, targetItemTracker.spellLevel);\n  }\n  await DAE.setFlag(target.actor, `${safeName}Tracker`, targetTokenTracker);\n  const allowVsRemoveCondition = item.flags.ddbimporter.effect.allowVsRemoveCondition;\n  const effectApplied = game.dfreds.effectInterface.hasEffectApplied(targetTokenTracker.condition, target.document.uuid);\n  const currentTokenCombatTurn = game.combat.current.tokenId === lastArg.tokenId;\n  if (currentTokenCombatTurn && allowVsRemoveCondition && effectApplied) {\n    console.log(`Removing ${targetTokenTracker.condition}`);\n    await attemptRemoval(target, targetTokenTracker.condition, item);\n  }\n} else if (args[0] == \"off\") {\n  const safeName = (lastArg.efData.name ?? lastArg.efData.label).replace(/\\s|'|\\.|’/g, \"_\");\n  const targetToken = await fromUuid(lastArg.tokenUuid);\n  console.warn(\"off args\", {\n    targetToken,\n    tokenUuid: lastArg.tokenUuid,\n  })\n  const targetTokenTracker = await DAE.getFlag(targetToken.actor, `${safeName}Tracker`);\n  console.warn(\"targetTokenTracker\", targetTokenTracker);\n  const removeOnOff = foundry.utils.hasProperty(lastArg, \"efData.flags.ddbimporter.effect.removeOnOff\")\n    ? lastArg.efData.flags.ddbimporter.effect.removeOnOff\n    : true;\n\n  if (targetTokenTracker?.condition && removeOnOff && game.dfreds.effectInterface.hasEffectApplied(targetTokenTracker.condition, lastArg.tokenUuid)) {\n    console.debug(`Removing ${targetTokenTracker.condition} from ${targetToken.name}`);\n    game.dfreds.effectInterface.removeEffect({ effectName: targetTokenTracker.condition, uuid: lastArg.tokenUuid });\n  }\n\n  if (targetTokenTracker) {\n    targetTokenTracker.hasLeft = true;\n    targetTokenTracker.turn = game.combat.turn;\n    targetTokenTracker.round = game.combat.round;\n    await DAE.setFlag(targetToken.actor, `${safeName}Tracker`, targetTokenTracker);\n  }\n}\n"
          }
        },
        "dnd5e": {}
      },
      "effects": [
        {
          "changes": [
            {
              "key": "macro.itemMacro",
              "value": "@item.level @attributes.spelldc",
              "mode": 0,
              "priority": 20
            }
          ],
          "duration": {
            "seconds": 3600,
            "startTime": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": "#ffffff",
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName",
              "macroRepeat": "startEveryTurn"
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {},
            "ActiveAuras": {
              "isAura": true,
              "aura": "All",
              "radius": null,
              "alignment": "",
              "type": "",
              "ignoreSelf": false,
              "height": false,
              "hidden": false,
              "onlyOnce": false,
              "save": "dex",
              "savedc": null,
              "displayTemp": true
            }
          },
          "name": "Web",
          "statuses": [],
          "_id": "7VBk2HTl8DECJguR",
          "description": "",
          "origin": null,
          "_stats": {
            "coreVersion": "12.331",
            "systemId": null,
            "systemVersion": null,
            "createdTime": null,
            "modifiedTime": null,
            "lastModifiedBy": null,
            "compendiumSource": null,
            "duplicateSource": null
          },
          "img": "icons/commodities/materials/material-webbing.webp",
          "type": "base",
          "system": {},
          "sort": 0,
          "_key": "!actors.items.effects!NlmQEOpo6f4QAMMR.Qimx0uJnKBPNfndp.7VBk2HTl8DECJguR"
        }
      ],
      "img": "icons/commodities/materials/material-webbing.webp",
      "folder": "e8UeRF8mmfaJRx4e",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675168,
        "modifiedTime": 1721274675168,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "Qimx0uJnKBPNfndp",
      "_key": "!actors.items!NlmQEOpo6f4QAMMR.Qimx0uJnKBPNfndp"
    }
  ],
  "effects": [],
  "folder": "12ExxahlaP4ZrRpn",
  "sort": 0,
  "ownership": {
    "default": 0,
    "6yhz13iFYYklKtgA": 3
  },
  "flags": {
    "dnd5e": {},
    "monsterMunch": {
      "url": "https://www.dndbeyond.com/monsters/2560761-conjurer-wizard",
      "img": "https://www.dndbeyond.com/avatars/thumbnails/25746/237/1000/1000/637880557303639850.jpeg",
      "tokenImg": "https://www.dndbeyond.com/avatars/25746/236/637880557301369782.jpeg",
      "isStockImg": false,
      "spellList": {
        "class": [],
        "pact": [],
        "atwill": [
          "dancing lights",
          "mage hand",
          "prestidigitation"
        ],
        "innate": [
          {
            "name": "fireball",
            "type": "day",
            "value": "2",
            "innate": false
          },
          {
            "name": "mage armor",
            "type": "day",
            "value": "2",
            "innate": false
          },
          {
            "name": "unseen servant",
            "type": "day",
            "value": "2",
            "innate": false
          },
          {
            "name": "fly",
            "type": "day",
            "value": "1",
            "innate": false
          },
          {
            "name": "stinking cloud",
            "type": "day",
            "value": "1",
            "innate": false
          },
          {
            "name": "web",
            "type": "day",
            "value": "1",
            "innate": false
          }
        ],
        "edgeCases": [],
        "material": true,
        "innateMatch": false
      }
    },
    "ddbimporter": {
      "id": 2560761,
      "entityTypeId": 779871897,
      "creatureGroupId": null,
      "creatureFlags": [],
      "version": "5.1.27",
      "isLegacy": false,
      "flatAC": false
    }
  },
  "_stats": {
    "systemId": "dnd5e",
    "systemVersion": "4.4.2",
    "coreVersion": "12.343",
    "createdTime": 1721275244715,
    "modifiedTime": 1748178751425,
    "lastModifiedBy": "6yhz13iFYYklKtgA",
    "compendiumSource": null,
    "duplicateSource": null
  },
  "_key": "!actors!NlmQEOpo6f4QAMMR"
}
