{
  "name": "Night Hag (Coven Variant)",
  "type": "npc",
  "_id": "kGGL3el9Ha0MdeHk",
  "img": "https://www.dndbeyond.com/avatars/5738/106/636898360874368597.png",
  "system": {
    "currency": {
      "pp": 0,
      "gp": 0,
      "ep": 0,
      "sp": 0,
      "cp": 0
    },
    "abilities": {
      "str": {
        "value": 18,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "dex": {
        "value": 15,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "con": {
        "value": 16,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "int": {
        "value": 16,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "wis": {
        "value": 14,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "cha": {
        "value": 16,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      }
    },
    "bonuses": {
      "mwak": {
        "attack": "",
        "damage": ""
      },
      "rwak": {
        "attack": "",
        "damage": ""
      },
      "msak": {
        "attack": "",
        "damage": ""
      },
      "rsak": {
        "attack": "",
        "damage": ""
      },
      "abilities": {
        "check": "",
        "save": "",
        "skill": ""
      },
      "spell": {
        "dc": ""
      }
    },
    "skills": {
      "acr": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ani": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "arc": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ath": {
        "ability": "str",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "dec": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 2,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "his": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ins": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 2,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "itm": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "inv": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "med": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "nat": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "prc": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 2,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "prf": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "per": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "rel": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "slt": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ste": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 2,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "sur": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      }
    },
    "tools": {},
    "spells": {
      "spell1": {
        "value": 4,
        "override": 4
      },
      "spell2": {
        "value": 3,
        "override": 3
      },
      "spell3": {
        "value": 3,
        "override": 3
      },
      "spell4": {
        "value": 3,
        "override": 3
      },
      "spell5": {
        "value": 2,
        "override": 2
      },
      "spell6": {
        "value": 1,
        "override": 1
      },
      "spell7": {
        "value": 0,
        "override": null
      },
      "spell8": {
        "value": 0,
        "override": null
      },
      "spell9": {
        "value": 0,
        "override": null
      },
      "pact": {
        "value": 0,
        "override": null
      }
    },
    "attributes": {
      "init": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonus": ""
      },
      "movement": {
        "burrow": null,
        "climb": null,
        "fly": null,
        "swim": null,
        "walk": 30,
        "units": "ft",
        "hover": false
      },
      "attunement": {
        "max": 3
      },
      "senses": {
        "darkvision": 120,
        "blindsight": 0,
        "tremorsense": 0,
        "truesight": 0,
        "units": "ft",
        "special": ""
      },
      "spellcasting": "cha",
      "exhaustion": 0,
      "concentration": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonuses": {
          "save": ""
        },
        "limit": 1
      },
      "ac": {
        "flat": 17,
        "calc": "natural",
        "formula": ""
      },
      "hp": {
        "value": 112,
        "max": 112,
        "temp": 0,
        "tempmax": 0,
        "formula": "15d8 + 45"
      },
      "death": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "success": 0,
        "failure": 0
      }
    },
    "details": {
      "biography": {
        "value": "",
        "public": ""
      },
      "alignment": "Neutral Evil",
      "race": null,
      "type": {
        "value": "fiend",
        "subtype": ""
      },
      "environment": "",
      "cr": 7,
      "spellLevel": 0,
      "source": {
        "book": "Monster Manual",
        "page": "178",
        "custom": "",
        "license": ""
      }
    },
    "resources": {
      "legact": {
        "value": 0,
        "max": 0
      },
      "legres": {
        "value": 0,
        "max": 0
      },
      "lair": {
        "value": false,
        "initiative": null
      }
    },
    "traits": {
      "size": "med",
      "di": {
        "value": [],
        "bypasses": [],
        "custom": ""
      },
      "dr": {
        "value": [
          "cold",
          "fire",
          "bludgeoning",
          "piercing",
          "slashing",
          "physical",
          "silver"
        ],
        "bypasses": [
          "mgc",
          "sil"
        ],
        "custom": ""
      },
      "dv": {
        "value": [],
        "bypasses": [],
        "custom": ""
      },
      "dm": {
        "amount": {},
        "bypasses": []
      },
      "ci": {
        "value": [
          "charmed"
        ],
        "custom": ""
      },
      "languages": {
        "value": [
          "abyssal",
          "common",
          "infernal",
          "primordial"
        ],
        "custom": ""
      }
    }
  },
  "prototypeToken": {
    "name": "Night Hag (Coven Variant)",
    "displayName": 20,
    "actorLink": false,
    "appendNumber": false,
    "prependAdjective": false,
    "texture": {
      "src": "ddb-images/other/npc-token-Night-Hag-Coven-Variant.jpeg",
      "scaleX": 1,
      "scaleY": 1,
      "offsetX": 0,
      "offsetY": 0,
      "rotation": 0
    },
    "width": 1,
    "height": 1,
    "lockRotation": false,
    "rotation": 0,
    "alpha": 1,
    "disposition": -1,
    "displayBars": 20,
    "bar1": {
      "attribute": "attributes.hp"
    },
    "bar2": {
      "attribute": null
    },
    "light": {
      "alpha": 0.5,
      "angle": 360,
      "bright": 0,
      "coloration": 1,
      "dim": 0,
      "attenuation": 0.5,
      "luminosity": 0.5,
      "saturation": 0,
      "contrast": 0,
      "shadows": 0,
      "animation": {
        "type": null,
        "speed": 5,
        "intensity": 5,
        "reverse": false
      },
      "darkness": {
        "min": 0,
        "max": 1
      }
    },
    "sight": {
      "enabled": false,
      "range": 120,
      "angle": 360,
      "visionMode": "darkvision",
      "color": null,
      "attenuation": 0,
      "brightness": 0,
      "saturation": -1,
      "contrast": 0
    },
    "detectionModes": [],
    "flags": {
      "monks-tokenbar": {
        "include": "default"
      },
      "tagger": {
        "tags": [
          "dndbeyond",
          "ddb-importer",
          "fiend"
        ]
      }
    },
    "randomImg": false
  },
  "items": [
    {
      "_id": "H09gXFTqhihYOpNj",
      "name": "Claws",
      "type": "weapon",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p>(Hag Form Only). <em>Melee Weapon Attack:</em> +7 to hit, reach 5 ft., one target. <em>Hit:</em> [[/damage 2d8 + @mod type=slashing average=true]] damage.</p>\n</section>\nThe [[lookup @name]] attacks with its [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "178",
          "custom": "",
          "license": ""
        },
        "identified": true,
        "unidentified": {
          "description": ""
        },
        "container": null,
        "quantity": 1,
        "weight": 0,
        "price": {
          "value": 0,
          "denomination": "gp"
        },
        "rarity": "",
        "attunement": 0,
        "equipped": true,
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": 5,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": "str",
        "actionType": "mwak",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "2d8[slashing] + @mod",
              "slashing"
            ]
          ],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "armor": {
          "value": null
        },
        "hp": {
          "value": null,
          "max": null,
          "dt": null,
          "conditions": ""
        },
        "type": {
          "value": "natural",
          "baseItem": ""
        },
        "magicalBonus": null,
        "properties": [],
        "proficient": 1
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<strong>Claws.</strong>",
          "fullName": "Claws.",
          "actionCopy": false,
          "type": "action",
          "actionInfo": {
            "damage": {
              "parts": [
                [
                  "2d8[slashing] + @mod",
                  "slashing"
                ]
              ],
              "versatile": ""
            },
            "baseAbility": "str",
            "toHit": 7,
            "proficient": true,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/commodities/claws/claws-white.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": null,
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null
      },
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.H09gXFTqhihYOpNj"
    },
    {
      "_id": "A0YdheGpNVPxqPe6",
      "name": "Change Shape",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p> The hag magically polymorphs into a Small or Medium female &amp;Reference[humanoid]{humanoid}, or back into her true form. Her statistics are the same in each form. Any equipment she is wearing or carrying isn't transformed. She reverts to her true form if she dies.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "178",
          "custom": "",
          "license": ""
        },
        "activation": {
          "type": "special",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<strong>Change Shape.</strong>",
          "fullName": "Change Shape.",
          "actionCopy": false,
          "type": "action",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/creatures/magical/humanoid-giant-forest-blue.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": null,
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null
      },
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.A0YdheGpNVPxqPe6"
    },
    {
      "_id": "I5PK1SBhRFBsDvX2",
      "name": "Etherealness",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p> The hag magically enters the Ethereal Plane from the &amp;Reference[material]{Material} Plane, or vice versa. To do so, the hag must have a heartstone in her possession.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "178",
          "custom": "",
          "license": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<strong>Etherealness.</strong>",
          "fullName": "Etherealness.",
          "actionCopy": false,
          "type": "action",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/magic/control/debuff-chains-blue.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": null,
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null
      },
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.I5PK1SBhRFBsDvX2"
    },
    {
      "_id": "RZwbn5nUaZqWZ7VW",
      "name": "Nightmare Haunting",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p> While on the Ethereal Plane, the hag magically touches a sleeping &amp;Reference[humanoid]{humanoid} on the &amp;Reference[material]{Material} Plane. A protection from evil and good spell cast on the target prevents this contact, as does a magic circle. As long as the contact persists, the target has dreadful visions. If these visions last for at least 1 hour, the target gains no benefit from its rest, and its hit point maximum is reduced by 5 (1d10). If this effect reduces the target's hit point maximum to 0, the target dies, and if the target was evil, its soul is trapped in the hag's soul bag. The reduction to the target's hit point maximum lasts until removed by the greater restoration spell or similar magic.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "178",
          "custom": "",
          "license": ""
        },
        "activation": {
          "type": "special",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<strong>Nightmare Haunting (1/Day).</strong>",
          "fullName": "Nightmare Haunting (1/Day).",
          "actionCopy": false,
          "type": "action",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/magic/death/projectile-skull-flaming-green.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": null,
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null
      },
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.RZwbn5nUaZqWZ7VW"
    },
    {
      "_id": "1MuxMmx1wU4ccLjB",
      "name": "Innate Spellcasting",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong>Innate Spellcasting.</strong></em> The hag's innate spellcasting ability is &amp;Reference[cha]{Charisma} (spell save DC 14, +6 to hit with spell attacks). She can innately cast the following spells, requiring no &amp;Reference[material]{material} components:</p><p>At will: detect magic, magic missile</p><p>2/day each: plane shift (self only), ray of enfeeblement, sleep</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "178",
          "custom": "",
          "license": ""
        },
        "activation": {
          "cost": null,
          "type": "",
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<em><strong>Innate Spellcasting.</strong></em>",
          "fullName": "Innate Spellcasting.",
          "actionCopy": false,
          "type": "special",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/magic/unholy/orb-smoking-green.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": null,
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null
      },
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.1MuxMmx1wU4ccLjB"
    },
    {
      "_id": "Y732fD363JYJbXzn",
      "name": "Magic Resistance",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong>Magic Resistance.</strong></em> The hag has advantage on saving throws against spells and other magical effects.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "178",
          "custom": "",
          "license": ""
        },
        "activation": {
          "cost": null,
          "type": "",
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<em><strong>Magic Resistance.</strong></em>",
          "fullName": "Magic Resistance.",
          "actionCopy": false,
          "type": "special",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/magic/defensive/shield-barrier-glowing-blue.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": null,
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null
      },
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.Y732fD363JYJbXzn"
    },
    {
      "_id": "hBil3lkuYUOBGIuj",
      "name": "Shared Spellcasting",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong>Shared Spellcasting.</strong></em> While all three members of a hag coven are within 30 feet of one another, they can each cast the following spells from the wizard’s spell list but must share the spell slots among themselves:</p><p>1st level (4 slots): identify, ray of sickness</p><p>2nd level (3 slots): hold person, locate object</p><p>3rd level (3 slots): bestow curse, counterspell, &amp;Reference[lightning]{lightning} bolt</p><p>4th level (3 slots): phantasmal killer, polymorph</p><p>5th level (2 slots): contact other plane, scrying</p><p>6th level (1 slot): eyebite</p><p>For casting these spells, each hag is a 12th-level spellcaster that uses &amp;Reference[int]{Intelligence} as her spellcasting ability. The spell save DC is 15, and the spell attack bonus is +7.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "178",
          "custom": "",
          "license": ""
        },
        "activation": {
          "cost": null,
          "type": "",
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<em><strong>Shared Spellcasting.</strong></em>",
          "fullName": "Shared Spellcasting.",
          "actionCopy": false,
          "type": "special",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/sundries/scrolls/scroll-symbol-eye-brown.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": null,
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null
      },
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.hBil3lkuYUOBGIuj"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You choose one object that you must touch throughout the casting of the spell. If it is a magic item or some other magic-imbued object, you learn its properties and how to use them, whether it requires attunement to use, and how many charges it has, if any. You learn whether any spells are affecting the item and what they are. If the item was created by a spell, you learn which spell created it.</p>\n<p>If you instead touch a creature throughout the casting, you learn what spells, if any, are currently affecting it.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "252",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "minute",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "touch"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "div",
        "properties": [
          "vocal",
          "somatic",
          "ritual"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Identify",
      "flags": {
        "ddbimporter": {
          "id": 138343,
          "definitionId": 2152,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Identify",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 252,
              "sourceType": 1
            }
          ],
          "tags": [
            "Detection"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/tools/scribal/magnifying-glass.webp",
      "folder": "Sve3VzpVw1SFqYSn",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274675560,
        "modifiedTime": 1721274675560,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "8JNlASmXa3pueGN2",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.8JNlASmXa3pueGN2"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>Choose a &amp;Reference[humanoid]{humanoid} that you can see within range. The target must succeed on a &amp;Reference[wis]{Wisdom} saving throw or be &amp;Reference[paralyzed]{paralyzed} for the duration. At the end of each of its turns, the target can make another &amp;Reference[wis]{Wisdom} saving throw. On a success, the spell ends on the target.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, you can target one additional &amp;Reference[humanoid]{humanoid} for each slot level above 2nd. The humanoids must be within 30 feet of each other when you target them.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "251",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "creature",
          "prompt": true
        },
        "range": {
          "value": 60,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "wis",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 2,
        "school": "enc",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Hold Person",
      "flags": {
        "ddbimporter": {
          "id": 138145,
          "definitionId": 2147,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Hold Person",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 251,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true,
          "chrisEffectsApplied": true,
          "chrisPreEffectName": "Hold Person"
        },
        "betterRolls5e": {
          "quickVersatile": {
            "altValue": true
          },
          "quickCharges": {
            "value": {
              "use": true,
              "resource": true
            },
            "altValue": {
              "use": true,
              "resource": true
            }
          }
        },
        "dae": {
          "activeEquipped": false,
          "alwaysActive": false
        },
        "midi-qol": {
          "onUseMacroName": "[preambleComplete]function.chrisPremades.macros.upcastTargets.plusOne,[preambleComplete]function.chrisPremades.macros.holdPerson",
          "effectActivation": false,
          "forceCEOff": true,
          "forceCEOn": false,
          "rollAttackPerTarget": "default",
          "itemCondition": "",
          "effectCondition": "",
          "removeAttackDamageButtons": "default"
        },
        "custom-character-sheet-sections": {
          "sectionName": ""
        },
        "rest-recovery": {
          "data": {
            "recovery": {
              "enabled": false
            }
          }
        },
        "midiProperties": {
          "nodam": false,
          "fulldam": false,
          "halfdam": false,
          "rollOther": false,
          "critOther": false,
          "magicdam": false,
          "magiceffect": false,
          "concentration": false,
          "toggleEffect": false,
          "ignoreTotalCover": false,
          "autoFailFriendly": false,
          "offHandWeapon": false,
          "autoSaveFriendly": false,
          "confirmTargets": "default",
          "noConcentrationCheck": false
        },
        "favtab": {
          "isFavorite": false
        },
        "exportSource": {
          "world": "homebrew",
          "system": "dnd5e",
          "coreVersion": "10.291",
          "systemVersion": "2.1.4"
        },
        "chris-premades": {
          "info": {
            "name": "Hold Person",
            "version": "0.10.72",
            "settings": [
              "Active Effect Additions"
            ]
          }
        },
        "dnd5e": {}
      },
      "effects": [
        {
          "icon": "icons/magic/control/energy-stream-link-large-teal.webp",
          "changes": [
            {
              "key": "macro.CE",
              "mode": 0,
              "value": "Paralyzed",
              "priority": 20
            },
            {
              "key": "flags.midi-qol.OverTime",
              "mode": 5,
              "value": "label=Hold Person (End of Turn),turn=end,saveDC=@item.save.dc,saveAbility=wis,savingThrow=true,saveMagic=true",
              "priority": 20
            },
            {
              "key": "macro.tokenMagic",
              "mode": 0,
              "value": "mantle-of-madness",
              "priority": 20
            }
          ],
          "duration": {
            "startTime": null,
            "seconds": null,
            "combat": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null
          },
          "tint": null,
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName",
              "selfTarget": false,
              "durationExpression": "",
              "macroRepeat": "none",
              "specialDuration": [],
              "selfTargetAlways": false,
              "disableIncapacitated": false,
              "dontApply": false,
              "showIcon": false
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {
              "statusId": ""
            },
            "dnd5e-helpers": {
              "rest-effect": "Ignore"
            },
            "ActiveAuras": {
              "isAura": false,
              "aura": "None",
              "radius": "null",
              "alignment": "",
              "type": "",
              "ignoreSelf": false,
              "height": false,
              "hidden": false,
              "displayTemp": false,
              "hostile": false,
              "onlyOnce": false,
              "nameOverride": "",
              "customCheck": "",
              "wallsBlock": "system"
            },
            "dfreds-convenient-effects": {
              "description": ""
            }
          },
          "_id": "GrIRQhRjmUWtDzfR",
          "origin": null,
          "name": "Hold Person",
          "description": "",
          "statuses": [],
          "_key": "!actors.items.effects!kGGL3el9Ha0MdeHk.VEsmnkMYK0Jnuizp.GrIRQhRjmUWtDzfR"
        }
      ],
      "img": "icons/magic/control/debuff-energy-hold-blue-yellow.webp",
      "folder": "qUHjLOJ6GhNjE4HD",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274673545,
        "modifiedTime": 1721274673545,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "VEsmnkMYK0Jnuizp",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.VEsmnkMYK0Jnuizp"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>Describe or name an object that is familiar to you. You sense the direction to the object's location, as long as that object is within 1,000 feet of you. If the object is in motion, you know the direction of its movement.</p>\n<p>The spell can locate a specific object known to you, as long as you have seen it up close--within 30 feet--at least once. Alternatively, the spell can locate the nearest object of a particular kind, such as a certain kind of apparel, jewelry, furniture, tool, or weapon.</p>\n<p>This spell can't locate an object if any thickness of lead, even a thin sheet, blocks a direct path between you and the object.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "256",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "10",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "self",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 2,
        "school": "div",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Locate Object",
      "flags": {
        "ddbimporter": {
          "id": 138418,
          "definitionId": 2170,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Locate Object",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 256,
              "sourceType": 1
            }
          ],
          "tags": [
            "Detection"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/sundries/books/book-red-exclamation.webp",
      "folder": "Sve3VzpVw1SFqYSn",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274673596,
        "modifiedTime": 1721274673596,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "WJM7WB3ABualLlTg",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.WJM7WB3ABualLlTg"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You touch a creature, and that creature must succeed on a &amp;Reference[wis]{Wisdom} saving throw or become cursed for the duration of the spell. When you cast this spell, choose the &amp;Reference[nat]{nature} of the curse from the following options:</p>\n<ul>\n<li>Choose one ability score. While cursed, the target has disadvantage on ability checks and saving throws made with that ability score.</li>\n<li>While cursed, the target has disadvantage on attack rolls against you.</li>\n<li>While cursed, the target must make a &amp;Reference[wis]{Wisdom} saving throw at the start of each of its turns. If it fails, it wastes its action that turn doing nothing.</li>\n<li>While the target is cursed, your attacks and spells deal an extra 1d8 &amp;Reference[necrotic]{necrotic} damage to the target.</li>\n</ul>\n<p>A remove curse spell ends this effect. At the DM's option, you may choose an alternative curse effect, but it should be no more powerful than those described above. The DM has final say on such a curse's effect.</p>\n<p><em><strong>At Higher Levels.</strong></em> If you cast this spell using a spell slot of 4th level or higher, the duration is &amp;Reference[concentration]{concentration}, up to 10 minutes. If you use a spell slot of 5th level or higher, the duration is 8 hours. If you use a spell slot of 7th level or higher, the duration is 24 hours. If you use a 9th level spell slot, the spell lasts until it is dispelled. Using a spell slot of 5th level or higher grants a duration that doesn't require &amp;Reference[concentration]{concentration}.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "218",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "touch"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "wis",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 3,
        "school": "nec",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Bestow Curse",
      "flags": {
        "ddbimporter": {
          "id": 136112,
          "definitionId": 2013,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Bestow Curse",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 218,
              "sourceType": 1
            }
          ],
          "tags": [
            "Debuff"
          ],
          "version": "5.1.27",
          "effectsApplied": true,
          "chrisEffectsApplied": true,
          "chrisPreEffectName": "Bestow Curse"
        },
        "custom-character-sheet-sections": {
          "sectionName": ""
        },
        "rest-recovery": {
          "data": {
            "recovery": {
              "enabled": false
            }
          }
        },
        "midi-qol": {
          "effectActivation": false,
          "onUseMacroName": "[postActiveEffects]function.chrisPremades.macros.bestowCurse.item",
          "onUseMacroParts": {
            "items": {
              "0": {
                "macroName": "function.chrisPremades.macros.bestowCurse.item",
                "option": "postActiveEffects"
              }
            }
          },
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "nodam": false,
          "fulldam": false,
          "halfdam": false,
          "autoFailFriendly": false,
          "autoSaveFriendly": false,
          "rollOther": false,
          "critOther": false,
          "offHandWeapon": false,
          "magicdam": false,
          "magiceffect": false,
          "concentration": false,
          "toggleEffect": false,
          "ignoreTotalCover": false,
          "confirmTargets": "default"
        },
        "tidy5e-sheet": {
          "favorite": false
        },
        "chris-premades": {
          "info": {
            "name": "Bestow Curse",
            "version": "0.7.01"
          }
        },
        "dnd5e": {}
      },
      "effects": [],
      "img": "icons/magic/symbols/triangle-glow-purple.webp",
      "folder": "ocH9XKjvhtI6hJk6",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274673205,
        "modifiedTime": 1721274673205,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "3mSpIT69oABIIpCj",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.3mSpIT69oABIIpCj"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You attempt to interrupt a creature in the process of casting a spell. If the creature is casting a spell of 3rd level or lower, its spell fails and has no effect. If it is casting a spell of 4th level or higher, make an ability check using your spellcasting ability. The DC equals 10 + the spell's level. On a success, the creature's spell fails and has no effect.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 4th level or higher, the interrupted spell has no effect if its level is less than or equal to the level of the spell slot you used.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "228",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "reactionmanual",
          "cost": 1,
          "condition": "which you take when you see a creature within 60 feet of you casting a spell"
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 1,
          "units": "",
          "type": "creature",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 60,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 3,
        "school": "abj",
        "properties": [
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Counterspell",
      "flags": {
        "ddbimporter": {
          "id": 136448,
          "definitionId": 2051,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Counterspell",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 228,
              "sourceType": 1
            }
          ],
          "tags": [
            "Negation"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/magic/unholy/hands-cloud-light-pink.webp",
      "folder": "QG5P4iTezYNjNLlu",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274674739,
        "modifiedTime": 1721274674739,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "YDMPD69koo3B2BNX",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.YDMPD69koo3B2BNX"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>A stroke of &amp;Reference[lightning]{lightning} forming a &amp;Reference[line]{line} 100 feet long and 5 feet wide blasts out from you in a direction you choose. Each creature in the &amp;Reference[line]{line} must make a &amp;Reference[dex]{Dexterity} saving throw. A creature takes 8d6 &amp;Reference[lightning]{lightning} damage on a failed save, or half as much damage on a successful one.</p>\n<p>The &amp;Reference[lightning]{lightning} ignites flammable objects in the area that aren't being worn or carried.</p>\n<p><em><strong>At Higher Levels.</strong></em> When you cast this spell using a spell slot of 4th level or higher, the damage increases by 1d6 for each slot level above 3rd.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "255",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 100,
          "units": "ft",
          "type": "line",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "8d6[lightning]",
              "lightning"
            ]
          ],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "dex",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 3,
        "school": "evo",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "level",
          "formula": "1d6"
        }
      },
      "name": "Lightning Bolt",
      "flags": {
        "ddbimporter": {
          "id": 138405,
          "definitionId": 2167,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Lightning Bolt",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 255,
              "sourceType": 1
            }
          ],
          "tags": [
            "Damage"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/magic/lightning/bolt-forked-large-blue.webp",
      "folder": "rkqMMY58A8Xdl9Mg",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274674966,
        "modifiedTime": 1721274674966,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "Bj8aSQq5iVttEZjx",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.Bj8aSQq5iVttEZjx"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You tap into the nightmares of a creature you can see within range and create an illusory manifestation of its deepest fears, visible only to that creature. The target must make a &amp;Reference[wis]{Wisdom} saving throw. On a failed save, the target becomes &amp;Reference[frightened]{frightened} for the duration. At the end of each of the target's turns before the spell ends, the target must succeed on a &amp;Reference[wis]{Wisdom} saving throw or take 4d10 &amp;Reference[psychic]{psychic} damage. On a successful save, the spell ends.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 5th level or higher, the damage increases by 1d10 for each slot level above 4th.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "265",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 1,
          "units": "",
          "type": "creature",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 120,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "wis",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 4,
        "school": "ill",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "level",
          "formula": "1d10"
        }
      },
      "name": "Phantasmal Killer",
      "flags": {
        "ddbimporter": {
          "id": 138547,
          "definitionId": 2202,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Phantasmal Killer",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 265,
              "sourceType": 1
            }
          ],
          "tags": [
            "Damage",
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [
        {
          "icon": "icons/magic/control/fear-fright-monster-grin-purple-blue.webp",
          "changes": [
            {
              "key": "macro.CE",
              "mode": 0,
              "value": "Frightened",
              "priority": 20
            },
            {
              "key": "flags.midi-qol.OverTime",
              "mode": 5,
              "value": "label=Phantasmal Killer (End of Turn),turn=end,saveAbility=wis,saveDC=@attributes.spelldc,saveMagic=true,damageRoll=(@item.level)d10,damageType=psychic,savingThrow=true,damageBeforeSave=false,killAnim=true",
              "priority": 20
            }
          ],
          "duration": {
            "seconds": null,
            "startTime": null,
            "rounds": 10,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": null,
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName"
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Phantasmal Killer",
          "statuses": [],
          "_id": "tQQw9c0vTwpmGvX8",
          "description": "",
          "origin": null,
          "_key": "!actors.items.effects!kGGL3el9Ha0MdeHk.ZPhdRe1Nj0zkd6YR.tQQw9c0vTwpmGvX8"
        }
      ],
      "img": "icons/magic/control/fear-fright-monster-grin-purple-blue.webp",
      "folder": "CckA9KDh0fOPelFO",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274675657,
        "modifiedTime": 1721274675657,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "ZPhdRe1Nj0zkd6YR",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.ZPhdRe1Nj0zkd6YR"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>This spell transforms a creature that you can see within range into a new form. An unwilling creature must make a &amp;Reference[wis]{Wisdom} saving throw to avoid the effect. The spell has no effect on a shapechanger or a creature with 0 hit points.</p>\n<p>The transformation lasts for the duration, or until the target drops to 0 hit points or dies. The new form can be any &amp;Reference[beast]{beast} whose challenge rating is equal to or less than the target's (or the target's level, if it doesn't have a challenge rating). The target's game statistics, including mental ability scores, are replaced by the statistics of the chosen &amp;Reference[beast]{beast}. It retains its alignment and personality.</p>\n<p>The target assumes the hit points of its new form. When it reverts to its normal form, the creature returns to the number of hit points it had before it transformed. If it reverts as a result of dropping to 0 hit points, any excess damage carries over to its normal form. As long as the excess damage doesn't reduce the creature's normal form to 0 hit points, it isn't knocked &amp;Reference[unconscious]{unconscious}.</p>\n<p>The creature is limited in the actions it can perform by the &amp;Reference[nat]{nature} of its new form, and it can't speak, cast spells, or take any other action that requires hands or speech.</p>\n<p>The target's gear melds into the new form. The creature can't activate, use, wield, or otherwise benefit from any of its equipment.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "266",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "hour"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 1,
          "units": "",
          "type": "creature",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 60,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "wis",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 4,
        "school": "trs",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Polymorph",
      "flags": {
        "ddbimporter": {
          "id": 138572,
          "definitionId": 2209,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Polymorph",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 266,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control",
            "Shapechanging"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true,
          "autoFailFriendly": true
        }
      },
      "effects": [],
      "img": "icons/creatures/abilities/dragon-breath-purple.webp",
      "folder": "Muf6CObMiNg37DS4",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274674215,
        "modifiedTime": 1721274674215,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "tn4u7nDPmhjJhV3c",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.tn4u7nDPmhjJhV3c"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You mentally contact a demigod, the spirit of a long- dead sage, or some other mysterious entity from another plane. Contacting this extraplanar &amp;Reference[int]{intelligence} can strain or even break your mind. When you cast this spell, make a [[/save int 15 format=long]]. On a failure, you take 6d6 &amp;Reference[psychic]{psychic} damage and are insane until you finish a long rest. While insane, you can't take actions, can't understand what other creatures say, can't read, and speak only in gibberish. A greater restoration spell cast on you ends this effect.</p>\n<p>On a successful save, you can ask the entity up to five questions. You must ask your questions before the spell ends. The GM answers each question with one word, such as \"yes,\" \"no,\" \"maybe,\" \"never,\" \"irrelevant,\" or \"unclear\" (if the entity doesn't know the answer to the question). If a one-word answer would be misleading, the GM might instead offer a short phrase as an answer.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "226",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "minute",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "self",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 5,
        "school": "div",
        "properties": [
          "vocal",
          "ritual"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Contact Other Plane",
      "flags": {
        "ddbimporter": {
          "id": 136289,
          "definitionId": 2045,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Contact Other Plane",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 226,
              "sourceType": 1
            }
          ],
          "tags": [
            "Communication",
            "Foreknowledge"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/magic/light/beam-rays-magenta.webp",
      "folder": "Sve3VzpVw1SFqYSn",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274675335,
        "modifiedTime": 1721274675335,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "CcEN93egSoBiFtzY",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.CcEN93egSoBiFtzY"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You can see and hear a particular creature you choose that is on the same plane of existence as you. The target must make a &amp;Reference[wis]{Wisdom} saving throw, which is modified by how well you know the target and the sort of physical connection you have to it. If a target knows you're casting this spell, it can fail the saving throw voluntarily if it wants to be observed.</p>\n<table style=\"height:114px\">\n<thead>\n<tr>\n<th>\n<p>Knowledge</p>\n</th>\n<th>Save Modifier</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Secondhand (you have heard of the target)</td>\n<td>+5</td>\n</tr>\n<tr>\n<td>Firsthand (you have met the target)</td>\n<td>0</td>\n</tr>\n<tr>\n<td>Familiar (you know the target well)</td>\n<td>-5</td>\n</tr>\n</tbody>\n</table>\n<p> </p>\n<table>\n<thead>\n<tr>\n<th>Connection</th>\n<th>Save Modifier</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Likeness or picture</td>\n<td>-2</td>\n</tr>\n<tr>\n<td>Possession or garment</td>\n<td>-4</td>\n</tr>\n<tr>\n<td>Body part, lock of hair, bit of nail, or the like</td>\n<td>-10</td>\n</tr>\n</tbody>\n</table>\n<p> </p>\n<p>On a successful save, the target isn't affected, and you can't use this spell against it again for 24 hours.</p>\n<p>On a failed save, the spell creates an &amp;Reference[invisible]{invisible} sensor within 10 feet of the target. You can see and hear through the sensor as if you were there. The sensor moves with the target, remaining within 10 feet of it for the duration. A creature that can see &amp;Reference[invisible]{invisible} objects sees the sensor as a luminous orb about the size of your fist.</p>\n<p>Instead of targeting a creature, you can choose a location you have seen before as the target of this spell. When you do, the sensor appears at that location and doesn't move.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "273",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "minute",
          "cost": 10,
          "condition": ""
        },
        "duration": {
          "value": "10",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "self",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "wis",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 5,
        "school": "div",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Scrying",
      "flags": {
        "ddbimporter": {
          "id": 138669,
          "definitionId": 2239,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Scrying",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 273,
              "sourceType": 1
            }
          ],
          "tags": [
            "Detection"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/commodities/biological/eye-blue-gold.webp",
      "folder": "Sve3VzpVw1SFqYSn",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274673745,
        "modifiedTime": 1721274673745,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "HqFPHNcIEd3Q8siW",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.HqFPHNcIEd3Q8siW"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>For the spell's duration, your eyes become an inky void imbued with dread power. One creature of your choice within 60 feet of you that you can see must succeed on a &amp;Reference[wis]{Wisdom} saving throw or be affected by one of the following effects of your choice for the duration. On each of your turns until the spell ends, you can use your action to target another creature but can't target a creature again if it has succeeded on a saving throw against this casting of <strong>eyebite</strong>.</p>\n<p><strong>Asleep.</strong> The target falls &amp;Reference[unconscious]{unconscious}. It wakes up if it takes any damage or if another creature uses its action to shake the sleeper awake.</p>\n<p><strong>Panicked.</strong> The target is &amp;Reference[frightened]{frightened} of you. On each of its turns, the &amp;Reference[frightened]{frightened} creature must take the Dash action and move away from you by the safest and shortest available route, unless there is nowhere to move. If the target moves to a place at least 60 feet away from you where it can no longer see you, this effect ends.</p>\n<p><strong>Sickened.</strong> The target has disadvantage on attack rolls and ability checks. At the end of each of its turns, it can make another &amp;Reference[wis]{Wisdom} saving throw. If it succeeds, the effect ends.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "238",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 1,
          "units": "",
          "type": "self",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 6,
        "school": "nec",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Eyebite",
      "flags": {
        "ddbimporter": {
          "id": 136746,
          "definitionId": 2089,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Eyebite",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 238,
              "sourceType": 1
            }
          ],
          "tags": [
            "Debuff"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dae": {
          "macro": {
            "name": "Eyebite",
            "type": "script",
            "scope": "global",
            "command": "if (!game.modules.get(\"dfreds-convenient-effects\")?.active) {\n  ui.notifications.error(\"Please enable the CE module\");\n  return;\n}\n\nconst lastArg = args[args.length - 1];\n\nconst DAEItem = lastArg.efData.flags.dae.itemData;\n\n// console.warn(\"Details\", {\n//   args,\n//   lastArg,\n//   actor,\n//   token,\n//   DAEItem\n// })\n\nconst EFFECT_LOOKUP = {\n  \"asleep\": [\"Unconscious\"],\n  \"panicked\": [\"Frightened\"],\n  \"sickened\": [\"Poisoned\"],\n};\n\nasync function eyebite(type, dc, targetActor) {\n  const flavor = `${CONFIG.DND5E.abilities[\"wis\"].label} DC${dc} ${DAEItem?.name || \"\"}`;\n  const saveRoll = await targetActor.rollAbilitySave(\"wis\", { flavor, fastForward: true });\n  if (dc > saveRoll.total) {\n    ChatMessage.create({ content: `${targetActor.name} failed the save with a ${saveRoll.total}` });\n    const conditions = EFFECT_LOOKUP[type];\n    conditions.forEach((condition) => {\n      game.dfreds.effectInterface.addEffect({ effectName: condition, uuid: targetActor.uuid, origin: lastArg.origin });\n    })\n    DAE.setFlag(targetActor, \"eyebiteSpell\", { conditions, dc, origin: lastArg.origin });\n  } else {\n    ChatMessage.create({ content: `${targetActor.name} passed the save with a ${saveRoll.total}` });\n  }\n}\n\nasync function eyebiteDialog(userId, dc, targetActor) {\n  const type = await DDBImporter.DialogHelper.AskUserButtonDialog(userId, {\n    buttons: [\n      { label: \"Asleep\", value: \"asleep\" },\n      { label: \"Panicked\", value: \"panicked\" },\n      { label: \"Sickened\", value: \"sickened\" },\n    ],\n    title: DAEItem.name ?? \"Eyebite\",\n    content: `<p>Choose effect for ${DAEItem.name} target</p>`,\n  },\n  'column');\n\n  if (!type) return;\n\n  await eyebite(type, dc, targetActor);\n}\n\nasync function getTarget(userId, ignoreInitial = false) {\n  if (game.users.get(userId).targets.size === 1 && !ignoreInitial) {\n    return game.users.get(userId).targets.toObject()[0];\n  } else {\n    const result = await DDBImporter.DialogHelper.AskUserButtonDialog(userId, {\n      buttons: [\n        { label: \"I have targeted\", value: true },\n        { label: \"Cancel\", value: false },\n      ],\n      title: DAEItem.name ?? \"Eyebite\",\n      content: `<p>Choose a single target for ${DAEItem.name}</p>`,\n    },\n    'column');\n    if (result && game.users.get(userId).targets.size === 1) {\n      return game.users.get(userId).targets.toObject()[0];\n    } else if (result && getDamageImmunities.targets.size !== 0) {\n      return getTarget(userId, ignoreInitial);\n    } else {\n      return undefined;\n    }\n  }\n}\n\nif (args[0] === \"on\") {\n  const saveData = foundry.utils.deepClone(DAEItem.system.save);\n  if (saveData.scaling === \"spell\") {\n    const rollData = actor.getRollData();\n    saveData.dc = rollData.attributes.spelldc;\n  }\n\n  const target = await getTarget(game.userId, false);\n\n  if (!target) return;\n\n  await eyebiteDialog(game.userId, saveData.dc, target.actor);\n  ChatMessage.create({ content: `${target.name} is blessed with Eyebite` });\n\n  const options = {\n    userId: game.userId,\n  };\n\n  DAE.setFlag(actor, \"eyebiteSpell\", options);\n} else if (args[0] === \"each\") {\n  const flag = DAE.getFlag(actor, \"eyebiteSpell\");\n  const userId = flag.userId ?? game.userId;\n\n  const again = await DDBImporter.DialogHelper.AskUserButtonDialog(userId, {\n    buttons: [\n      { label: \"Yes\", value: true },\n      { label: \"No\", value: false },\n    ],\n    title: DAEItem.name ?? \"Eyebite\",\n    content: `<p>Would you like to use your action to use ${DAEItem.name} again?</p>`,\n  },\n  'column');\n\n  if (!again) return;\n  const target = await getTarget(userId, true);\n  if (!target) return;\n\n  await eyebiteDialog(userId, flag.dc, target.actor);\n}\n\nelse if (args[0] === \"off\") {\n  game.canvas.tokens.placeables.forEach((t) => {\n    const effects = DDBImporter.EffectHelper.getActorEffects(t.actor)\n      .filter((e => e.origin === lastArg.origin));\n    if (effects.length > 0) {\n      const flag = DAE.getFlag(t.actor, \"eyebiteSpell\") ?? { conditions: [] };\n      flag.conditions.forEach((condition) => {\n        if (DDBImporter.EffectHelper.isConditionEffectAppliedAndActive(condition, t.actor)) {\n          game.dfreds.effectInterface.removeEffect({ effectName: condition, uuid: t.actor.uuid });\n        }\n      });\n      DAE.unsetFlag(actor, \"eyebiteSpell\");\n    }\n  });\n  await DAE.unsetFlag(actor, \"eyebiteSpell\");\n}\n"
          }
        }
      },
      "effects": [
        {
          "icon": "icons/magic/perception/eye-ringed-glow-angry-large-red.webp",
          "changes": [
            {
              "key": "macro.itemMacro",
              "value": "",
              "mode": 0,
              "priority": 20
            }
          ],
          "duration": {
            "seconds": null,
            "startTime": null,
            "rounds": 10,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": null,
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName",
              "macroRepeat": "startEveryTurn"
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Eyebite",
          "statuses": [],
          "_id": "BZfmkGMR7V2cjSOh",
          "description": "",
          "origin": null,
          "_key": "!actors.items.effects!kGGL3el9Ha0MdeHk.tJ8TvioSE8zTobB0.BZfmkGMR7V2cjSOh"
        }
      ],
      "img": "icons/magic/perception/eye-ringed-glow-angry-large-red.webp",
      "folder": "ocH9XKjvhtI6hJk6",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274674829,
        "modifiedTime": 1721274674829,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "tJ8TvioSE8zTobB0",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.tJ8TvioSE8zTobB0"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>For the duration, you sense the presence of magic within 30 feet of you. If you sense magic in this way, you can use your action to see a faint aura around any visible creature or object in the area that bears magic, and you learn its school of magic, if any.</p>\n<p>The spell can penetrate most barriers, but it is blocked by 1 foot of stone, 1 inch of common metal, a thin sheet of lead, or 3 feet of wood or dirt.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "231",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "10",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "self",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "wis",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "div",
        "properties": [
          "vocal",
          "somatic",
          "ritual",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Detect Magic",
      "flags": {
        "ddbimporter": {
          "id": 136561,
          "definitionId": 2065,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Detect Magic",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 231,
              "sourceType": 1
            }
          ],
          "tags": [
            "Detection"
          ],
          "version": "5.1.27",
          "effectsApplied": true,
          "chrisEffectsApplied": true,
          "chrisPreEffectName": "Detect Magic"
        },
        "spell-class-filter-for-5e": {
          "parentClass": "cleric"
        },
        "autoanimations": {
          "id": "97966bd7-4fae-4a69-806f-757d646fc12b",
          "label": "Detect Magic",
          "macro": {
            "enable": false,
            "playWhen": "0"
          },
          "menu": "aura",
          "primary": {
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "detectmagic",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": true,
              "alpha": false,
              "alphaMax": 0.5,
              "alphaMin": -0.5,
              "alphaDuration": 1000,
              "breath": false,
              "breathMax": 1.05,
              "breathMin": 0.95,
              "breathDuration": 1000,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isRadius": true,
              "isWait": false,
              "opacity": 1,
              "playbackRate": 1,
              "playOn": "source",
              "size": 3,
              "tint": false,
              "tintColor": "#FFFFFF",
              "tintSaturate": 0,
              "unbindAlpha": false,
              "unbindVisibility": false,
              "zIndex": 1
            }
          },
          "secondary": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": true,
              "isWait": false,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "size": 1.5,
              "zIndex": 1
            }
          },
          "soundOnly": {
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            }
          },
          "source": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "isWait": true,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "size": 1,
              "zIndex": 1
            }
          },
          "target": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "opacity": 1,
              "persistent": false,
              "repeat": 1,
              "repeatDelay": 250,
              "size": 1,
              "unbindAlpha": false,
              "unbindVisibility": false,
              "zIndex": 1
            }
          },
          "isEnabled": true,
          "isCustomized": true,
          "fromAmmo": false,
          "version": 5
        },
        "custom-character-sheet-sections": {
          "sectionName": ""
        },
        "rest-recovery": {
          "data": {
            "recovery": {
              "enabled": false
            }
          }
        },
        "enhanced-terrain-layer": {
          "multiple": null,
          "elevation": null,
          "depth": null,
          "environment": ""
        },
        "midi-qol": {
          "effectActivation": false,
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "nodam": false,
          "fulldam": false,
          "halfdam": false,
          "autoFailFriendly": false,
          "rollOther": false,
          "critOther": false,
          "offHandWeapon": false,
          "magicdam": false,
          "magiceffect": false,
          "concentration": false,
          "toggleEffect": false,
          "ignoreTotalCover": false,
          "autoSaveFriendly": false,
          "confirmTargets": "default"
        },
        "exportSource": {
          "world": "homebrew",
          "system": "dnd5e",
          "coreVersion": "10.291",
          "systemVersion": "2.1.4"
        },
        "chris-premades": {
          "info": {
            "name": "Detect Magic",
            "version": "0.7.01"
          }
        },
        "dnd5e": {}
      },
      "effects": [
        {
          "icon": "icons/magic/light/explosion-star-blue.webp",
          "changes": [],
          "transfer": false,
          "_id": "0x9GhZIyfp9Ji1GB",
          "disabled": false,
          "duration": {
            "startTime": null,
            "seconds": null,
            "combat": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null
          },
          "origin": null,
          "tint": null,
          "flags": {},
          "name": "Detect Magic",
          "description": "",
          "statuses": [],
          "_key": "!actors.items.effects!kGGL3el9Ha0MdeHk.5fmD2gIBWOM9LpD1.0x9GhZIyfp9Ji1GB"
        }
      ],
      "img": "icons/magic/symbols/rune-sigil-black-pink.webp",
      "folder": "Sve3VzpVw1SFqYSn",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274673350,
        "modifiedTime": 1721274673350,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "5fmD2gIBWOM9LpD1",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.5fmD2gIBWOM9LpD1"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You create three glowing darts of magical &amp;Reference[force]{force}. Each dart hits a creature of your choice that you can see within range. A dart deals 1d4 + 1 &amp;Reference[force]{force} damage to its target. The darts all strike simultaneously, and you can direct them to hit one creature or several.</p>\n<p><em><strong>At Higher Levels.</strong></em> When you cast this spell using a spell slot of 2nd level or higher, the spell creates one more dart for each slot level above 1st.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "257",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "creature",
          "prompt": true
        },
        "range": {
          "value": 120,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "[1d4 + 1 - force] 3 Darts",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "evo",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Magic Missile",
      "flags": {
        "ddbimporter": {
          "id": 138444,
          "definitionId": 2176,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Magic Missile",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 257,
              "sourceType": 1
            }
          ],
          "tags": [
            "Damage"
          ],
          "version": "5.1.27",
          "effectsApplied": true,
          "chrisEffectsApplied": true,
          "chrisPreEffectName": "Magic Missile"
        },
        "custom-character-sheet-sections": {
          "sectionName": ""
        },
        "rest-recovery": {
          "data": {
            "recovery": {
              "enabled": false
            }
          }
        },
        "midi-qol": {
          "effectActivation": false,
          "onUseMacroName": "[postActiveEffects]function.chrisPremades.macros.magicMissile",
          "onUseMacroParts": {
            "items": {
              "0": {
                "macroName": "function.chrisPremades.macros.magicMissile",
                "option": "postActiveEffects"
              }
            }
          },
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "nodam": false,
          "fulldam": false,
          "halfdam": false,
          "autoFailFriendly": false,
          "autoSaveFriendly": false,
          "rollOther": false,
          "critOther": false,
          "offHandWeapon": false,
          "magicdam": false,
          "magiceffect": false,
          "concentration": false,
          "toggleEffect": false,
          "ignoreTotalCover": false,
          "confirmTargets": "default"
        },
        "autoanimations": {
          "id": "1853f6fd-6a5e-4a80-badd-35379747b8e8",
          "label": "Magic Missile",
          "levels3d": {
            "type": "explosion",
            "data": {
              "color01": "#FFFFFF",
              "color02": "#FFFFFF",
              "spritePath": "modules/levels-3d-preview/assets/particles/dust.png"
            },
            "sound": {
              "enable": false
            },
            "secondary": {
              "enable": false,
              "data": {
                "color01": "#FFFFFF",
                "color02": "#FFFFFF",
                "spritePath": "modules/levels-3d-preview/assets/particles/dust.png"
              }
            }
          },
          "macro": {
            "enable": false
          },
          "meleeSwitch": {
            "video": {
              "dbSection": "range",
              "menuType": "weapon",
              "animation": "arrow",
              "variant": "regular",
              "color": "regular"
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "detect": "automatic",
              "range": 2,
              "returning": false,
              "switchType": "on"
            }
          },
          "menu": "melee",
          "primary": {
            "video": {
              "dbSection": "melee",
              "menuType": "weapon",
              "animation": "club",
              "variant": "01",
              "color": "white",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "isWait": false,
              "opacity": 1,
              "playbackRate": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "secondary": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": true,
              "isWait": false,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1.5,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "soundOnly": {
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            }
          },
          "source": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "isWait": true,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "target": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "opacity": 1,
              "persistent": false,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "unbindAlpha": false,
              "unbindVisibility": false,
              "zIndex": 1
            }
          },
          "isEnabled": false,
          "isCustomized": false,
          "fromAmmo": false,
          "version": 5
        },
        "chris-premades": {
          "info": {
            "name": "Magic Missile",
            "version": "0.7.45",
            "hasAnimation": true
          }
        },
        "dnd5e": {}
      },
      "effects": [],
      "img": "icons/magic/fire/projectile-meteor-salvo-light-blue.webp",
      "folder": "rkqMMY58A8Xdl9Mg",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274674986,
        "modifiedTime": 1721274674986,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "rY3vZqBG391gGMDX",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.rY3vZqBG391gGMDX"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<p><b>Special Notes: self only.</b></p>\n\n<div class=\"ddb\">\n<p>You and up to eight willing creatures who link hands in a circle are transported to a different plane of existence. You can specify a target destination in general terms, such as the City of Brass on the &amp;Reference[elemental]{Elemental} Plane of &amp;Reference[fire]{Fire} or the palace of Dispater on the second level of the Nine Hells, and you appear in or near that destination. If you are trying to reach the City of Brass, for example, you might arrive in its Street of Steel, before its Gate of Ashes, or looking at the city from across the Sea of &amp;Reference[fire]{Fire}, at the GM's discretion.</p>\n<p>Alternatively, if you know the sigil sequence of a teleportation circle on another plane of existence, this spell can take you to that circle. If the teleportation circle is too small to hold all the creatures you transported, they appear in the closest unoccupied spaces next to the circle.</p>\n<p>You can use this spell to banish an unwilling creature to another plane. Choose a creature within your reach and make a melee spell attack against it. On a hit, the creature must make a &amp;Reference[cha]{Charisma} saving throw. If the creature fails this save, it is transported to a random location on the plane of existence you specify. A creature so transported must find its own way back to your current plane of existence.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "266",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "self",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "touch"
        },
        "uses": {
          "value": 2,
          "max": "2",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "cha",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 7,
        "school": "con",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Plane Shift (self only)",
      "flags": {
        "ddbimporter": {
          "id": 138554,
          "definitionId": 2206,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Plane Shift",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 266,
              "sourceType": 1
            }
          ],
          "tags": [
            "Teleportation",
            "Banishment"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/skills/targeting/target-glowing-yellow.webp",
      "folder": "e8UeRF8mmfaJRx4e",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274673649,
        "modifiedTime": 1721274673649,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "YCPz71v7qhwgtzt8",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.YCPz71v7qhwgtzt8"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>A black beam of enervating energy springs from your finger toward a creature within range. Make a ranged spell attack against the target. On a hit, the target deals only half damage with weapon attacks that use &amp;Reference[str]{Strength} until the spell ends.</p>\n<p>At the end of each of the target's turns, it can make a &amp;Reference[con]{Constitution} saving throw against the spell. On a success, the spell ends.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "271",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 1,
          "width": null,
          "units": "",
          "type": "creature",
          "prompt": true
        },
        "range": {
          "value": 60,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 2,
          "max": "2",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "rsak",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 2,
        "school": "nec",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Ray of Enfeeblement",
      "flags": {
        "ddbimporter": {
          "id": 138631,
          "definitionId": 2225,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Ray of Enfeeblement",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 271,
              "sourceType": 1
            }
          ],
          "tags": [
            "Debuff"
          ],
          "version": "5.1.27",
          "effectsApplied": true,
          "chrisEffectsApplied": true,
          "chrisPreEffectName": "Ray of Enfeeblement"
        },
        "midi-qol": {
          "forceCEOff": true,
          "fumbleThreshold": null,
          "effectActivation": false,
          "removeAttackDamageButtons": "default"
        },
        "custom-character-sheet-sections": {
          "sectionName": ""
        },
        "rest-recovery": {
          "data": {
            "recovery": {
              "enabled": false
            }
          }
        },
        "midiProperties": {
          "nodam": false,
          "fulldam": false,
          "halfdam": false,
          "autoFailFriendly": false,
          "autoSaveFriendly": false,
          "rollOther": false,
          "critOther": false,
          "offHandWeapon": false,
          "magicdam": false,
          "magiceffect": false,
          "concentration": false,
          "toggleEffect": false,
          "ignoreTotalCover": false,
          "confirmTargets": "default"
        },
        "exportSource": {
          "world": "development-testing",
          "system": "dnd5e",
          "coreVersion": "10.291",
          "systemVersion": "2.1.5"
        },
        "chris-premades": {
          "info": {
            "name": "Ray of Enfeeblement",
            "version": "0.7.01"
          }
        },
        "dnd5e": {}
      },
      "effects": [
        {
          "icon": "icons/magic/light/beam-rays-teal.webp",
          "changes": [
            {
              "key": "flags.midi-qol.OverTime",
              "mode": 0,
              "value": "label=Ray of Enfeeblement (End of Turn),turn=end,saveDC=$chris.itemDC,saveAbility=con,savingThrow=true,saveMagic=true",
              "priority": 20
            },
            {
              "key": "flags.midi-qol.onUseMacroName",
              "mode": 0,
              "value": "function.chrisPremades.macros.rayOfEnfeeblement,postDamageRoll",
              "priority": 20
            }
          ],
          "duration": {
            "startTime": null,
            "seconds": null,
            "combat": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null
          },
          "tint": null,
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName",
              "selfTarget": false,
              "selfTargetAlways": false,
              "durationExpression": "",
              "macroRepeat": "none",
              "specialDuration": []
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "dfreds-convenient-effects": {
              "description": ""
            },
            "core": {
              "statusId": ""
            },
            "ActiveAuras": {
              "isAura": false,
              "aura": "None",
              "radius": "undefined",
              "alignment": "",
              "type": "",
              "ignoreSelf": false,
              "height": false,
              "hidden": false,
              "displayTemp": false,
              "hostile": false,
              "onlyOnce": false
            }
          },
          "_id": "EWWLgSlMqGPUFMBb",
          "origin": null,
          "name": "Ray of Enfeeblement",
          "description": "",
          "statuses": [],
          "_key": "!actors.items.effects!kGGL3el9Ha0MdeHk.9J2lFwYO4ZpGJoXH.EWWLgSlMqGPUFMBb"
        }
      ],
      "img": "icons/magic/light/beam-rays-teal.webp",
      "folder": "ocH9XKjvhtI6hJk6",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274675367,
        "modifiedTime": 1721274675367,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "9J2lFwYO4ZpGJoXH",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.9J2lFwYO4ZpGJoXH"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>This spell sends creatures into a magical slumber. Roll 5d8; the total is how many hit points of creatures this spell can affect. Creatures within 20 feet of a point you choose within range are affected in ascending order of their current hit points (ignoring &amp;Reference[unconscious]{unconscious} creatures).</p>\n<p>Starting with the creature that has the lowest current hit points, each creature affected by this spell falls &amp;Reference[unconscious]{unconscious} until the spell ends, the sleeper takes damage, or someone uses an action to shake or slap the sleeper awake. Subtract each creature’s hit points from the total before moving on to the creature with the next lowest hit points. A creature’s hit points must be equal to or less than the remaining total for that creature to be affected.</p>\n<p>&amp;Reference[undead]{Undead} and creatures immune to being &amp;Reference[charmed]{charmed} aren’t affected by this spell.</p>\n<p><em><strong>At Higher Levels.</strong></em> When you cast this spell using a spell slot of 2nd level or higher, roll an additional 2d8 for each slot level above 1st.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "276",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 20,
          "units": "ft",
          "type": "sphere",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 90,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 2,
          "max": "2",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "5d8",
              "midi-none"
            ]
          ],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "enc",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "level",
          "formula": "2d8"
        }
      },
      "name": "Sleep",
      "flags": {
        "ddbimporter": {
          "id": 138729,
          "definitionId": 2254,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Sleep",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 276,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "onUseMacroName": "[postActiveEffects]ItemMacro",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dae": {
          "macro": {
            "name": "Sleep",
            "type": "script",
            "scope": "global",
            "command": "// based on @ccjmk and @crymic macro for sleep. Gets targets and ignores those who are immune to sleep.\n// uses convinient effects\n// Midi-qol \"On Use\"\n\nconst sleepHp = await args[0].damageTotal;\nconst condition = \"Unconscious\";\nconsole.log(`Sleep Spell => Available HP Pool [${sleepHp}] points`);\nconst targets = await args[0].targets\n  .filter((i) => i.actor.system.attributes.hp.value != 0 && !i.actor.effects.find((x) => (x.name ?? x.label) === condition))\n  .sort((a, b) => (canvas.tokens.get(a.id).actor.system.attributes.hp.value < canvas.tokens.get(b.id).actor.system.attributes.hp.value ? -1 : 1));\nlet remainingSleepHp = sleepHp;\nlet sleepTarget = [];\n\nfor (let target of targets) {\n  const findTarget = await canvas.tokens.get(target.id);\n  const targetRaceOrType = DDBImporter?.EffectHelper.getRaceOrType(findTarget.actor);\n  const immuneType = [\"undead\", \"construct\", \"elf\", \"half-elf\"].some((race) => targetRaceOrType.includes(race));\n  const immuneCI = findTarget.actor.system.traits.ci.custom.includes(\"Sleep\");\n  const sleeping = findTarget.actor.effects.find((i) => (i.name ?? i.label) === condition);\n  const targetHpValue = findTarget.actor.system.attributes.hp.value;\n  const targetImg = target?.texture?.src;\n  if ((immuneType) || (immuneCI) || (sleeping)) {\n    console.log(`Sleep Results => Target: ${findTarget.name} | HP: ${targetHpValue} | Status: Resists`);\n    sleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>Resists</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n  } else if (remainingSleepHp >= targetHpValue) {\n    remainingSleepHp -= targetHpValue;\n    console.log(`Sleep Results => Target: ${findTarget.name} |  HP: ${targetHpValue} | HP Pool: ${remainingSleepHp} | Status: Slept`);\n    sleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>Slept</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n    const gameRound = game.combat ? game.combat.round : 0;\n    const effectData = {\n      label: \"Sleep Spell\",\n      name: \"Sleep Spell\",\n      icon: \"icons/svg/sleep.svg\",\n      origin: args[0].uuid,\n      disabled: false,\n      duration: { rounds: 10, seconds: 60, startRound: gameRound, startTime: game.time.worldTime },\n      flags: { dae: { specialDuration: [\"isDamaged\"] } },\n      changes: [\n        DDBImporter.EffectHelper.generateCEStatusEffectChange(game.i18n.localize(\"Unconscious\"), 20, true),\n      ]\n    };\n\n    await MidiQOL.socket().executeAsGM(\"createEffects\", { actorUuid: findTarget.actor.uuid, effects: [effectData] });\n  } else {\n    console.log(`Sleep Results => Target: ${target.name} | HP: ${targetHpValue} | HP Pool: ${remainingSleepHp - targetHpValue} | Status: Missed`);\n    sleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>misses</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n  }\n}\nawait DDBImporter?.EffectHelper.wait(500);\nconst sleptResults = `<div><div class=\"midi-qol-nobox\">${sleepTarget.join('')}</div></div>`;\nconst chatMessage = game.messages.get(args[0].itemCardId);\nlet content = foundry.utils.duplicate(chatMessage.content);\nconst searchString = /<div class=\"midi-qol-hits-display\">[\\s\\S]*<div class=\"end-midi-qol-hits-display\">/g;\nconst replaceString = `<div class=\"midi-qol-hits-display\"><div class=\"end-midi-qol-hits-display\">${sleptResults}`;\ncontent = await content.replace(searchString, replaceString);\nawait chatMessage.update({ content: content });\n"
          }
        }
      },
      "effects": [],
      "img": "icons/magic/control/sleep-bubble-purple.webp",
      "folder": "qUHjLOJ6GhNjE4HD",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274675100,
        "modifiedTime": 1721274675100,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "uEiXI7nGbJMp9sV7",
      "_key": "!actors.items!kGGL3el9Ha0MdeHk.uEiXI7nGbJMp9sV7"
    }
  ],
  "effects": [],
  "folder": "TVj4a0pwIbSaOPkd",
  "sort": 0,
  "ownership": {
    "default": 0,
    "6yhz13iFYYklKtgA": 3
  },
  "flags": {
    "dnd5e": {},
    "monsterMunch": {
      "url": "https://www.dndbeyond.com/monsters/301755-night-hag-coven-variant",
      "img": "https://www.dndbeyond.com/avatars/5738/106/636898360874368597.png",
      "tokenImg": "https://www.dndbeyond.com/avatars/5738/104/636898360871399634.jpeg",
      "isStockImg": false,
      "spellList": {
        "class": [
          "identify",
          "ray of sickness",
          "hold person",
          "locate object",
          "bestow curse",
          "counterspell",
          "lightning bolt",
          "phantasmal killer",
          "polymorph",
          "contact other plane",
          "scrying",
          "eyebite"
        ],
        "pact": [],
        "atwill": [],
        "innate": [
          {
            "name": "detect magic",
            "type": "atwill",
            "value": null,
            "innate": true
          },
          {
            "name": "magic missile",
            "type": "atwill",
            "value": null,
            "innate": true
          },
          {
            "name": "plane shift",
            "type": "day",
            "value": "2",
            "innate": true
          },
          {
            "name": "ray of enfeeblement",
            "type": "day",
            "value": "2",
            "innate": true
          },
          {
            "name": "sleep",
            "type": "day",
            "value": "2",
            "innate": true
          },
          {
            "name": "on the target prevents this contact, as does a magic circle. As long as the contact persists, the target has dreadful visions. If these visions last for at least 1 hour, the target gains no benefit from its rest, and its hit point maximum is reduced by 5",
            "type": "Day",
            "value": "1",
            "innate": true
          }
        ],
        "edgeCases": [
          {
            "name": "plane shift",
            "type": "innate",
            "edge": "self only"
          },
          {
            "name": "on the target prevents this contact, as does a magic circle. As long as the contact persists, the target has dreadful visions. If these visions last for at least 1 hour, the target gains no benefit from its rest, and its hit point maximum is reduced by 5",
            "type": "innate",
            "edge": "1d10"
          }
        ],
        "material": false,
        "innateMatch": true
      }
    },
    "ddbimporter": {
      "id": 301755,
      "entityTypeId": 779871897,
      "creatureGroupId": null,
      "creatureFlags": [],
      "version": "5.1.27",
      "isLegacy": false,
      "flatAC": false
    }
  },
  "_stats": {
    "systemId": "dnd5e",
    "systemVersion": "3.1.2",
    "coreVersion": "11.315",
    "createdTime": 1721275305923,
    "modifiedTime": 1721275305923,
    "lastModifiedBy": "6yhz13iFYYklKtgA"
  },
  "_key": "!actors!kGGL3el9Ha0MdeHk"
}
