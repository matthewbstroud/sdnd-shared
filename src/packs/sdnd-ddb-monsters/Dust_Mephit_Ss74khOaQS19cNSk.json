{
  "name": "Dust Mephit",
  "type": "npc",
  "_id": "Ss74khOaQS19cNSk",
  "img": "systems/dnd5e/tokens/elemental/DustMephit.webp",
  "system": {
    "currency": {
      "pp": 0,
      "gp": 0,
      "ep": 0,
      "sp": 0,
      "cp": 0
    },
    "abilities": {
      "str": {
        "value": 5,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        },
        "check": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        },
        "save": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        }
      },
      "dex": {
        "value": 14,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        },
        "check": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        },
        "save": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        }
      },
      "con": {
        "value": 10,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        },
        "check": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        },
        "save": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        }
      },
      "int": {
        "value": 9,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        },
        "check": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        },
        "save": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        }
      },
      "wis": {
        "value": 11,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        },
        "check": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        },
        "save": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        }
      },
      "cha": {
        "value": 10,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        },
        "check": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        },
        "save": {
          "roll": {
            "min": null,
            "max": null,
            "mode": 0
          }
        }
      }
    },
    "bonuses": {
      "mwak": {
        "attack": "",
        "damage": ""
      },
      "rwak": {
        "attack": "",
        "damage": ""
      },
      "msak": {
        "attack": "",
        "damage": ""
      },
      "rsak": {
        "attack": "",
        "damage": ""
      },
      "abilities": {
        "check": "",
        "save": "",
        "skill": ""
      },
      "spell": {
        "dc": ""
      }
    },
    "skills": {
      "acr": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ani": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "arc": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ath": {
        "ability": "str",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "dec": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "his": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ins": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "itm": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "inv": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "med": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "nat": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "prc": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "prf": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "per": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "rel": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "slt": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ste": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "sur": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      }
    },
    "tools": {},
    "spells": {
      "spell1": {
        "value": 0,
        "override": null
      },
      "spell2": {
        "value": 0,
        "override": null
      },
      "spell3": {
        "value": 0,
        "override": null
      },
      "spell4": {
        "value": 0,
        "override": null
      },
      "spell5": {
        "value": 0,
        "override": null
      },
      "spell6": {
        "value": 0,
        "override": null
      },
      "spell7": {
        "value": 0,
        "override": null
      },
      "spell8": {
        "value": 0,
        "override": null
      },
      "spell9": {
        "value": 0,
        "override": null
      },
      "pact": {
        "value": 0,
        "override": null
      }
    },
    "attributes": {
      "init": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonus": ""
      },
      "movement": {
        "burrow": null,
        "climb": null,
        "fly": "30",
        "swim": null,
        "walk": "30",
        "units": "ft",
        "hover": false,
        "ignoredDifficultTerrain": []
      },
      "attunement": {
        "max": 3
      },
      "senses": {
        "darkvision": 60,
        "blindsight": 0,
        "tremorsense": 0,
        "truesight": 0,
        "units": "ft",
        "special": ""
      },
      "spellcasting": "cha",
      "exhaustion": 0,
      "concentration": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonuses": {
          "save": ""
        },
        "limit": 1
      },
      "ac": {
        "flat": 12,
        "calc": "natural",
        "formula": ""
      },
      "hp": {
        "value": 17,
        "max": 17,
        "temp": 0,
        "tempmax": 0,
        "formula": "5d6"
      },
      "death": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "success": 0,
        "failure": 0,
        "bonuses": {
          "save": ""
        }
      },
      "spell": {
        "level": 0
      },
      "loyalty": {
        "value": null
      },
      "hd": {
        "spent": 0
      },
      "price": {
        "value": null,
        "denomination": "gp"
      }
    },
    "details": {
      "biography": {
        "value": "",
        "public": ""
      },
      "alignment": "Neutral Evil",
      "race": null,
      "type": {
        "value": "elemental",
        "subtype": ""
      },
      "environment": "Desert",
      "cr": 0.5,
      "spellLevel": 0,
      "source": {
        "book": "Basic Rules",
        "page": "330",
        "custom": "",
        "license": ""
      },
      "habitat": {
        "custom": "Desert",
        "value": []
      },
      "ideal": "",
      "bond": "",
      "flaw": "",
      "treasure": {
        "value": []
      }
    },
    "resources": {
      "legact": {
        "value": 0,
        "max": 0,
        "spent": 0
      },
      "legres": {
        "value": 0,
        "max": 0,
        "spent": 0
      },
      "lair": {
        "value": false,
        "initiative": null,
        "inside": false
      }
    },
    "traits": {
      "size": "sm",
      "di": {
        "value": [
          "poison"
        ],
        "bypasses": [],
        "custom": ""
      },
      "dr": {
        "value": [],
        "bypasses": [],
        "custom": ""
      },
      "dv": {
        "value": [
          "fire"
        ],
        "bypasses": [],
        "custom": ""
      },
      "dm": {
        "amount": {},
        "bypasses": []
      },
      "ci": {
        "value": [
          "poisoned"
        ],
        "custom": ""
      },
      "languages": {
        "value": [
          "auran",
          "terran"
        ],
        "custom": "",
        "communication": {}
      },
      "important": false
    },
    "source": {
      "book": "Basic Rules",
      "page": "330",
      "custom": "",
      "license": "",
      "revision": 1,
      "rules": "2014"
    }
  },
  "prototypeToken": {
    "name": "Dust Mephit",
    "displayName": 20,
    "actorLink": false,
    "appendNumber": false,
    "prependAdjective": false,
    "texture": {
      "src": "ddb-images/other/npc-token-Dust-Mephit.jpeg",
      "scaleX": 1,
      "scaleY": 1,
      "offsetX": 0,
      "offsetY": 0,
      "rotation": 0,
      "anchorX": 0.5,
      "anchorY": 0.5,
      "fit": "contain",
      "tint": "#ffffff",
      "alphaThreshold": 0.75
    },
    "width": 1,
    "height": 1,
    "lockRotation": false,
    "rotation": 0,
    "alpha": 1,
    "disposition": -1,
    "displayBars": 20,
    "bar1": {
      "attribute": "attributes.hp"
    },
    "bar2": {
      "attribute": null
    },
    "light": {
      "alpha": 0.5,
      "angle": 360,
      "bright": 0,
      "coloration": 1,
      "dim": 0,
      "attenuation": 0.5,
      "luminosity": 0.5,
      "saturation": 0,
      "contrast": 0,
      "shadows": 0,
      "animation": {
        "type": null,
        "speed": 5,
        "intensity": 5,
        "reverse": false
      },
      "darkness": {
        "min": 0,
        "max": 1
      },
      "negative": false,
      "priority": 0,
      "color": null
    },
    "sight": {
      "enabled": false,
      "range": 60,
      "angle": 360,
      "visionMode": "darkvision",
      "color": null,
      "attenuation": 0,
      "brightness": 0,
      "saturation": -1,
      "contrast": 0
    },
    "detectionModes": [],
    "flags": {
      "monks-tokenbar": {
        "include": "default"
      },
      "tagger": {
        "tags": [
          "dndbeyond",
          "ddb-importer",
          "elemental"
        ]
      }
    },
    "randomImg": false,
    "occludable": {
      "radius": 0
    },
    "ring": {
      "enabled": false,
      "colors": {
        "ring": null,
        "background": null
      },
      "effects": 1,
      "subject": {
        "scale": 1,
        "texture": null
      }
    },
    "turnMarker": {
      "mode": 1,
      "animation": null,
      "src": null,
      "disposition": false
    },
    "movementAction": null
  },
  "items": [
    {
      "_id": "GxIT9AmtRfkJTp2s",
      "name": "Claws",
      "type": "weapon",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong></strong> Melee Weapon Attack:</em> +4 to hit, reach 5 ft., one creature. <em>Hit:</em> [[/damage 1d4 + @mod type=slashing average=true]] damage.</p>\n</section>\nThe [[lookup @name]] attacks with its [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Basic Rules",
          "page": "330",
          "custom": "",
          "license": "",
          "revision": 1,
          "rules": "2024"
        },
        "identified": true,
        "unidentified": {
          "description": ""
        },
        "container": null,
        "quantity": 1,
        "weight": {
          "value": 0,
          "units": "lb"
        },
        "price": {
          "value": 0,
          "denomination": "gp"
        },
        "rarity": "",
        "attunement": "",
        "equipped": true,
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": 5,
          "long": null,
          "units": "ft",
          "reach": null
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": [],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": "dex",
        "actionType": "mwak",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "1d4[slashing] + @mod",
              "slashing"
            ]
          ],
          "versatile": {
            "number": null,
            "denomination": null,
            "bonus": "",
            "types": [],
            "custom": {
              "enabled": false,
              "formula": ""
            },
            "scaling": {
              "mode": "",
              "number": null,
              "formula": ""
            }
          },
          "base": {
            "number": null,
            "denomination": null,
            "bonus": "",
            "types": [
              "slashing"
            ],
            "custom": {
              "enabled": true,
              "formula": "1d4[slashing] + @mod"
            },
            "scaling": {
              "mode": "",
              "number": null,
              "formula": ""
            }
          }
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "armor": {
          "value": null
        },
        "hp": {
          "value": null,
          "max": null,
          "dt": null,
          "conditions": ""
        },
        "type": {
          "value": "natural",
          "baseItem": ""
        },
        "magicalBonus": null,
        "properties": [],
        "proficient": 1,
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "attack",
            "activation": {
              "type": "action",
              "value": 1,
              "condition": "",
              "override": false
            },
            "consumption": {
              "targets": [],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "concentration": false,
              "value": "",
              "units": "inst",
              "special": "",
              "override": false
            },
            "effects": [],
            "range": {
              "value": "5",
              "units": "ft",
              "special": "",
              "override": false
            },
            "target": {
              "template": {
                "count": "",
                "contiguous": false,
                "type": "",
                "size": "",
                "width": "",
                "height": "",
                "units": "ft"
              },
              "affects": {
                "count": "",
                "type": "",
                "choice": false,
                "special": ""
              },
              "prompt": true,
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "attack": {
              "ability": "dex",
              "bonus": "",
              "critical": {
                "threshold": null
              },
              "flat": false,
              "type": {
                "value": "melee",
                "classification": "weapon"
              }
            },
            "damage": {
              "critical": {
                "bonus": ""
              },
              "includeBase": true,
              "parts": []
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false,
              "idm": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false,
              "autoConsume": false,
              "forceConsumeDialog": "default",
              "forceRollDialog": "default",
              "forceDamageDialog": "default",
              "otherActivityAsParentType": true,
              "removeChatButtons": "default",
              "magicEffect": false,
              "magicDamage": false,
              "noConcentrationCheck": false,
              "autoCEEffects": "default"
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "",
            "attackMode": "oneHanded",
            "ammunition": "",
            "otherActivityUuid": "",
            "flags": {},
            "visibility": {
              "level": {},
              "requireAttunement": false,
              "requireIdentification": false,
              "requireMagic": false
            },
            "otherActivityAsParentType": true,
            "attackRollPerTarget": "default",
            "fumbleThreshold": 1
          }
        },
        "identifier": "",
        "attuned": false,
        "ammunition": {},
        "crew": {
          "value": []
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<strong>Claws.</strong>",
          "fullName": "Claws.",
          "actionCopy": false,
          "type": "action",
          "actionInfo": {
            "damage": {
              "parts": [
                [
                  "1d4[slashing] + @mod",
                  "slashing"
                ]
              ],
              "versatile": ""
            },
            "baseAbility": "dex",
            "toHit": 4,
            "proficient": true,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        },
        "dnd5e": {}
      },
      "img": "icons/commodities/claws/claws-white.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "13.351",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null,
        "exportSource": null
      },
      "_key": "!actors.items!Ss74khOaQS19cNSk.GxIT9AmtRfkJTp2s"
    },
    {
      "_id": "6ARyAb3AmPnSnfKV",
      "name": "Blinding Breath",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p> The mephit exhales a 15- foot &amp;Reference[cone]{cone} of blinding dust. Each creature in that area must succeed on a [[/save dex 10 format=long]] or be &amp;Reference[blinded]{blinded} for 1 minute. A creature can repeat the saving throw at the end of each of its turns, ending the effect on itself on a success.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]] and a save is required.\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Basic Rules",
          "page": "330",
          "custom": "",
          "license": "",
          "revision": 1,
          "rules": "2024"
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "units": "round",
          "value": "10"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "1",
          "per": null,
          "recovery": [
            {
              "period": "recharge",
              "formula": "6",
              "type": "recoverAll"
            }
          ],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "charges",
          "target": "6ARyAb3AmPnSnfKV",
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": 10,
          "ability": "dex",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": 6,
          "charged": true
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "save",
            "activation": {
              "type": "action",
              "value": 1,
              "condition": "",
              "override": false
            },
            "consumption": {
              "targets": [
                {
                  "type": "itemUses",
                  "target": "6ARyAb3AmPnSnfKV",
                  "value": "1",
                  "scaling": {
                    "mode": "",
                    "formula": ""
                  }
                }
              ],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "concentration": false,
              "value": "10",
              "units": "round",
              "special": "",
              "override": false
            },
            "effects": [
              {
                "_id": "KwdxWgjsqDMfeaRl",
                "onSave": false,
                "level": {}
              }
            ],
            "range": {
              "units": "self",
              "special": "",
              "override": false
            },
            "target": {
              "template": {
                "count": "",
                "contiguous": false,
                "type": "",
                "size": "",
                "width": "",
                "height": "",
                "units": "ft"
              },
              "affects": {
                "count": "",
                "type": "",
                "choice": false,
                "special": ""
              },
              "prompt": true,
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "damage": {
              "onSave": "half",
              "parts": [],
              "critical": {
                "allow": false
              }
            },
            "save": {
              "ability": [
                "dex"
              ],
              "dc": {
                "calculation": "",
                "formula": "10"
              }
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false,
              "idm": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false,
              "autoConsume": false,
              "forceConsumeDialog": "default",
              "forceRollDialog": "default",
              "forceDamageDialog": "default",
              "otherActivityAsParentType": true,
              "removeChatButtons": "default",
              "magicEffect": false,
              "magicDamage": false,
              "noConcentrationCheck": false,
              "autoCEEffects": "default"
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "",
            "flags": {},
            "visibility": {
              "level": {},
              "requireAttunement": false,
              "requireIdentification": false,
              "requireMagic": false
            },
            "otherActivityAsParentType": true,
            "friendlySave": "default"
          }
        },
        "identifier": "",
        "advancement": [],
        "enchant": {},
        "prerequisites": {
          "level": null,
          "repeatable": false,
          "items": []
        }
      },
      "effects": [
        {
          "changes": [
            {
              "key": "macro.CE",
              "mode": 0,
              "value": "Blinded",
              "priority": 20
            },
            {
              "key": "flags.midi-qol.OverTime",
              "mode": 5,
              "value": "turn=end,label=Blinding Breath (End of Turn),saveRemove=true,saveDC=10,saveAbility=dex,killAnim=true",
              "priority": 20
            }
          ],
          "duration": {
            "seconds": 60,
            "startTime": null,
            "rounds": 10,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": "#ffffff",
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName"
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Blinding Breath",
          "statuses": [],
          "_id": "KwdxWgjsqDMfeaRl",
          "description": "",
          "origin": null,
          "_stats": {
            "coreVersion": "13.351",
            "systemId": null,
            "systemVersion": null,
            "createdTime": null,
            "modifiedTime": null,
            "lastModifiedBy": null,
            "compendiumSource": null,
            "duplicateSource": null,
            "exportSource": null
          },
          "img": "icons/magic/air/fog-gas-smoke-dense-brown.webp",
          "type": "base",
          "system": {},
          "sort": 0,
          "_key": "!actors.items.effects!Ss74khOaQS19cNSk.6ARyAb3AmPnSnfKV.KwdxWgjsqDMfeaRl"
        }
      ],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {},
          "effectsApplied": true
        },
        "monsterMunch": {
          "titleHTML": "<strong>Blinding Breath (Recharge 6).</strong>",
          "fullName": "Blinding Breath (Recharge 6).",
          "actionCopy": false,
          "type": "action",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "fulldam": true
        },
        "dnd5e": {}
      },
      "img": "icons/magic/air/fog-gas-smoke-dense-brown.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "13.351",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null,
        "exportSource": null
      },
      "_key": "!actors.items!Ss74khOaQS19cNSk.6ARyAb3AmPnSnfKV"
    },
    {
      "_id": "E8FC4c06hkzk1g5i",
      "name": "Death Burst",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong>Death Burst.</strong></em> When the mephit dies, it explodes in a burst of dust. Each creature within 5 feet of it must then succeed on a [[/save con 10 format=long]] or be &amp;Reference[blinded]{blinded} for 1 minute. A &amp;Reference[blinded]{blinded} creature can repeat the saving throw on each of its turns, ending the effect on itself on a success.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]] and a save is required.\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Basic Rules",
          "page": "330",
          "custom": "",
          "license": "",
          "revision": 1,
          "rules": "2024"
        },
        "activation": {
          "type": "special",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": [],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": 10,
          "ability": "con",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "save",
            "activation": {
              "type": "special",
              "value": 1,
              "condition": "",
              "override": false
            },
            "consumption": {
              "targets": [],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "concentration": false,
              "value": "",
              "units": "inst",
              "special": "",
              "override": false
            },
            "effects": [
              {
                "_id": "jakyJFtq6zQfX9yT",
                "onSave": false,
                "level": {}
              }
            ],
            "range": {
              "units": "self",
              "special": "",
              "override": false
            },
            "target": {
              "template": {
                "count": "",
                "contiguous": false,
                "type": "",
                "size": "",
                "width": "",
                "height": "",
                "units": "ft"
              },
              "affects": {
                "count": "",
                "type": "",
                "choice": false,
                "special": ""
              },
              "prompt": true,
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "damage": {
              "onSave": "half",
              "parts": [],
              "critical": {
                "allow": false
              }
            },
            "save": {
              "ability": [
                "con"
              ],
              "dc": {
                "calculation": "",
                "formula": "10"
              }
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false,
              "idm": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false,
              "autoConsume": false,
              "forceConsumeDialog": "default",
              "forceRollDialog": "default",
              "forceDamageDialog": "default",
              "otherActivityAsParentType": true,
              "removeChatButtons": "default",
              "magicEffect": false,
              "magicDamage": false,
              "noConcentrationCheck": false,
              "autoCEEffects": "default"
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "",
            "flags": {},
            "visibility": {
              "level": {},
              "requireAttunement": false,
              "requireIdentification": false,
              "requireMagic": false
            },
            "otherActivityAsParentType": true,
            "friendlySave": "default"
          }
        },
        "identifier": "",
        "advancement": [],
        "enchant": {},
        "prerequisites": {
          "level": null,
          "repeatable": false,
          "items": []
        }
      },
      "effects": [
        {
          "changes": [
            {
              "key": "macro.CE",
              "mode": 0,
              "value": "Blinded",
              "priority": 20
            }
          ],
          "duration": {
            "seconds": 60,
            "startTime": null,
            "rounds": 10,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": "#ffffff",
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName"
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Death Burst",
          "statuses": [],
          "_id": "jakyJFtq6zQfX9yT",
          "description": "",
          "origin": null,
          "_stats": {
            "coreVersion": "13.351",
            "systemId": null,
            "systemVersion": null,
            "createdTime": null,
            "modifiedTime": null,
            "lastModifiedBy": null,
            "compendiumSource": null,
            "duplicateSource": null,
            "exportSource": null
          },
          "img": "icons/magic/sonic/explosion-shock-wave-teal.webp",
          "type": "base",
          "system": {},
          "sort": 0,
          "_key": "!actors.items.effects!Ss74khOaQS19cNSk.E8FC4c06hkzk1g5i.jakyJFtq6zQfX9yT"
        }
      ],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {},
          "effectsApplied": true
        },
        "monsterMunch": {
          "titleHTML": "<em><strong>Death Burst.</strong></em>",
          "fullName": "Death Burst.",
          "actionCopy": false,
          "type": "special",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "fulldam": true
        },
        "dnd5e": {}
      },
      "img": "icons/magic/sonic/explosion-shock-wave-teal.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "13.351",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null,
        "exportSource": null
      },
      "_key": "!actors.items!Ss74khOaQS19cNSk.E8FC4c06hkzk1g5i"
    },
    {
      "_id": "VTN6m4tvH6ktiRMS",
      "name": "Innate Spellcasting",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong>Innate Spellcasting (1/Day).</strong></em> The mephit can innately cast sleep, requiring no &amp;Reference[material]{material} components. Its innate spellcasting ability is &amp;Reference[cha]{Charisma}.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Basic Rules",
          "page": "330",
          "custom": "",
          "license": "",
          "revision": 1,
          "rules": "2024"
        },
        "activation": {
          "type": "special",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": [
            {
              "period": "day",
              "type": "recoverAll"
            }
          ],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "utility",
            "activation": {
              "type": "special",
              "value": 1,
              "condition": "",
              "override": false
            },
            "consumption": {
              "targets": [
                {
                  "type": "itemUses",
                  "target": "",
                  "value": "1",
                  "scaling": {
                    "mode": "",
                    "formula": ""
                  }
                }
              ],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "concentration": false,
              "value": "",
              "units": "inst",
              "special": "",
              "override": false
            },
            "effects": [],
            "range": {
              "units": "self",
              "special": "",
              "override": false
            },
            "target": {
              "template": {
                "count": "",
                "contiguous": false,
                "type": "",
                "size": "",
                "width": "",
                "height": "",
                "units": "ft"
              },
              "affects": {
                "count": "",
                "type": "",
                "choice": false,
                "special": ""
              },
              "prompt": true,
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "roll": {
              "formula": "",
              "name": "",
              "prompt": false,
              "visible": false
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false,
              "idm": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false,
              "autoConsume": false,
              "forceConsumeDialog": "default",
              "forceRollDialog": "default",
              "forceDamageDialog": "default",
              "otherActivityAsParentType": true,
              "removeChatButtons": "default",
              "magicEffect": false,
              "magicDamage": false,
              "noConcentrationCheck": false,
              "autoCEEffects": "default"
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "otherActivityId": "none",
            "flags": {},
            "visibility": {
              "level": {},
              "requireAttunement": false,
              "requireIdentification": false,
              "requireMagic": false
            },
            "otherActivityAsParentType": true
          }
        },
        "identifier": "",
        "advancement": [],
        "enchant": {},
        "prerequisites": {
          "level": null,
          "repeatable": false,
          "items": []
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<em><strong>Innate Spellcasting (1/Day).</strong></em>",
          "fullName": "Innate Spellcasting (1/Day).",
          "actionCopy": false,
          "type": "special",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        },
        "dnd5e": {}
      },
      "img": "icons/magic/unholy/orb-smoking-green.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "13.351",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null,
        "exportSource": null
      },
      "_key": "!actors.items!Ss74khOaQS19cNSk.VTN6m4tvH6ktiRMS"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>This spell sends creatures into a magical slumber. Roll 5d8; the total is how many hit points of creatures this spell can affect. Creatures within 20 feet of a point you choose within range are affected in ascending order of their current hit points (ignoring &amp;Reference[unconscious]{unconscious} creatures).</p>\n<p>Starting with the creature that has the lowest current hit points, each creature affected by this spell falls &amp;Reference[unconscious]{unconscious} until the spell ends, the sleeper takes damage, or someone uses an action to shake or slap the sleeper awake. Subtract each creatures hit points from the total before moving on to the creature with the next lowest hit points. A creatures hit points must be equal to or less than the remaining total for that creature to be affected.</p>\n<p>&amp;Reference[undead]{Undead} and creatures immune to being &amp;Reference[charmed]{charmed} arent affected by this spell.</p>\n<p><em><strong>At Higher Levels.</strong></em> When you cast this spell using a spell slot of 2nd level or higher, roll an additional 2d8 for each slot level above 1st.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Players Handbook",
          "page": "276",
          "license": "",
          "custom": "",
          "revision": 1,
          "rules": "2014"
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": "",
          "value": 1
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 20,
          "units": "ft",
          "type": "sphere",
          "width": null,
          "prompt": true,
          "affects": {
            "choice": false
          },
          "template": {
            "units": "ft",
            "type": "sphere",
            "size": "20",
            "contiguous": false
          }
        },
        "range": {
          "value": "90",
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": [
            {
              "period": "day",
              "type": "recoverAll"
            }
          ],
          "prompt": true,
          "spent": 0
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "5d8",
              "midi-none"
            ]
          ],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "enc",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "level",
          "formula": "2d8"
        },
        "activities": {
          "dnd5eactivity000": {
            "_id": "dnd5eactivity000",
            "type": "damage",
            "activation": {
              "type": "action",
              "value": null,
              "override": false
            },
            "consumption": {
              "targets": [
                {
                  "type": "itemUses",
                  "target": "",
                  "value": "1",
                  "scaling": {
                    "mode": "",
                    "formula": ""
                  }
                }
              ],
              "scaling": {
                "allowed": false,
                "max": ""
              },
              "spellSlot": true
            },
            "description": {
              "chatFlavor": ""
            },
            "duration": {
              "units": "inst",
              "concentration": false,
              "override": false
            },
            "effects": [],
            "range": {
              "override": false,
              "units": "self"
            },
            "target": {
              "prompt": true,
              "template": {
                "contiguous": false,
                "units": "ft"
              },
              "affects": {
                "choice": false
              },
              "override": false
            },
            "uses": {
              "spent": 0,
              "max": "",
              "recovery": []
            },
            "damage": {
              "critical": {
                "allow": false,
                "bonus": ""
              },
              "parts": [
                {
                  "number": 5,
                  "denomination": 8,
                  "bonus": "",
                  "types": [
                    "midi-none"
                  ],
                  "custom": {
                    "enabled": false,
                    "formula": ""
                  },
                  "scaling": {
                    "mode": "whole",
                    "number": 2,
                    "formula": ""
                  }
                }
              ]
            },
            "sort": 0,
            "useConditionText": "",
            "useConditionReason": "",
            "effectConditionText": "",
            "macroData": {
              "name": "",
              "command": ""
            },
            "ignoreTraits": {
              "idi": false,
              "idr": false,
              "idv": false,
              "ida": false,
              "idm": false
            },
            "midiProperties": {
              "ignoreTraits": [],
              "triggeredActivityId": "none",
              "triggeredActivityConditionText": "",
              "triggeredActivityTargets": "targets",
              "triggeredActivityRollAs": "self",
              "forceDialog": false,
              "confirmTargets": "default",
              "autoTargetType": "any",
              "autoTargetAction": "default",
              "automationOnly": false,
              "otherActivityCompatible": true,
              "identifier": "",
              "displayActivityName": false,
              "rollMode": "default",
              "chooseEffects": false,
              "toggleEffect": false,
              "ignoreFullCover": false,
              "autoConsume": false,
              "forceConsumeDialog": "default",
              "forceRollDialog": "default",
              "forceDamageDialog": "default",
              "otherActivityAsParentType": true,
              "removeChatButtons": "default",
              "magicEffect": false,
              "magicDamage": false,
              "noConcentrationCheck": false,
              "autoCEEffects": "default"
            },
            "isOverTimeFlag": false,
            "overTimeProperties": {
              "saveRemoves": true,
              "preRemoveConditionText": "",
              "postRemoveConditionText": ""
            },
            "flags": {},
            "visibility": {
              "level": {},
              "requireAttunement": false,
              "requireIdentification": false,
              "requireMagic": false
            }
          }
        },
        "identifier": "sleep",
        "method": "innate",
        "prepared": 1
      },
      "name": "Sleep",
      "flags": {
        "ddbimporter": {
          "id": 138729,
          "definitionId": 2254,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Sleep",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 276,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "onUseMacroName": "[postActiveEffects]ItemMacro",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dae": {
          "macro": {
            "name": "Sleep",
            "type": "script",
            "scope": "global",
            "command": "// based on @ccjmk and @crymic macro for sleep. Gets targets and ignores those who are immune to sleep.\n// uses convinient effects\n// Midi-qol \"On Use\"\n\nconst sleepHp = await args[0].damageTotal;\nconst condition = \"Unconscious\";\nconsole.log(`Sleep Spell => Available HP Pool [${sleepHp}] points`);\nconst targets = await args[0].targets\n  .filter((i) => i.actor.system.attributes.hp.value != 0 && !i.actor.effects.find((x) => (x.name ?? x.label) === condition))\n  .sort((a, b) => (canvas.tokens.get(a.id).actor.system.attributes.hp.value < canvas.tokens.get(b.id).actor.system.attributes.hp.value ? -1 : 1));\nlet remainingSleepHp = sleepHp;\nlet sleepTarget = [];\n\nfor (let target of targets) {\n  const findTarget = await canvas.tokens.get(target.id);\n  const targetRaceOrType = DDBImporter?.EffectHelper.getRaceOrType(findTarget.actor);\n  const immuneType = [\"undead\", \"construct\", \"elf\", \"half-elf\"].some((race) => targetRaceOrType.includes(race));\n  const immuneCI = findTarget.actor.system.traits.ci.custom.includes(\"Sleep\");\n  const sleeping = findTarget.actor.effects.find((i) => (i.name ?? i.label) === condition);\n  const targetHpValue = findTarget.actor.system.attributes.hp.value;\n  const targetImg = target?.texture?.src;\n  if ((immuneType) || (immuneCI) || (sleeping)) {\n    console.log(`Sleep Results => Target: ${findTarget.name} | HP: ${targetHpValue} | Status: Resists`);\n    sleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>Resists</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n  } else if (remainingSleepHp >= targetHpValue) {\n    remainingSleepHp -= targetHpValue;\n    console.log(`Sleep Results => Target: ${findTarget.name} |  HP: ${targetHpValue} | HP Pool: ${remainingSleepHp} | Status: Slept`);\n    sleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>Slept</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n    const gameRound = game.combat ? game.combat.round : 0;\n    const effectData = {\n      label: \"Sleep Spell\",\n      name: \"Sleep Spell\",\n      icon: \"icons/svg/sleep.svg\",\n      origin: args[0].uuid,\n      disabled: false,\n      duration: { rounds: 10, seconds: 60, startRound: gameRound, startTime: game.time.worldTime },\n      flags: { dae: { specialDuration: [\"isDamaged\"] } },\n      changes: [\n        DDBImporter.EffectHelper.generateCEStatusEffectChange(game.i18n.localize(\"Unconscious\"), 20, true),\n      ]\n    };\n\n    await MidiQOL.socket().executeAsGM(\"createEffects\", { actorUuid: findTarget.actor.uuid, effects: [effectData] });\n  } else {\n    console.log(`Sleep Results => Target: ${target.name} | HP: ${targetHpValue} | HP Pool: ${remainingSleepHp - targetHpValue} | Status: Missed`);\n    sleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>misses</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n  }\n}\nawait DDBImporter?.EffectHelper.wait(500);\nconst sleptResults = `<div><div class=\"midi-qol-nobox\">${sleepTarget.join('')}</div></div>`;\nconst chatMessage = game.messages.get(args[0].itemCardId);\nlet content = foundry.utils.duplicate(chatMessage.content);\nconst searchString = /<div class=\"midi-qol-hits-display\">[\\s\\S]*<div class=\"end-midi-qol-hits-display\">/g;\nconst replaceString = `<div class=\"midi-qol-hits-display\"><div class=\"end-midi-qol-hits-display\">${sleptResults}`;\ncontent = await content.replace(searchString, replaceString);\nawait chatMessage.update({ content: content });\n"
          }
        },
        "dnd5e": {}
      },
      "effects": [],
      "img": "icons/magic/control/sleep-bubble-purple.webp",
      "folder": "qUHjLOJ6GhNjE4HD",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "13.351",
        "createdTime": 1721274675100,
        "modifiedTime": 1721274675100,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null,
        "exportSource": null
      },
      "sort": 0,
      "_id": "3cdYb01xSHUOOY7Z",
      "_key": "!actors.items!Ss74khOaQS19cNSk.3cdYb01xSHUOOY7Z"
    }
  ],
  "effects": [],
  "folder": "Vj0uUj9eVqsDZL9F",
  "sort": 0,
  "ownership": {
    "default": 0,
    "6yhz13iFYYklKtgA": 3
  },
  "flags": {
    "dnd5e": {},
    "monsterMunch": {
      "url": "https://www.dndbeyond.com/monsters/16851-dust-mephit",
      "img": "https://www.dndbeyond.com/avatars/34175/932/638190241939840071.png",
      "tokenImg": "https://www.dndbeyond.com/avatars/0/312/636252772213502587.jpeg",
      "isStockImg": false,
      "spellList": {
        "class": [],
        "pact": [],
        "atwill": [],
        "innate": [
          {
            "name": "sleep",
            "type": "Day",
            "value": "1",
            "innate": true
          }
        ],
        "edgeCases": [],
        "material": false,
        "innateMatch": true
      },
      "overTime": [
        "Blinding Breath",
        "Death Burst"
      ],
      "imgSet": true
    },
    "ddbimporter": {
      "id": 16851,
      "entityTypeId": 779871897,
      "creatureGroupId": null,
      "creatureFlags": [],
      "version": "5.1.27",
      "isLegacy": false,
      "flatAC": false
    }
  },
  "_stats": {
    "systemId": "dnd5e",
    "systemVersion": "5.2.4",
    "coreVersion": "13.351",
    "createdTime": 1721275259839,
    "modifiedTime": 1767277612182,
    "lastModifiedBy": "wXvVWKeDyStv3bwy",
    "compendiumSource": null,
    "duplicateSource": null,
    "exportSource": null
  },
  "_key": "!actors!Ss74khOaQS19cNSk"
}
