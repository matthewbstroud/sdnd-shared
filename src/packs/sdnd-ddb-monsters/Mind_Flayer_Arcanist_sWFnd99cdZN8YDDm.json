{
  "name": "Mind Flayer Arcanist",
  "type": "npc",
  "_id": "sWFnd99cdZN8YDDm",
  "img": "https://www.dndbeyond.com/avatars/68/53/636460903219259112.png",
  "system": {
    "currency": {
      "pp": 0,
      "gp": 0,
      "ep": 0,
      "sp": 0,
      "cp": 0
    },
    "abilities": {
      "str": {
        "value": 11,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "dex": {
        "value": 12,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "con": {
        "value": 12,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "int": {
        "value": 19,
        "proficient": 1,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "wis": {
        "value": 17,
        "proficient": 1,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "cha": {
        "value": 17,
        "proficient": 1,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      }
    },
    "bonuses": {
      "mwak": {
        "attack": "",
        "damage": ""
      },
      "rwak": {
        "attack": "",
        "damage": ""
      },
      "msak": {
        "attack": "",
        "damage": ""
      },
      "rsak": {
        "attack": "",
        "damage": ""
      },
      "abilities": {
        "check": "",
        "save": "",
        "skill": ""
      },
      "spell": {
        "dc": ""
      }
    },
    "skills": {
      "acr": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ani": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "arc": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ath": {
        "ability": "str",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "dec": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "his": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ins": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "itm": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "inv": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "med": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "nat": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "prc": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "prf": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "per": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "rel": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "slt": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ste": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "sur": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      }
    },
    "tools": {},
    "spells": {
      "spell1": {
        "value": 4,
        "override": 4
      },
      "spell2": {
        "value": 3,
        "override": 3
      },
      "spell3": {
        "value": 3,
        "override": 3
      },
      "spell4": {
        "value": 3,
        "override": 3
      },
      "spell5": {
        "value": 2,
        "override": 2
      },
      "spell6": {
        "value": 0,
        "override": null
      },
      "spell7": {
        "value": 0,
        "override": null
      },
      "spell8": {
        "value": 0,
        "override": null
      },
      "spell9": {
        "value": 0,
        "override": null
      },
      "pact": {
        "value": 0,
        "override": null
      }
    },
    "attributes": {
      "init": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonus": ""
      },
      "movement": {
        "burrow": null,
        "climb": null,
        "fly": null,
        "swim": null,
        "walk": 30,
        "units": "ft",
        "hover": false
      },
      "attunement": {
        "max": 3
      },
      "senses": {
        "darkvision": 120,
        "blindsight": 0,
        "tremorsense": 0,
        "truesight": 0,
        "units": "ft",
        "special": ""
      },
      "spellcasting": "int",
      "exhaustion": 0,
      "concentration": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonuses": {
          "save": ""
        },
        "limit": 1
      },
      "ac": {
        "flat": null,
        "calc": "default",
        "formula": ""
      },
      "hp": {
        "value": 71,
        "max": 71,
        "temp": 0,
        "tempmax": 0,
        "formula": "13d8 + 13"
      },
      "death": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "success": 0,
        "failure": 0
      }
    },
    "details": {
      "biography": {
        "value": "<p>A few mind flayer;mind flayers supplement their psionic power with arcane spells. However, they are regarded as deviants by their illithid peers and usually shunned.</p>",
        "public": ""
      },
      "alignment": "Lawful Evil",
      "race": null,
      "type": {
        "value": "aberration",
        "subtype": ""
      },
      "environment": "Underdark",
      "cr": 8,
      "spellLevel": 10,
      "source": {
        "book": "Monster Manual",
        "page": "222",
        "custom": "",
        "license": ""
      }
    },
    "resources": {
      "legact": {
        "value": 0,
        "max": 0
      },
      "legres": {
        "value": 0,
        "max": 0
      },
      "lair": {
        "value": false,
        "initiative": null
      }
    },
    "traits": {
      "size": "med",
      "di": {
        "value": [],
        "bypasses": [],
        "custom": ""
      },
      "dr": {
        "value": [],
        "bypasses": [],
        "custom": ""
      },
      "dv": {
        "value": [],
        "bypasses": [],
        "custom": ""
      },
      "dm": {
        "amount": {},
        "bypasses": []
      },
      "ci": {
        "value": [],
        "custom": ""
      },
      "languages": {
        "value": [
          "deep",
          "undercommon"
        ],
        "custom": "Telepathy 120 ft."
      }
    }
  },
  "prototypeToken": {
    "name": "Mind Flayer Arcanist",
    "displayName": 20,
    "actorLink": false,
    "appendNumber": false,
    "prependAdjective": false,
    "texture": {
      "src": "ddb-images/other/npc-token-Mind-Flayer-Arcanist.jpeg",
      "scaleX": 1,
      "scaleY": 1,
      "offsetX": 0,
      "offsetY": 0,
      "rotation": 0,
      "anchorX": 0.5,
      "anchorY": 0.5,
      "fit": "contain",
      "tint": "#ffffff",
      "alphaThreshold": 0.75
    },
    "width": 1,
    "height": 1,
    "lockRotation": false,
    "rotation": 0,
    "alpha": 1,
    "disposition": -1,
    "displayBars": 20,
    "bar1": {
      "attribute": "attributes.hp"
    },
    "bar2": {
      "attribute": null
    },
    "light": {
      "alpha": 0.5,
      "angle": 360,
      "bright": 0,
      "coloration": 1,
      "dim": 0,
      "attenuation": 0.5,
      "luminosity": 0.5,
      "saturation": 0,
      "contrast": 0,
      "shadows": 0,
      "animation": {
        "type": null,
        "speed": 5,
        "intensity": 5,
        "reverse": false
      },
      "darkness": {
        "min": 0,
        "max": 1
      },
      "negative": false,
      "priority": 0,
      "color": null
    },
    "sight": {
      "enabled": false,
      "range": 120,
      "angle": 360,
      "visionMode": "darkvision",
      "color": null,
      "attenuation": 0,
      "brightness": 0,
      "saturation": -1,
      "contrast": 0
    },
    "detectionModes": [],
    "flags": {
      "monks-tokenbar": {
        "include": "default"
      },
      "tagger": {
        "tags": [
          "dndbeyond",
          "ddb-importer",
          "aberration"
        ]
      }
    },
    "randomImg": false,
    "hexagonalShape": 0,
    "occludable": {
      "radius": 0
    },
    "ring": {
      "enabled": false,
      "colors": {
        "ring": null,
        "background": null
      },
      "effects": 1,
      "subject": {
        "scale": 1,
        "texture": null
      }
    }
  },
  "items": [
    {
      "name": "Breastplate",
      "type": "equipment",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>This armor consists of a fitted metal chest piece worn with supple leather. Although it leaves the legs and arms relatively unprotected, this armor provides good protection for the wearer's vital organs while leaving the wearer relatively unencumbered.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "",
          "license": "",
          "custom": ""
        },
        "identified": true,
        "unidentified": {
          "description": ""
        },
        "container": null,
        "quantity": 1,
        "weight": 20,
        "price": {
          "value": 400,
          "denomination": "gp"
        },
        "rarity": "",
        "attunement": 0,
        "equipped": true,
        "activation": {
          "type": "",
          "cost": null,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": 0,
          "max": "",
          "per": null,
          "prompt": false,
          "recovery": ""
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "armor": {
          "value": 14,
          "magicalBonus": null,
          "dex": 2
        },
        "hp": {
          "value": null,
          "max": null,
          "dt": null,
          "conditions": ""
        },
        "type": {
          "value": "medium",
          "baseItem": "breastplate"
        },
        "properties": [],
        "speed": {
          "value": null,
          "conditions": ""
        },
        "strength": 0,
        "proficient": 1
      },
      "flags": {
        "ddbimporter": {
          "dndbeyond": {
            "type": "Medium Armor",
            "alternativeNames": [
              "Breastplate Armor"
            ],
            "filterType": "Armor",
            "isConsumable": false,
            "isContainer": false,
            "isCustomItem": false,
            "isHomebrew": false,
            "isMonkWeapon": false,
            "isPack": false,
            "levelInfusionGranted": null,
            "tags": [
              "Warding"
            ],
            "sources": [
              {
                "sourceId": 1,
                "pageNumber": null,
                "sourceType": 2
              },
              {
                "sourceId": 2,
                "pageNumber": null,
                "sourceType": 1
              }
            ]
          },
          "id": 0,
          "entityTypeId": 0,
          "definitionEntityTypeId": 701257905,
          "definitionId": 13,
          "originalName": "Breastplate",
          "version": "5.1.27",
          "pack": "sdnd-shared.sdnd-ddb-items",
          "originalItemName": "breastplate",
          "replaced": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "effects": [],
      "img": "icons/equipment/chest/breastplate-banded-steel-grey.webp",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721268425589,
        "modifiedTime": 1721268425589,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "C9TCZNWzTByOpKiS",
      "folder": null,
      "_key": "!actors.items!sWFnd99cdZN8YDDm.C9TCZNWzTByOpKiS"
    },
    {
      "_id": "RhDXI8AADyG2uSs2",
      "name": "Tentacles",
      "type": "weapon",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong></strong> Melee Weapon Attack:</em> +7 to hit, reach 5 ft., one creature. <em>Hit:</em> [[/damage 2d10 + @mod type=psychic average=true]] damage. If the target is Medium or smaller, it is &amp;Reference[grappled]{grappled} (escape DC 15) and must succeed on a [[/save int 15 format=long]] or be &amp;Reference[stunned]{stunned} until this grapple ends.</p>\n</section>\nThe [[lookup @name]] attacks with its [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "222",
          "custom": "",
          "license": ""
        },
        "identified": true,
        "unidentified": {
          "description": ""
        },
        "container": null,
        "quantity": 1,
        "weight": 0,
        "price": {
          "value": 0,
          "denomination": "gp"
        },
        "rarity": "",
        "attunement": 0,
        "equipped": true,
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "units": "round",
          "value": "10"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": 5,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": "int",
        "actionType": "mwak",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "2d10[psychic] + @mod",
              "psychic"
            ]
          ],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": 15,
          "ability": "int",
          "scaling": "flat"
        },
        "summons": null,
        "armor": {
          "value": null
        },
        "hp": {
          "value": null,
          "max": null,
          "dt": null,
          "conditions": ""
        },
        "type": {
          "value": "natural",
          "baseItem": ""
        },
        "magicalBonus": null,
        "properties": [],
        "proficient": 1
      },
      "effects": [
        {
          "changes": [
            {
              "key": "macro.CE",
              "mode": 0,
              "value": "Stunned",
              "priority": 20
            }
          ],
          "duration": {
            "seconds": 60,
            "startTime": null,
            "rounds": 10,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": "#ffffff",
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName"
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Tentacles",
          "statuses": [],
          "_id": "meKtl7CX1Uw00xFi",
          "description": "",
          "origin": null,
          "_stats": {
            "coreVersion": "12.331",
            "systemId": null,
            "systemVersion": null,
            "createdTime": null,
            "modifiedTime": null,
            "lastModifiedBy": null,
            "compendiumSource": null,
            "duplicateSource": null
          },
          "img": "icons/commodities/biological/tentacle-purple-white.webp",
          "type": "base",
          "system": {},
          "sort": 0,
          "_key": "!actors.items.effects!sWFnd99cdZN8YDDm.RhDXI8AADyG2uSs2.meKtl7CX1Uw00xFi"
        }
      ],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {},
          "effectsApplied": true
        },
        "monsterMunch": {
          "titleHTML": "<strong>Tentacles.</strong>",
          "fullName": "Tentacles.",
          "actionCopy": false,
          "type": "action",
          "actionInfo": {
            "damage": {
              "parts": [
                [
                  "2d10[psychic] + @mod",
                  "psychic"
                ]
              ],
              "versatile": ""
            },
            "baseAbility": "int",
            "toHit": 7,
            "proficient": true,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "fulldam": true
        }
      },
      "img": "icons/commodities/biological/tentacle-purple-white.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "12.331",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null
      },
      "_key": "!actors.items!sWFnd99cdZN8YDDm.RhDXI8AADyG2uSs2"
    },
    {
      "_id": "oHImQmxaQEnX0MHl",
      "name": "Extract Brain",
      "type": "weapon",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong></strong> Melee Weapon Attack:</em> +7 to hit, reach 5 ft., one &amp;Reference[incapacitated]{incapacitated} &amp;Reference[humanoid]{humanoid} &amp;Reference[grappled]{grappled} by the mind flayer arcanist. <em>Hit:</em> The target takes [[/damage 10d10 type=piercing average=true]] damage. If this damage reduces the target to 0 hit points, the mind flayer arcanist kills the target by extracting and devouring its brain.</p>\n</section>\nThe [[lookup @name]] attacks with its [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "222",
          "custom": "",
          "license": ""
        },
        "identified": true,
        "unidentified": {
          "description": ""
        },
        "container": null,
        "quantity": 1,
        "weight": 0,
        "price": {
          "value": 0,
          "denomination": "gp"
        },
        "rarity": "",
        "attunement": 0,
        "equipped": true,
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": 5,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": "int",
        "actionType": "mwak",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "10d10[piercing]",
              "piercing"
            ]
          ],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "armor": {
          "value": null
        },
        "hp": {
          "value": null,
          "max": null,
          "dt": null,
          "conditions": ""
        },
        "type": {
          "value": "simpleM",
          "baseItem": ""
        },
        "magicalBonus": null,
        "properties": [],
        "proficient": 1
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<strong>Extract Brain.</strong>",
          "fullName": "Extract Brain.",
          "actionCopy": false,
          "type": "action",
          "actionInfo": {
            "damage": {
              "parts": [
                [
                  "10d10[piercing]",
                  "piercing"
                ]
              ],
              "versatile": ""
            },
            "baseAbility": "int",
            "toHit": 7,
            "proficient": true,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/commodities/biological/organ-brain-pink-purple.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "12.331",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null
      },
      "_key": "!actors.items!sWFnd99cdZN8YDDm.oHImQmxaQEnX0MHl"
    },
    {
      "_id": "ukuQ91Zr6U6CklGQ",
      "name": "Mind Blast",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p> The mind flayer arcanist magically emits &amp;Reference[psychic]{psychic} energy in a 60-foot &amp;Reference[cone]{cone}. Each creature in that area must succeed on a [[/save int 15 format=long]] or take [[/damage 4d8 + 4 type=psychic average=true]] damage and be &amp;Reference[stunned]{stunned} for 1 minute. A creature can repeat the saving throw at the end of each of its turns, ending the effect on itself on a success.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]] and a save is required.\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "222",
          "custom": "",
          "license": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 60,
          "width": null,
          "units": "ft",
          "type": "cone",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "charges",
          "target": "ukuQ91Zr6U6CklGQ",
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "4d8[psychic] + 4",
              "psychic"
            ]
          ],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": 15,
          "ability": "int",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": 5,
          "charged": true
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<strong>Mind Blast (Recharge 5–6).</strong>",
          "fullName": "Mind Blast (Recharge 5–6).",
          "actionCopy": false,
          "type": "action",
          "actionInfo": {
            "damage": {
              "parts": [
                [
                  "4d8[psychic] + 4",
                  "psychic"
                ]
              ],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/magic/control/energy-stream-link-large-teal.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "12.331",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null
      },
      "_key": "!actors.items!sWFnd99cdZN8YDDm.ukuQ91Zr6U6CklGQ"
    },
    {
      "_id": "Q5Tj3iGRVMt7syKb",
      "name": "Magic Resistance",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong>Magic Resistance.</strong></em> The mind flayer arcanist has advantage on saving throws against spells and other magical effects.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "222",
          "custom": "",
          "license": ""
        },
        "activation": {
          "cost": null,
          "type": "",
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<em><strong>Magic Resistance.</strong></em>",
          "fullName": "Magic Resistance.",
          "actionCopy": false,
          "type": "special",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/magic/defensive/shield-barrier-glowing-blue.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "12.331",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null
      },
      "_key": "!actors.items!sWFnd99cdZN8YDDm.Q5Tj3iGRVMt7syKb"
    },
    {
      "_id": "giRFkZjXXwZW2N9c",
      "name": "Innate Spellcasting (Psionics)",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong>Innate Spellcasting (Psionics).</strong></em> The mind flayer arcanist’s innate spellcasting ability is &amp;Reference[int]{Intelligence} (spell save DC 15). It can innately cast the following spells, requiring no components:</p><p>At will: detect thoughts, levitate</p><p>1/day each: dominate monster, plane shift (self only)</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "222",
          "custom": "",
          "license": ""
        },
        "activation": {
          "cost": null,
          "type": "",
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<em><strong>Innate Spellcasting (Psionics).</strong></em>",
          "fullName": "Innate Spellcasting (Psionics).",
          "actionCopy": false,
          "type": "special",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/magic/unholy/orb-smoking-green.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "12.331",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null
      },
      "_key": "!actors.items!sWFnd99cdZN8YDDm.giRFkZjXXwZW2N9c"
    },
    {
      "_id": "CIax1NllhiQ1QWyJ",
      "name": "Spellcasting",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong>Spellcasting.</strong></em> The mind flayer arcanist is a 10th-level spellcaster. Its spellcasting ability is &amp;Reference[int]{Intelligence} (save DC 15, +7 to hit with spell attacks). The mind flayer arcanist has the following wizard spells prepared:</p><p>Cantrips (at will): blade ward, dancing lights, mage hand, shocking grasp</p><p>1st level (4 slots): detect magic, disguise self, shield, sleep</p><p>2nd level (3 slots): blur, invisibility, ray of enfeeblement</p><p>3rd level (3 slots): clairvoyance, &amp;Reference[lightning]{lightning} bolt, sending</p><p>4th level (3 slots): confusion, hallucinatory terrain</p><p>5th level (2 slots): telekinesis, wall of &amp;Reference[force]{force}</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "222",
          "custom": "",
          "license": ""
        },
        "activation": {
          "cost": null,
          "type": "",
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<em><strong>Spellcasting.</strong></em>",
          "fullName": "Spellcasting.",
          "actionCopy": false,
          "type": "special",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/magic/light/beam-rays-magenta-large.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": "12.331",
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null,
        "compendiumSource": null,
        "duplicateSource": null
      },
      "_key": "!actors.items!sWFnd99cdZN8YDDm.CIax1NllhiQ1QWyJ"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You create up to four torch-sized lights within range, making them appear as torches, lanterns, or glowing orbs that hover in the air for the duration. You can also combine the four lights into one glowing vaguely &amp;Reference[humanoid]{humanoid} form of Medium size. Whichever form you choose, each light sheds dim light in a 10-foot radius.</p>\n<p>As a bonus action on your turn, you can move the lights up to 60 feet to a new spot within range. A light must be within 20 feet of another light created by this spell, and a light winks out if it exceeds the spell's range.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "230",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 120,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 0,
        "school": "evo",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Dancing Lights",
      "flags": {
        "ddbimporter": {
          "id": 136489,
          "definitionId": 2057,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Dancing Lights",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 230,
              "sourceType": 1
            }
          ],
          "tags": [
            "Utility"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "onUseMacroName": "[postActiveEffects]ItemMacro",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dae": {
          "macro": {
            "name": "Dancing Lights",
            "type": "script",
            "scope": "global",
            "command": "if (!DDBImporter?.EffectHelper.checkJB2a(true, true, true)) return false;\n\nconst summonType = 'Dancing light';\nconst caster = game.actors.get(args[0].actor._id);\nconst spawnedIds = [];\n\n// this is called when the item is created, you can run this manually if your actors are not created yet\n// await DDBImporter.EffectHelper._createJB2aActors(\"Dancing Lights\", \"Dancing light\");\n\nconst lightActors = game.actors.filter((f) =>f.name.includes(summonType));\n\nconst actorChoices = lightActors.map((actor) => {\n  const labelSrc = actor.img.replace(/\\\\d+x\\\\d+\\\\.webm$/, 'Thumb.webp');\n  const labelText = actor.name.split(' - ')[1];\n  return {\n    label: `<img src=\"${labelSrc}\" width=\"40\" height=\"40\" style=\"border:0px\"><br>${labelText}`,\n    value: actor,\n  };\n});\n\nasync function preEffects(template, update) {\n  //prep summoning area\n  new Sequence()\n    .effect()\n    .atLocation(template)\n    .file(getJB2aName(update.token.name))\n    .center()\n    .scale(1.5)\n    .belowTokens()\n    .play();\n}\n\nasync function postEffects(template, token) {\n  //bring in our minion\n  new Sequence().animation().on(token).fadeIn(2000).play();\n}\n\nfunction getJB2aName(colorChoice) {\n  if (game.modules.get('jb2a_patreon')?.active) {\n    if (colorChoice.includes('Blue')) {\n      return 'jb2a.markers.light.intro.blue';\n    } else if (colorChoice.includes('Green')) {\n      return 'jb2a.markers.light.intro.green';\n    } else if (colorChoice.includes('Yellow')) {\n      return 'jb2a.markers.light.intro.yellow02';\n    } else {\n      return 'jb2a.markers.light.intro.yellow';\n    }\n  } else {\n    return 'jb2a.markers.light.intro.blue';\n  }\n}\n\nfor (let i = 0; i < 4; i++) {\n  const choice = await warpgate.buttonDialog({\n    title: 'Choose your color:',\n    buttons: actorChoices,\n  });\n\n  if (!choice) break;\n\n  const updates = {\n    token: {\n      name: `${choice.name} of ${caster.name}`,\n      alpha: 0,\n    },\n    actor: {\n      name: `${choice.name} of ${caster.name}`,\n      system: {\n        attributes: {\n          hp: {\n            value: 100,\n            max: 100,\n          },\n        },\n        details: {\n          type: {\n            custom: 'NoTarget',\n            value: 'custom',\n          },\n        },\n      },\n    },\n    flags: {\n      'mid-qol': {\n        neverTarget: true,\n      }\n    }\n  };\n\n  const callbacks = {\n    pre: async (template, update) => {\n      preEffects(template, update);\n      await DDBImporter?.EffectHelper.wait(500);\n    },\n    post: async (template, token, updates) => {\n      postEffects(template, token);\n      await DDBImporter?.EffectHelper.wait(500);\n      const sourceActorOrToken = fromUuidSync(\n        updates.actor.flags.warpgate.control.actor\n      );\n      const sourceActor = sourceActorOrToken.actor ?? sourceActorOrToken;\n      const concentrationFlag = sourceActor.getFlag('midi-qol', 'concentration-data');\n      concentrationFlag.removeUuids.push(token.uuid);\n      await sourceActor.setFlag('midi-qol', 'concentration-data', concentrationFlag);\n    },\n  };\n\n  const options = { controllingActor: caster };\n  const ids = await warpgate.spawn(\n    await choice.getTokenDocument(),\n    updates,\n    callbacks,\n    options,\n  );\n\n  if (!ids) break;\n  spawnedIds.push(ids[0]);\n}\n\nawait token.actor.setFlag('midi-qol', 'spawnedTokenIds', spawnedIds);\nfor (const id of spawnedIds) {\n  const spawnedActor = canvas.scene.tokens.get(id).actor;\n  await DAE.setFlag(spawnedActor, 'spawnedByTokenUuid', token.document.uuid);\n}\n\nconst hookIdForSpawnedCreatures = Hooks.on('preDeleteToken', async (tokenDoc) => {\n  const sourceTokenUuid = tokenDoc.actor.getFlag('dae', 'spawnedByTokenUuid');\n  if (!sourceTokenUuid) return;\n  new Sequence()\n    .effect()\n    .atLocation(tokenDoc.object.center)\n    .file(`jb2a.smoke.puff.centered.grey.2`)\n    .scale(tokenDoc.width / canvas.scene.grid.distance)\n    .play();\n  const sourceActor = fromUuidSync(sourceTokenUuid).actor;\n  const spawnedIds = sourceActor.getFlag('midi-qol', 'spawnedTokenIds');\n  if (!spawnedIds) return;\n  const spawnedTokenDocs = [];\n  for (const i of spawnedIds) {\n    if (canvas.scene.tokens.get(i))\n      spawnedTokenDocs.push(canvas.scene.tokens.get(i));\n  }\n  if (spawnedTokenDocs.length === 1) {\n    await sourceActor.unsetFlag('midi-qol', 'spawnedTokenIds');\n    Hooks.off('preDeleteToken', hookIdForSpawnedCreatures);\n  }\n});\n"
          }
        }
      },
      "effects": [],
      "img": "icons/magic/light/explosion-star-glow-yellow.webp",
      "folder": "rkqMMY58A8Xdl9Mg",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675268,
        "modifiedTime": 1721274675268,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "cOD54QKL2R02JCLT",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.cOD54QKL2R02JCLT"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>A spectral, floating hand appears at a point you choose within range. The hand lasts for the duration or until you dismiss it as an action. The hand vanishes if it is ever more than 30 feet away from you or if you cast this spell again.</p>\n<p>You can use your action to control the hand. You can use the hand to manipulate an object, open an unlocked door or container, stow or retrieve an item from an open container, or pour the contents out of a vial. You can move the hand up to 30 feet each time you use it.</p>\n<p>The hand can't attack, activate magic items, or carry more than 10 pounds.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "256",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 30,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 0,
        "school": "con",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Mage Hand",
      "flags": {
        "ddbimporter": {
          "id": 138434,
          "definitionId": 2173,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Mage Hand",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 256,
              "sourceType": 1
            }
          ],
          "tags": [
            "Utility"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/magic/unholy/strike-hand-glow-pink.webp",
      "folder": "e8UeRF8mmfaJRx4e",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675285,
        "modifiedTime": 1721274675285,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "fIO0hyZCnNuaByxJ",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.fIO0hyZCnNuaByxJ"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>&amp;Reference[lightning]{Lightning} springs from your hand to deliver a shock to a creature you try to touch. Make a melee spell attack against the target. You have advantage on the attack roll if the target is wearing armor made of metal. On a hit, the target takes 1d8 &amp;Reference[lightning]{lightning} damage, and it can't take reactions until the start of its next turn.</p>\n<p>The spell's damage increases by 1d8 when you reach 5th level (2d8), 11th level (3d8), and 17th level (4d8).</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "275",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "creature",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "touch"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "msak",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "1d8[lightning]",
              "lightning"
            ]
          ],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 0,
        "school": "evo",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "cantrip",
          "formula": "1d8"
        }
      },
      "name": "Shocking Grasp",
      "flags": {
        "ddbimporter": {
          "id": 138709,
          "definitionId": 2250,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Shocking Grasp",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 275,
              "sourceType": 1
            }
          ],
          "tags": [
            "Damage"
          ],
          "version": "5.1.27",
          "effectsApplied": true,
          "chrisEffectsApplied": true,
          "chrisPreEffectName": "Shocking Grasp"
        },
        "betterRolls5e": {
          "quickVersatile": {
            "altValue": true
          },
          "quickCharges": {
            "value": {
              "use": true,
              "resource": true
            },
            "altValue": {
              "use": true,
              "resource": true
            }
          }
        },
        "custom-character-sheet-sections": {
          "sectionName": ""
        },
        "rest-recovery": {
          "data": {
            "recovery": {
              "enabled": false
            }
          }
        },
        "midi-qol": {
          "fumbleThreshold": null,
          "effectActivation": false,
          "onUseMacroName": "[postActiveEffects]function.chrisPremades.macros.shockingGrasp",
          "onUseMacroParts": {
            "items": {
              "0": {
                "macroName": "function.chrisPremades.macros.shockingGrasp",
                "option": "postActiveEffects"
              }
            }
          },
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "nodam": false,
          "fulldam": false,
          "halfdam": false,
          "autoFailFriendly": false,
          "autoSaveFriendly": false,
          "rollOther": false,
          "critOther": false,
          "offHandWeapon": false,
          "magicdam": false,
          "magiceffect": false,
          "concentration": false,
          "toggleEffect": false,
          "ignoreTotalCover": false,
          "confirmTargets": "default"
        },
        "exportSource": {
          "world": "homebrew",
          "system": "dnd5e",
          "coreVersion": "10.291",
          "systemVersion": "2.1.4"
        },
        "autoanimations": {
          "id": "575c1f1a-467d-44db-af41-764ef5f38274",
          "label": "Shocking Grasp",
          "levels3d": {
            "type": "explosion",
            "data": {
              "color01": "#FFFFFF",
              "color02": "#FFFFFF",
              "spritePath": "modules/levels-3d-preview/assets/particles/dust.png"
            },
            "sound": {
              "enable": false
            },
            "secondary": {
              "enable": false,
              "data": {
                "color01": "#FFFFFF",
                "color02": "#FFFFFF",
                "spritePath": "modules/levels-3d-preview/assets/particles/dust.png"
              }
            }
          },
          "macro": {
            "enable": false,
            "playWhen": "0"
          },
          "menu": "range",
          "primary": {
            "video": {
              "dbSection": "range",
              "menuType": "spell",
              "animation": "chainlightning",
              "variant": "primary",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "isReturning": false,
              "isWait": false,
              "onlyX": false,
              "opacity": 1,
              "playbackRate": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "secondary": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": true,
              "isWait": false,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1.5,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "soundOnly": {
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            }
          },
          "source": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "isWait": true,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "target": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "opacity": 1,
              "persistent": false,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "unbindAlpha": false,
              "unbindVisibility": false,
              "zIndex": 1
            }
          },
          "isEnabled": true,
          "isCustomized": true,
          "fromAmmo": false,
          "version": 5
        },
        "chris-premades": {
          "info": {
            "name": "Shocking Grasp",
            "version": "0.7.45",
            "hasAnimation": true
          }
        },
        "dnd5e": {}
      },
      "effects": [],
      "img": "icons/magic/lightning/bolt-strike-blue.webp",
      "folder": "rkqMMY58A8Xdl9Mg",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675318,
        "modifiedTime": 1721274675318,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "PTZEWmm3jsj8B2CC",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.PTZEWmm3jsj8B2CC"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>For the duration, you sense the presence of magic within 30 feet of you. If you sense magic in this way, you can use your action to see a faint aura around any visible creature or object in the area that bears magic, and you learn its school of magic, if any.</p>\n<p>The spell can penetrate most barriers, but it is blocked by 1 foot of stone, 1 inch of common metal, a thin sheet of lead, or 3 feet of wood or dirt.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "231",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "10",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "self",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "wis",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "div",
        "properties": [
          "vocal",
          "somatic",
          "ritual",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Detect Magic",
      "flags": {
        "ddbimporter": {
          "id": 136561,
          "definitionId": 2065,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Detect Magic",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 231,
              "sourceType": 1
            }
          ],
          "tags": [
            "Detection"
          ],
          "version": "5.1.27",
          "effectsApplied": true,
          "chrisEffectsApplied": true,
          "chrisPreEffectName": "Detect Magic"
        },
        "spell-class-filter-for-5e": {
          "parentClass": "cleric"
        },
        "autoanimations": {
          "id": "97966bd7-4fae-4a69-806f-757d646fc12b",
          "label": "Detect Magic",
          "macro": {
            "enable": false,
            "playWhen": "0"
          },
          "menu": "aura",
          "primary": {
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "detectmagic",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": true,
              "alpha": false,
              "alphaMax": 0.5,
              "alphaMin": -0.5,
              "alphaDuration": 1000,
              "breath": false,
              "breathMax": 1.05,
              "breathMin": 0.95,
              "breathDuration": 1000,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isRadius": true,
              "isWait": false,
              "opacity": 1,
              "playbackRate": 1,
              "playOn": "source",
              "size": 3,
              "tint": false,
              "tintColor": "#FFFFFF",
              "tintSaturate": 0,
              "unbindAlpha": false,
              "unbindVisibility": false,
              "zIndex": 1
            }
          },
          "secondary": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": true,
              "isWait": false,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "size": 1.5,
              "zIndex": 1
            }
          },
          "soundOnly": {
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            }
          },
          "source": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "isWait": true,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "size": 1,
              "zIndex": 1
            }
          },
          "target": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "opacity": 1,
              "persistent": false,
              "repeat": 1,
              "repeatDelay": 250,
              "size": 1,
              "unbindAlpha": false,
              "unbindVisibility": false,
              "zIndex": 1
            }
          },
          "isEnabled": true,
          "isCustomized": true,
          "fromAmmo": false,
          "version": 5
        },
        "custom-character-sheet-sections": {
          "sectionName": ""
        },
        "rest-recovery": {
          "data": {
            "recovery": {
              "enabled": false
            }
          }
        },
        "enhanced-terrain-layer": {
          "multiple": null,
          "elevation": null,
          "depth": null,
          "environment": ""
        },
        "midi-qol": {
          "effectActivation": false,
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "nodam": false,
          "fulldam": false,
          "halfdam": false,
          "autoFailFriendly": false,
          "rollOther": false,
          "critOther": false,
          "offHandWeapon": false,
          "magicdam": false,
          "magiceffect": false,
          "concentration": false,
          "toggleEffect": false,
          "ignoreTotalCover": false,
          "autoSaveFriendly": false,
          "confirmTargets": "default"
        },
        "exportSource": {
          "world": "homebrew",
          "system": "dnd5e",
          "coreVersion": "10.291",
          "systemVersion": "2.1.4"
        },
        "chris-premades": {
          "info": {
            "name": "Detect Magic",
            "version": "0.7.01"
          }
        },
        "dnd5e": {}
      },
      "effects": [
        {
          "changes": [],
          "transfer": false,
          "_id": "0x9GhZIyfp9Ji1GB",
          "disabled": false,
          "duration": {
            "startTime": null,
            "seconds": null,
            "combat": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null
          },
          "origin": null,
          "tint": "#ffffff",
          "flags": {},
          "name": "Detect Magic",
          "description": "",
          "statuses": [],
          "_stats": {
            "coreVersion": "12.331",
            "systemId": null,
            "systemVersion": null,
            "createdTime": null,
            "modifiedTime": null,
            "lastModifiedBy": null,
            "compendiumSource": null,
            "duplicateSource": null
          },
          "img": "icons/magic/light/explosion-star-blue.webp",
          "type": "base",
          "system": {},
          "sort": 0,
          "_key": "!actors.items.effects!sWFnd99cdZN8YDDm.IzwtB49oAvBorC9V.0x9GhZIyfp9Ji1GB"
        }
      ],
      "img": "icons/magic/symbols/rune-sigil-black-pink.webp",
      "folder": "Sve3VzpVw1SFqYSn",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274673350,
        "modifiedTime": 1721274673350,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "IzwtB49oAvBorC9V",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.IzwtB49oAvBorC9V"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You make yourself--including your clothing, armor, weapons, and other belongings on your person--look different until the spell ends or until you use your action to dismiss it. You can seem 1 foot shorter or taller and can appear thin, fat, or in between. You can't change your body type, so you must adopt a form that has the same basic arrangement of limbs. Otherwise, the extent of the &amp;Reference[ill]{illusion} is up to you.</p>\n<p>The changes wrought by this spell fail to hold up to physical inspection. For example, if you use this spell to add a hat to your outfit, objects pass through the hat, and anyone who touches it would feel nothing or would feel your head and hair. If you use this spell to appear thinner than you are, the hand of someone who reaches out to touch you would bump into you while it was seemingly still in midair.</p>\n<p>To discern that you are disguised, a creature can use its action to inspect your appearance and must succeed on an &amp;Reference[int]{Intelligence} (&amp;Reference[inv]{Investigation}) check against your spell save DC.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "233",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "hour"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "self",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "ill",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Disguise Self",
      "flags": {
        "ddbimporter": {
          "id": 136608,
          "definitionId": 2069,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Disguise Self",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 233,
              "sourceType": 1
            }
          ],
          "tags": [
            "Shapechanging"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/creatures/magical/spirit-undead-masked-blue.webp",
      "folder": "CckA9KDh0fOPelFO",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274674779,
        "modifiedTime": 1721274674779,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "pLd0EOZssF7pMs5E",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.pLd0EOZssF7pMs5E"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>An &amp;Reference[invisible]{invisible} barrier of magical &amp;Reference[force]{force} appears and protects you. Until the start of your next turn, you have a +5 bonus to AC, including against the triggering attack, and you take no damage from <strong>magic missile</strong>.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "275",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "reaction",
          "cost": 1,
          "condition": "which you take when you are hit by an attack or targeted by the magic missile spell"
        },
        "duration": {
          "value": "1",
          "units": "round"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "self",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "abj",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Shield",
      "flags": {
        "ddbimporter": {
          "id": 138701,
          "definitionId": 2247,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Shield",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 275,
              "sourceType": 1
            }
          ],
          "tags": [
            "Warding"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [
        {
          "changes": [
            {
              "key": "system.attributes.ac.bonus",
              "mode": 2,
              "value": "+5",
              "priority": 20
            },
            {
              "key": "macro.tokenMagic",
              "mode": 0,
              "value": "water-field",
              "priority": 20
            }
          ],
          "duration": {
            "seconds": null,
            "startTime": null,
            "rounds": 1,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": "#ffffff",
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName",
              "specialDuration": [
                "turnStart"
              ]
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Shield",
          "statuses": [],
          "_id": "EnhOblnCW1KGHPkH",
          "description": "",
          "origin": null,
          "_stats": {
            "coreVersion": "12.331",
            "systemId": null,
            "systemVersion": null,
            "createdTime": null,
            "modifiedTime": null,
            "lastModifiedBy": null,
            "compendiumSource": null,
            "duplicateSource": null
          },
          "img": "icons/equipment/shield/kite-wooden-oak-glow.webp",
          "type": "base",
          "system": {},
          "sort": 0,
          "_key": "!actors.items.effects!sWFnd99cdZN8YDDm.0Hb7o2vjn8nu6OFQ.EnhOblnCW1KGHPkH"
        }
      ],
      "img": "icons/equipment/shield/kite-wooden-oak-glow.webp",
      "folder": "QG5P4iTezYNjNLlu",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675085,
        "modifiedTime": 1721274675085,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "0Hb7o2vjn8nu6OFQ",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.0Hb7o2vjn8nu6OFQ"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>This spell sends creatures into a magical slumber. Roll 5d8; the total is how many hit points of creatures this spell can affect. Creatures within 20 feet of a point you choose within range are affected in ascending order of their current hit points (ignoring &amp;Reference[unconscious]{unconscious} creatures).</p>\n<p>Starting with the creature that has the lowest current hit points, each creature affected by this spell falls &amp;Reference[unconscious]{unconscious} until the spell ends, the sleeper takes damage, or someone uses an action to shake or slap the sleeper awake. Subtract each creature’s hit points from the total before moving on to the creature with the next lowest hit points. A creature’s hit points must be equal to or less than the remaining total for that creature to be affected.</p>\n<p>&amp;Reference[undead]{Undead} and creatures immune to being &amp;Reference[charmed]{charmed} aren’t affected by this spell.</p>\n<p><em><strong>At Higher Levels.</strong></em> When you cast this spell using a spell slot of 2nd level or higher, roll an additional 2d8 for each slot level above 1st.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "276",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 20,
          "units": "ft",
          "type": "sphere",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 90,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "5d8",
              "midi-none"
            ]
          ],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "enc",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "level",
          "formula": "2d8"
        }
      },
      "name": "Sleep",
      "flags": {
        "ddbimporter": {
          "id": 138729,
          "definitionId": 2254,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Sleep",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 276,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "onUseMacroName": "[postActiveEffects]ItemMacro",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dae": {
          "macro": {
            "name": "Sleep",
            "type": "script",
            "scope": "global",
            "command": "// based on @ccjmk and @crymic macro for sleep. Gets targets and ignores those who are immune to sleep.\n// uses convinient effects\n// Midi-qol \"On Use\"\n\nconst sleepHp = await args[0].damageTotal;\nconst condition = \"Unconscious\";\nconsole.log(`Sleep Spell => Available HP Pool [${sleepHp}] points`);\nconst targets = await args[0].targets\n  .filter((i) => i.actor.system.attributes.hp.value != 0 && !i.actor.effects.find((x) => (x.name ?? x.label) === condition))\n  .sort((a, b) => (canvas.tokens.get(a.id).actor.system.attributes.hp.value < canvas.tokens.get(b.id).actor.system.attributes.hp.value ? -1 : 1));\nlet remainingSleepHp = sleepHp;\nlet sleepTarget = [];\n\nfor (let target of targets) {\n  const findTarget = await canvas.tokens.get(target.id);\n  const targetRaceOrType = DDBImporter?.EffectHelper.getRaceOrType(findTarget.actor);\n  const immuneType = [\"undead\", \"construct\", \"elf\", \"half-elf\"].some((race) => targetRaceOrType.includes(race));\n  const immuneCI = findTarget.actor.system.traits.ci.custom.includes(\"Sleep\");\n  const sleeping = findTarget.actor.effects.find((i) => (i.name ?? i.label) === condition);\n  const targetHpValue = findTarget.actor.system.attributes.hp.value;\n  const targetImg = target?.texture?.src;\n  if ((immuneType) || (immuneCI) || (sleeping)) {\n    console.log(`Sleep Results => Target: ${findTarget.name} | HP: ${targetHpValue} | Status: Resists`);\n    sleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>Resists</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n  } else if (remainingSleepHp >= targetHpValue) {\n    remainingSleepHp -= targetHpValue;\n    console.log(`Sleep Results => Target: ${findTarget.name} |  HP: ${targetHpValue} | HP Pool: ${remainingSleepHp} | Status: Slept`);\n    sleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>Slept</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n    const gameRound = game.combat ? game.combat.round : 0;\n    const effectData = {\n      label: \"Sleep Spell\",\n      name: \"Sleep Spell\",\n      icon: \"icons/svg/sleep.svg\",\n      origin: args[0].uuid,\n      disabled: false,\n      duration: { rounds: 10, seconds: 60, startRound: gameRound, startTime: game.time.worldTime },\n      flags: { dae: { specialDuration: [\"isDamaged\"] } },\n      changes: [\n        DDBImporter.EffectHelper.generateCEStatusEffectChange(game.i18n.localize(\"Unconscious\"), 20, true),\n      ]\n    };\n\n    await MidiQOL.socket().executeAsGM(\"createEffects\", { actorUuid: findTarget.actor.uuid, effects: [effectData] });\n  } else {\n    console.log(`Sleep Results => Target: ${target.name} | HP: ${targetHpValue} | HP Pool: ${remainingSleepHp - targetHpValue} | Status: Missed`);\n    sleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>misses</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n  }\n}\nawait DDBImporter?.EffectHelper.wait(500);\nconst sleptResults = `<div><div class=\"midi-qol-nobox\">${sleepTarget.join('')}</div></div>`;\nconst chatMessage = game.messages.get(args[0].itemCardId);\nlet content = foundry.utils.duplicate(chatMessage.content);\nconst searchString = /<div class=\"midi-qol-hits-display\">[\\s\\S]*<div class=\"end-midi-qol-hits-display\">/g;\nconst replaceString = `<div class=\"midi-qol-hits-display\"><div class=\"end-midi-qol-hits-display\">${sleptResults}`;\ncontent = await content.replace(searchString, replaceString);\nawait chatMessage.update({ content: content });\n"
          }
        }
      },
      "effects": [],
      "img": "icons/magic/control/sleep-bubble-purple.webp",
      "folder": "qUHjLOJ6GhNjE4HD",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675100,
        "modifiedTime": 1721274675100,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "Y513aKvSCGhT9Nzb",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.Y513aKvSCGhT9Nzb"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>Your body becomes blurred, shifting and wavering to all who can see you. For the duration, any creature has disadvantage on attack rolls against you. An attacker is immune to this effect if it doesn't rely on sight, as with &amp;Reference[blindsight]{blindsight}, or can see through illusions, as with &amp;Reference[truesight]{truesight}.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "219",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "self",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 2,
        "school": "ill",
        "properties": [
          "vocal",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Blur",
      "flags": {
        "ddbimporter": {
          "id": 136162,
          "definitionId": 2020,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Blur",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 219,
              "sourceType": 1
            }
          ],
          "tags": [
            "Deception",
            "Warding"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [
        {
          "changes": [
            {
              "key": "flags.midi-qol.grants.disadvantage.attack.all",
              "mode": 0,
              "value": "1",
              "priority": 20
            },
            {
              "key": "macro.tokenMagic",
              "mode": 0,
              "value": "blur",
              "priority": 20
            }
          ],
          "duration": {
            "seconds": null,
            "startTime": null,
            "rounds": 10,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": "#ffffff",
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName"
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Blur",
          "statuses": [],
          "_id": "zNkVqATUadff50gK",
          "description": "",
          "origin": null,
          "_stats": {
            "coreVersion": "12.331",
            "systemId": null,
            "systemVersion": null,
            "createdTime": null,
            "modifiedTime": null,
            "lastModifiedBy": null,
            "compendiumSource": null,
            "duplicateSource": null
          },
          "img": "icons/magic/time/hourglass-yellow-green.webp",
          "type": "base",
          "system": {},
          "sort": 0,
          "_key": "!actors.items.effects!sWFnd99cdZN8YDDm.qOLlaRm1dodgnXo5.zNkVqATUadff50gK"
        }
      ],
      "img": "icons/magic/time/hourglass-yellow-green.webp",
      "folder": "CckA9KDh0fOPelFO",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274674676,
        "modifiedTime": 1721274674676,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "qOLlaRm1dodgnXo5",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.qOLlaRm1dodgnXo5"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>A creature you touch becomes &amp;Reference[invisible]{invisible} until the spell ends. Anything the target is wearing or carrying is &amp;Reference[invisible]{invisible} as long as it is on the target's person. The spell ends for a target that attacks or casts a spell.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 3rd level or higher, you can target one additional creature for each slot level above 2nd.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "254",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "hour"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 1,
          "units": "1",
          "type": "creature",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "touch"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "util",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 2,
        "school": "ill",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Invisibility",
      "flags": {
        "ddbimporter": {
          "id": 138364,
          "definitionId": 2159,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Invisibility",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 254,
              "sourceType": 1
            }
          ],
          "tags": [
            "Buff"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [
        {
          "changes": [
            {
              "key": "macro.CE",
              "mode": 0,
              "value": "Invisible",
              "priority": 20
            }
          ],
          "duration": {
            "seconds": 3600,
            "startTime": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": "#ffffff",
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName",
              "specialDuration": [
                "1Attack",
                "1Spell"
              ]
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Invisibility",
          "statuses": [],
          "_id": "UmVyvAPIjhsMU5jq",
          "description": "",
          "origin": null,
          "_stats": {
            "coreVersion": "12.331",
            "systemId": null,
            "systemVersion": null,
            "createdTime": null,
            "modifiedTime": null,
            "lastModifiedBy": null,
            "compendiumSource": null,
            "duplicateSource": null
          },
          "img": "icons/magic/air/fog-gas-smoke-blue-gray.webp",
          "type": "base",
          "system": {},
          "sort": 0,
          "_key": "!actors.items.effects!sWFnd99cdZN8YDDm.MWsgzx6jiFvMwg5Z.UmVyvAPIjhsMU5jq"
        }
      ],
      "img": "icons/magic/air/fog-gas-smoke-blue-gray.webp",
      "folder": "CckA9KDh0fOPelFO",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274674946,
        "modifiedTime": 1721274674946,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "MWsgzx6jiFvMwg5Z",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.MWsgzx6jiFvMwg5Z"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>A black beam of enervating energy springs from your finger toward a creature within range. Make a ranged spell attack against the target. On a hit, the target deals only half damage with weapon attacks that use &amp;Reference[str]{Strength} until the spell ends.</p>\n<p>At the end of each of the target's turns, it can make a &amp;Reference[con]{Constitution} saving throw against the spell. On a success, the spell ends.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "271",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 1,
          "width": null,
          "units": "",
          "type": "creature",
          "prompt": true
        },
        "range": {
          "value": 60,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "rsak",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 2,
        "school": "nec",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Ray of Enfeeblement",
      "flags": {
        "ddbimporter": {
          "id": 138631,
          "definitionId": 2225,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Ray of Enfeeblement",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 271,
              "sourceType": 1
            }
          ],
          "tags": [
            "Debuff"
          ],
          "version": "5.1.27",
          "effectsApplied": true,
          "chrisEffectsApplied": true,
          "chrisPreEffectName": "Ray of Enfeeblement"
        },
        "midi-qol": {
          "forceCEOff": true,
          "fumbleThreshold": null,
          "effectActivation": false,
          "removeAttackDamageButtons": "default"
        },
        "custom-character-sheet-sections": {
          "sectionName": ""
        },
        "rest-recovery": {
          "data": {
            "recovery": {
              "enabled": false
            }
          }
        },
        "midiProperties": {
          "nodam": false,
          "fulldam": false,
          "halfdam": false,
          "autoFailFriendly": false,
          "autoSaveFriendly": false,
          "rollOther": false,
          "critOther": false,
          "offHandWeapon": false,
          "magicdam": false,
          "magiceffect": false,
          "concentration": false,
          "toggleEffect": false,
          "ignoreTotalCover": false,
          "confirmTargets": "default"
        },
        "exportSource": {
          "world": "development-testing",
          "system": "dnd5e",
          "coreVersion": "10.291",
          "systemVersion": "2.1.5"
        },
        "chris-premades": {
          "info": {
            "name": "Ray of Enfeeblement",
            "version": "0.7.01"
          }
        },
        "dnd5e": {}
      },
      "effects": [
        {
          "changes": [
            {
              "key": "flags.midi-qol.OverTime",
              "mode": 0,
              "value": "label=Ray of Enfeeblement (End of Turn),turn=end,saveDC=$chris.itemDC,saveAbility=con,savingThrow=true,saveMagic=true",
              "priority": 20
            },
            {
              "key": "flags.midi-qol.onUseMacroName",
              "mode": 0,
              "value": "function.chrisPremades.macros.rayOfEnfeeblement,postDamageRoll",
              "priority": 20
            }
          ],
          "duration": {
            "startTime": null,
            "seconds": null,
            "combat": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null
          },
          "tint": "#ffffff",
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName",
              "selfTarget": false,
              "selfTargetAlways": false,
              "durationExpression": "",
              "macroRepeat": "none",
              "specialDuration": []
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "dfreds-convenient-effects": {
              "description": ""
            },
            "core": {
              "statusId": ""
            },
            "ActiveAuras": {
              "isAura": false,
              "aura": "None",
              "radius": "undefined",
              "alignment": "",
              "type": "",
              "ignoreSelf": false,
              "height": false,
              "hidden": false,
              "displayTemp": false,
              "hostile": false,
              "onlyOnce": false
            }
          },
          "_id": "EWWLgSlMqGPUFMBb",
          "origin": null,
          "name": "Ray of Enfeeblement",
          "description": "",
          "statuses": [],
          "_stats": {
            "coreVersion": "12.331",
            "systemId": null,
            "systemVersion": null,
            "createdTime": null,
            "modifiedTime": null,
            "lastModifiedBy": null,
            "compendiumSource": null,
            "duplicateSource": null
          },
          "img": "icons/magic/light/beam-rays-teal.webp",
          "type": "base",
          "system": {},
          "sort": 0,
          "_key": "!actors.items.effects!sWFnd99cdZN8YDDm.rgqTL33Z3hVDOuCk.EWWLgSlMqGPUFMBb"
        }
      ],
      "img": "icons/magic/light/beam-rays-teal.webp",
      "folder": "ocH9XKjvhtI6hJk6",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675367,
        "modifiedTime": 1721274675367,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "rgqTL33Z3hVDOuCk",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.rgqTL33Z3hVDOuCk"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You create an &amp;Reference[invisible]{invisible} sensor within range in a location familiar to you (a place you have visited or seen before) or in an obvious location that is unfamiliar to you (such as behind a door, around a corner, or in a grove of trees). The sensor remains in place for the duration, and it can't be attacked or otherwise interacted with.</p>\n<p>When you cast the spell, you choose seeing or hearing. You can use the chosen sense through the sensor as if you were in its space. As your action, you can switch between seeing and hearing.</p>\n<p>A creature that can see the sensor (such as a creature benefiting from <strong>see invisibility</strong> or &amp;Reference[truesight]{truesight}) sees a luminous, intangible orb about the size of your fist.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "222",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "minute",
          "cost": 10,
          "condition": ""
        },
        "duration": {
          "value": "10",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 5280,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 3,
        "school": "div",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Clairvoyance",
      "flags": {
        "ddbimporter": {
          "id": 136209,
          "definitionId": 2028,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Clairvoyance",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 222,
              "sourceType": 1
            }
          ],
          "tags": [
            "Scrying",
            "Detection",
            "Utility"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/magic/perception/eye-winged-pink.webp",
      "folder": "Sve3VzpVw1SFqYSn",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274673240,
        "modifiedTime": 1721274673240,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "bI6WV9RLeIlJLVmx",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.bI6WV9RLeIlJLVmx"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>A stroke of &amp;Reference[lightning]{lightning} forming a &amp;Reference[line]{line} 100 feet long and 5 feet wide blasts out from you in a direction you choose. Each creature in the &amp;Reference[line]{line} must make a &amp;Reference[dex]{Dexterity} saving throw. A creature takes 8d6 &amp;Reference[lightning]{lightning} damage on a failed save, or half as much damage on a successful one.</p>\n<p>The &amp;Reference[lightning]{lightning} ignites flammable objects in the area that aren't being worn or carried.</p>\n<p><em><strong>At Higher Levels.</strong></em> When you cast this spell using a spell slot of 4th level or higher, the damage increases by 1d6 for each slot level above 3rd.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "255",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 100,
          "units": "ft",
          "type": "line",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "8d6[lightning]",
              "lightning"
            ]
          ],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "dex",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 3,
        "school": "evo",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "level",
          "formula": "1d6"
        }
      },
      "name": "Lightning Bolt",
      "flags": {
        "ddbimporter": {
          "id": 138405,
          "definitionId": 2167,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Lightning Bolt",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 255,
              "sourceType": 1
            }
          ],
          "tags": [
            "Damage"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/magic/lightning/bolt-forked-large-blue.webp",
      "folder": "rkqMMY58A8Xdl9Mg",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274674966,
        "modifiedTime": 1721274674966,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "YyLpDNqzo1oRXCg8",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.YyLpDNqzo1oRXCg8"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You send a short message of twenty-five words or less to a creature with which you are familiar. The creature hears the message in its mind, recognizes you as the sender if it knows you, and can answer in a like manner immediately. The spell enables creatures with &amp;Reference[int]{Intelligence} scores of at least 1 to understand the meaning of your message.</p>\n<p>You can send the message across any distance and even to other planes of existence, but if the target is on a different plane than you, there is a 5 percent chance that the message doesn't arrive.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "274",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "round"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 3,
        "school": "evo",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Sending",
      "flags": {
        "ddbimporter": {
          "id": 138688,
          "definitionId": 2243,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Sending",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 274,
              "sourceType": 1
            }
          ],
          "tags": [
            "Communication"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/sundries/documents/envelope-sealed-red-brown.webp",
      "folder": "rkqMMY58A8Xdl9Mg",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274673755,
        "modifiedTime": 1721274673755,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "xDCJ5z478dw9nt3F",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.xDCJ5z478dw9nt3F"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>This spell assaults and twists creatures' minds, spawning delusions and provoking uncontrolled action. Each creature in a 10-foot-radius &amp;Reference[sphere]{sphere} centered on a point you choose within range must succeed on a &amp;Reference[wis]{Wisdom} saving throw when you cast this spell or be affected by it.</p>\n<p>An affected target can't take reactions and must roll a d10 at the start of each of its turns to determine its behavior for that turn.</p>\n<table>\n<thead>\n<tr>\n<th>d10</th>\n<th>Behavior</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>The creature uses all its movement to move in a random direction. To determine the direction, roll a d8 and assign a direction to each die face. The creature doesn't take an action this turn.</td>\n</tr>\n<tr>\n<td>2-6</td>\n<td>The creature doesn't move or take actions this turn.</td>\n</tr>\n<tr>\n<td>7-8</td>\n<td>The creature uses its action to make a melee attack against a randomly determined creature within its reach. If there is no creature within its reach, the creature does nothing this turn.</td>\n</tr>\n<tr>\n<td>9-10</td>\n<td>The creature can act and move normally.</td>\n</tr>\n</tbody>\n</table><div id=\"table-link\">@UUID[Compendium.world.ddb-lost-mines-phandelver-tables.RollTable.kYKdNvAUgqNvA9Iz]{Open RollTable Confusion: Behavior}</div>\n<p> </p>\n<p>At the end of each of its turns, an affected target can make a &amp;Reference[wis]{Wisdom} saving throw. If it succeeds, this effect ends for that target.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 5th level or higher, the radius of the &amp;Reference[sphere]{sphere} increases by 5 feet for each slot level above 4th.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "224",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 10,
          "units": "ft",
          "type": "sphere",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 90,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "wis",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 4,
        "school": "enc",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Confusion",
      "flags": {
        "ddbimporter": {
          "id": 136256,
          "definitionId": 2038,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Confusion",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 224,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dae": {
          "macro": {
            "name": "Confusion",
            "type": "script",
            "scope": "global",
            "command": "if (args[0] === \"each\") {\n  const findEffect = token.actor.effects.find((effect) => effect.name === \"Confusion\");\n\n  if (findEffect) {\n    const changeIndex = findEffect.changes.findIndex(\n      (change) =>\n        change.key === \"system.attributes.movement.all\" &&\n        change.mode === CONST.ACTIVE_EFFECT_MODES.CUSTOM &&\n        change.value === 0\n    );\n\n    if (changeIndex !== -1) {\n      findEffect.changes.splice(changeIndex, 1);\n\n      await MidiQOL.socket().executeAsGM(\"updateEffects\", {\n        actorUuid: token.actor.uuid,\n        updates: [{ _id: findEffect.id, changes: findEffect.changes }],\n      });\n    } else {\n      console.log(\"Specified change not found in the Confusion effect.\");\n    }\n  } else {\n    console.log(\"Confusion effect not found on the actor.\");\n  }\n\n  const hasEffectApplied = await game.dfreds.effectInterface.hasEffectApplied(\"Reaction\", token.actor.uuid);\n  if (!hasEffectApplied) {\n    game.dfreds.effectInterface.addEffect({ effectName: \"Reaction\", uuid: token.actor.uuid });\n  }\n\n  const confusionRoll = await new CONFIG.Dice.DamageRoll(\"1d10\").evaluate({ async: true });\n  await MidiQOL.displayDSNForRoll(confusionRoll, \"damageRoll\");\n  const result = confusionRoll.total;\n  let content;\n  let selectedTokenMessage;\n  let directionResult;\n  let directionContent;\n  switch (result) {\n    case 1: {\n      content = \"The creature uses all its movement to move in a random direction. To determine the direction, roll a d8 and assign a direction to each die face. The creature doesn't take an action this turn.\";\n      const directionRoll = await new CONFIG.Dice.DamageRoll(\"1d8\").evaluate({ async: true });\n      await MidiQOL.displayDSNForRoll(directionRoll, \"damageRoll\");\n      directionResult = directionRoll.total;\n      directionContent = null;\n      switch (directionResult) {\n        case 1:\n          directionContent = \"North\";\n          break;\n        case 2:\n          directionContent = \"South\";\n          break;\n        case 3:\n          directionContent = \"East\";\n          break;\n        case 4:\n          directionContent = \"West\";\n          break;\n        case 5:\n          directionContent = \"Northwest\";\n          break;\n        case 6:\n          directionContent = \"Northeast\";\n          break;\n        case 7:\n          directionContent = \"Southwest\";\n          break;\n        case 8:\n          directionContent = \"Southeast\";\n          break;\n      }\n      break;\n    }\n    case 2:\n    case 3:\n    case 4:\n    case 5:\n    case 6: {\n      content = \"The creature doesn't move or take actions this turn.\";\n      const findEffect = token.actor.effects.find((effect) => effect.name === \"Confusion\");\n      if (findEffect)\n        findEffect.changes.push({\n          key: \"system.attributes.movement.all\",\n          mode: CONST.ACTIVE_EFFECT_MODES.CUSTOM,\n          value: 0,\n          priority: 20,\n        });\n      await MidiQOL.socket().executeAsGM(\"updateEffects\", {\n        actorUuid: token.actor.uuid,\n        updates: [{ _id: findEffect.id, changes: findEffect.changes }],\n      });\n      break;\n    }\n    case 7:\n    case 8: {\n      content = \"The creature uses its action to make a melee attack against a randomly determined creature within its reach. If there is no creature within its reach, the creature does nothing this turn.\";\n      const rangeCheck = MidiQOL.findNearby(null, token.actor, token.actor.system.attributes.movement.walk, {\n        includeToken: false,\n      });\n      if (rangeCheck.length > 0) {\n        const randomSelection = rangeCheck[Math.floor(Math.random() * rangeCheck.length)];\n        selectedTokenMessage = `The creature must move to ${randomSelection.actor.name} and attack them with a melee attack.`;\n        if (game.modules.get(\"sequencer\")?.active) {\n          const target = randomSelection;\n          new Sequence()\n            .effect()\n            .from(target)\n            .belowTokens()\n            .attachTo(target, { locale: true })\n            .scaleToObject(1, { considerTokenScale: true })\n            .spriteRotation(target.rotation * -1)\n            .filter(\"Glow\", { color: 0x911a1a, distance: 15 })\n            .duration(30000)\n            .fadeIn(2000, { delay: 1000 })\n            .fadeOut(3500, { ease: \"easeInSine\" })\n            .opacity(0.8)\n            .zIndex(0.1)\n            .loopProperty(\"alphaFilter\", \"alpha\", { values: [0.5, 0], duration: 1000, pingPong: true, delay: 500 })\n            .effect()\n            .file(\"jb2a.extras.tmfx.outflow.circle.01\")\n            .attachTo(target, { locale: true })\n            .scaleToObject(3, { considerTokenScale: false })\n            .randomRotation()\n            .duration(30000)\n            .fadeIn(5000, { delay: 1000 })\n            .fadeOut(3500, { ease: \"easeInSine\" })\n            .scaleIn(0, 3500, { ease: \"easeInOutCubic\" })\n            .tint(0x870101)\n            .opacity(0.5)\n            .belowTokens()\n            .play();\n        }\n      } else {\n        selectedTokenMessage = `The creature does nothing this turn.`;\n      }\n      break;\n    }\n    case 9:\n    case 10:\n      content = \"The creature can act and move normally.\";\n      break;\n  }\n  ChatMessage.create({ content: `Confusion roll for ${token.actor.name} is ${result}:<br> ` + content });\n  if (result === 1)\n    ChatMessage.create({\n      content: `Movement roll for ${token.actor.name} is ${directionResult}: ${token.actor.name} must move ${directionContent} using all (${token.actor.system.attributes.movement.walk} feet) of their movement.`,\n    });\n  if (result === 7 || result === 8) ChatMessage.create({ content: selectedTokenMessage });\n}\n\nif (args[0] === \"off\") {\n  const findEffect = token.actor.effects.find((effect) => effect.name === \"Confusion\");\n\n  if (findEffect) {\n    const changeIndex = findEffect.changes.findIndex(\n      (change) =>\n        change.key === \"system.attributes.movement.all\" &&\n        change.mode === CONST.ACTIVE_EFFECT_MODES.CUSTOM &&\n        change.value === 0\n    );\n\n    if (changeIndex !== -1) {\n      findEffect.changes.splice(changeIndex, 1);\n\n      await MidiQOL.socket().executeAsGM(\"updateEffects\", {\n        actorUuid: token.actor.uuid,\n        updates: [{ _id: findEffect.id, changes: findEffect.changes }],\n      });\n    } else {\n      console.log(\"Specified change not found in the Confusion effect.\");\n    }\n  } else {\n    console.log(\"Confusion effect not found on the actor.\");\n  }\n}\n"
          }
        }
      },
      "effects": [
        {
          "changes": [
            {
              "key": "flags.midi-qol.OverTime",
              "mode": 5,
              "value": "label=Confusion (End of Turn),turn=end,saveAbility=wis,saveDC=@attributes.spelldc,saveMagic=true,killAnim=true",
              "priority": 20
            },
            {
              "key": "macro.itemMacro",
              "value": "",
              "mode": 0,
              "priority": 20
            }
          ],
          "duration": {
            "seconds": null,
            "startTime": null,
            "rounds": 10,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": "#ffffff",
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName",
              "macroRepeat": "startEveryTurn"
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Confusion",
          "statuses": [],
          "_id": "zwoSXsak3zGDDOwW",
          "description": "",
          "origin": null,
          "_stats": {
            "coreVersion": "12.331",
            "systemId": null,
            "systemVersion": null,
            "createdTime": null,
            "modifiedTime": null,
            "lastModifiedBy": null,
            "compendiumSource": null,
            "duplicateSource": null
          },
          "img": "icons/magic/air/air-burst-spiral-teal-green.webp",
          "type": "base",
          "system": {},
          "sort": 0,
          "_key": "!actors.items.effects!sWFnd99cdZN8YDDm.5UrT3ieYUoMxuYK9.zwoSXsak3zGDDOwW"
        }
      ],
      "img": "icons/magic/air/air-burst-spiral-teal-green.webp",
      "folder": "qUHjLOJ6GhNjE4HD",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274673990,
        "modifiedTime": 1721274673990,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "5UrT3ieYUoMxuYK9",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.5UrT3ieYUoMxuYK9"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You make natural terrain in a 150-foot &amp;Reference[cube]{cube} in range look, sound, and smell like some other sort of natural terrain. Thus, open fields or a road can be made to resemble a swamp, hill, crevasse, or some other difficult or impassable terrain. A pond can be made to seem like a grassy meadow, a precipice like a gentle slope, or a rock-strewn gully like a wide and smooth road. Manufactured structures, equipment, and creatures within the area aren't changed in appearance.</p>\n<p>The tactile characteristics of the terrain are unchanged, so creatures entering the area are likely to see through the &amp;Reference[ill]{illusion}. If the difference isn't obvious by touch, a creature carefully examining the &amp;Reference[ill]{illusion} can attempt an &amp;Reference[int]{Intelligence} (&amp;Reference[inv]{Investigation}) check against your spell save DC to disbelieve it. A creature who discerns the &amp;Reference[ill]{illusion} for what it is, sees it as a vague image superimposed on the terrain.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "249",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "minute",
          "cost": 10,
          "condition": ""
        },
        "duration": {
          "value": "24",
          "units": "hour"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 150,
          "units": "ft",
          "type": "cube",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 300,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 4,
        "school": "ill",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Hallucinatory Terrain",
      "flags": {
        "ddbimporter": {
          "id": 138033,
          "definitionId": 2136,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Hallucinatory Terrain",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 249,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/environment/wilderness/cave-entrance-vulcano.webp",
      "folder": "CckA9KDh0fOPelFO",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274674135,
        "modifiedTime": 1721274674135,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "EXd7G0sxFz44Q1lD",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.EXd7G0sxFz44Q1lD"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You gain the ability to move or manipulate creatures or objects by thought. When you cast the spell, and as your action each round for the duration, you can exert your will on one creature or object that you can see within range, causing the appropriate effect below. You can affect the same target round after round, or choose a new one at any time. If you switch targets, the prior target is no longer affected by the spell.</p>\n<p><strong>Creature.</strong> You can try to move a Huge or smaller creature. Make an ability check with your spellcasting ability contested by the creature's &amp;Reference[str]{Strength} check. If you win the contest, you move the creature up to 30 feet in any direction, including upward but not beyond the range of this spell. Until the end of your next turn, the creature is &amp;Reference[restrained]{restrained} in your telekinetic grip. A creature lifted upward is suspended in mid-air.</p>\n<p>On subsequent rounds, you can use your action to attempt to maintain your telekinetic grip on the creature by repeating the contest.</p>\n<p><strong>Object.</strong> You can try to move an object that weighs up to 1,000 pounds. If the object isn't being worn or carried, you automatically move it up to 30 feet in any direction, but not beyond the range of this spell.</p>\n<p>If the object is worn or carried by a creature, you must make an ability check with your spellcasting ability contested by that creature's &amp;Reference[str]{Strength} check. If you succeed, you pull the object away from that creature and can move it up to 30 feet in any direction but not beyond the range of this spell.</p>\n<p>You can exert fine control on objects with your telekinetic grip, such as manipulating a simple tool, opening a door or a container, stowing or retrieving an item from an open container, or pouring the contents from a vial.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "280",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "10",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 60,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 5,
        "school": "trs",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Telekinesis",
      "flags": {
        "ddbimporter": {
          "id": 138834,
          "definitionId": 2273,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Telekinesis",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 280,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control",
            "Movement"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/magic/earth/projectile-spiked-stone-boulder-brown.webp",
      "folder": "Muf6CObMiNg37DS4",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675135,
        "modifiedTime": 1721274675135,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "udXNtP39nIL7e8ys",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.udXNtP39nIL7e8ys"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>An &amp;Reference[invisible]{invisible} wall of &amp;Reference[force]{force} springs into existence at a point you choose within range. The wall appears in any orientation you choose, as a horizontal or vertical barrier or at an angle. It can be free floating or resting on a solid surface. You can form it into a hemispherical dome or a &amp;Reference[sphere]{sphere} with a radius of up to 10 feet, or you can shape a flat surface made up of ten 10-foot-by-10-foot panels. Each panel must be contiguous with another panel. In any form, the wall is 1/4 inch thick. It lasts for the duration. If the wall cuts through a creature's space when it appears, the creature is pushed to one side of the wall (your choice which side).</p>\n<p>Nothing can physically pass through the wall. It is immune to all damage and can't be dispelled by <strong>dispel magic</strong>. A disintegrate spell destroys the wall instantly, however. The wall also extends into the Ethereal Plane, blocking ethereal travel through the wall.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "285",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "10",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 100,
          "units": "ft",
          "type": "wall",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 120,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 5,
        "school": "evo",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Wall of Force",
      "flags": {
        "ddbimporter": {
          "id": 138916,
          "definitionId": 2292,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Wall of Force",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 285,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control",
            "Warding"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/magic/air/air-burst-spiral-large-blue.webp",
      "folder": "rkqMMY58A8Xdl9Mg",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274675755,
        "modifiedTime": 1721274675755,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "jYNx81DMzU7fgQND",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.jYNx81DMzU7fgQND"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>For the duration, you can read the thoughts of certain creatures. When you cast the spell and as your action on each turn until the spell ends, you can focus your mind on any one creature that you can see within 30 feet of you. If the creature you choose has an &amp;Reference[int]{Intelligence} of 3 or lower or doesn’t speak any language, the creature is unaffected.</p>\n<p>You initially learn the surface thoughts of the creature—what is most on its mind in that moment. As an action, you can either shift your attention to another creature’s thoughts or attempt to probe deeper into the same creature’s mind. If you probe deeper, the target must make a &amp;Reference[wis]{Wisdom} saving throw. If it fails, you gain &amp;Reference[ins]{insight} into its reasoning (if any), its emotional state, and something that looms large in its mind (such as something it worries over, loves, or hates). If it succeeds, the spell ends. Either way, the target knows that you are probing into its mind, and unless you shift your attention to another creature’s thoughts, the creature can use its action on its turn to make an &amp;Reference[int]{Intelligence} check contested by your &amp;Reference[int]{Intelligence} check; if it succeeds, the spell ends.</p>\n<p>Questions verbally directed at the target creature naturally shape the course of its thoughts, so this spell is particularly effective as part of an interrogation.</p>\n<p>You can also use this spell to detect the presence of thinking creatures you can’t see. When you cast the spell or as your action during the duration, you can search for thoughts within 30 feet of you. The spell can penetrate barriers, but 2 feet of rock, 2 inches of any metal other than lead, or a thin sheet of lead blocks you. You can’t detect a creature with an &amp;Reference[int]{Intelligence} of 3 or lower or one that doesn’t speak any language.</p>\n<p>Once you detect the presence of a creature in this way, you can read its thoughts for the rest of the duration as described above, even if you can’t see it, but it must still be within range.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "231",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "self",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "util",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 2,
        "school": "div",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Detect Thoughts",
      "flags": {
        "ddbimporter": {
          "id": 136574,
          "definitionId": 2067,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Detect Thoughts",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 231,
              "sourceType": 1
            }
          ],
          "tags": [
            "Social",
            "Detection"
          ],
          "version": "5.1.27",
          "effectsApplied": true,
          "chrisEffectsApplied": true,
          "chrisPreEffectName": "Detect Thoughts"
        },
        "custom-character-sheet-sections": {
          "sectionName": ""
        },
        "midi-qol": {
          "effectActivation": false,
          "onUseMacroName": "[postActiveEffects]function.chrisPremades.macros.detectThoughts.item",
          "onUseMacroParts": {
            "items": {
              "0": {
                "macroName": "function.chrisPremades.macros.detectThoughts.item",
                "option": "postActiveEffects"
              }
            }
          },
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "nodam": false,
          "fulldam": false,
          "halfdam": false,
          "rollOther": false,
          "critOther": false,
          "magicdam": false,
          "magiceffect": false,
          "concentration": false,
          "toggleEffect": false,
          "autoFailFriendly": false,
          "offHandWeapon": false,
          "ignoreTotalCover": false,
          "autoSaveFriendly": false,
          "confirmTargets": "default"
        },
        "autoanimations": {
          "id": "7bf5c74e-fef9-4068-a08a-d09619b7e088",
          "label": "Detect Thoughts",
          "macro": {
            "enable": false,
            "playWhen": "0"
          },
          "menu": "aura",
          "primary": {
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "detectmagic",
              "variant": "01",
              "color": "purple",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": true,
              "alpha": false,
              "alphaMax": 0.5,
              "alphaMin": -0.5,
              "alphaDuration": 1000,
              "breath": false,
              "breathMax": 1.05,
              "breathMin": 0.95,
              "breathDuration": 1000,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isRadius": true,
              "isWait": false,
              "opacity": 1,
              "playbackRate": 1,
              "playOn": "source",
              "size": 6,
              "tint": false,
              "tintColor": "#FFFFFF",
              "tintSaturate": 0,
              "unbindAlpha": false,
              "unbindVisibility": false,
              "zIndex": 1
            }
          },
          "secondary": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": true,
              "isWait": false,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "size": 1.5,
              "zIndex": 1
            }
          },
          "soundOnly": {
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            }
          },
          "source": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "isWait": true,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "size": 1,
              "zIndex": 1
            }
          },
          "target": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "opacity": 1,
              "persistent": false,
              "repeat": 1,
              "repeatDelay": 250,
              "size": 1,
              "unbindAlpha": false,
              "unbindVisibility": false,
              "zIndex": 1
            }
          },
          "isEnabled": true,
          "isCustomized": true,
          "fromAmmo": false,
          "version": 5
        },
        "exportSource": {
          "world": "development-testing",
          "system": "dnd5e",
          "coreVersion": "10.291",
          "systemVersion": "2.1.4"
        },
        "rest-recovery": {
          "data": {
            "recovery": {
              "enabled": false
            }
          }
        },
        "chris-premades": {
          "info": {
            "name": "Detect Thoughts",
            "version": "0.7.01",
            "mutation": {
              "self": "Detect Thoughts - Probe Deeper"
            }
          }
        },
        "dnd5e": {}
      },
      "effects": [],
      "img": "icons/commodities/biological/organ-brain-pink.webp",
      "folder": "Sve3VzpVw1SFqYSn",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274674767,
        "modifiedTime": 1721274674767,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "4hUyg7Iyl0hwpIzw",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.4hUyg7Iyl0hwpIzw"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>One creature or loose object of your choice that you can see within range rises vertically, up to 20 feet, and remains suspended there for the duration. The spell can levitate a target that weighs up to 500 pounds. An unwilling creature that succeeds on a &amp;Reference[con]{Constitution} saving throw is unaffected.</p>\n<p>The target can move only by pushing or pulling against a fixed object or surface within reach (such as a wall or a ceiling), which allows it to move as if it were climbing. You can change the target's altitude by up to 20 feet in either direction on your turn. If you are the target, you can move up or down as part of your move. Otherwise, you can use your action to move the target, which must remain within the spell's range.</p>\n<p>When the spell ends, the target floats gently to the ground if it is still aloft.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "255",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "10",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 1,
          "units": "",
          "type": "creature",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 60,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "con",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 2,
        "school": "trs",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Levitate",
      "flags": {
        "ddbimporter": {
          "id": 138393,
          "definitionId": 2165,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Levitate",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 255,
              "sourceType": 1
            }
          ],
          "tags": [
            "Movement"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/magic/control/debuff-energy-hold-teal-blue.webp",
      "folder": "Muf6CObMiNg37DS4",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274674959,
        "modifiedTime": 1721274674959,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "2eyJMEIR70dn5mUs",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.2eyJMEIR70dn5mUs"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You attempt to beguile a creature that you can see within range. It must succeed on a &amp;Reference[wis]{Wisdom} saving throw or be &amp;Reference[charmed]{charmed} by you for the duration. If you or creatures that are friendly to you are fighting it, it has advantage on the saving throw.</p>\n<p>While the creature is &amp;Reference[charmed]{charmed}, you have a telepathic link with it as long as the two of you are on the same plane of existence. You can use this telepathic link to issue commands to the creature while you are conscious (no action required), which it does its best to obey. You can specify a simple and general course of action, such as \"Attack that creature,\" \"Run over there,\" or \"Fetch that object.\" If the creature completes the order and doesn't receive further direction from you, it defends and preserves itself to the best of its ability.</p>\n<p>You can use your action to take total and precise control of the target. Until the end of your next turn, the creature takes only the actions you choose, and doesn't do anything that you don't allow it to do. During this time, you can also cause the creature to use a reaction, but this requires you to use your own reaction as well.</p>\n<p>Each time the target takes damage, it makes a new &amp;Reference[wis]{Wisdom} saving throw against the spell. If the saving throw succeeds, the spell ends.</p>\n<p><em><strong>At Higher Levels.</strong></em> When you cast this spell with a 9th-level spell slot, the duration is &amp;Reference[concentration]{concentration}, up to 8 hours.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "235",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "hour"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 1,
          "units": "",
          "type": "creature",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 60,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "wis",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 8,
        "school": "enc",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Dominate Monster",
      "flags": {
        "ddbimporter": {
          "id": 136656,
          "definitionId": 2077,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Dominate Monster",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 235,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [
        {
          "changes": [
            {
              "key": "macro.CE",
              "mode": 0,
              "value": "Charmed",
              "priority": 20
            }
          ],
          "duration": {
            "seconds": 3600,
            "startTime": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": "#ffffff",
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName"
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Dominate Monster - Charmed",
          "statuses": [],
          "_id": "58qQecyzGEp3kuUA",
          "description": "",
          "origin": null,
          "_stats": {
            "coreVersion": "12.331",
            "systemId": null,
            "systemVersion": null,
            "createdTime": null,
            "modifiedTime": null,
            "lastModifiedBy": null,
            "compendiumSource": null,
            "duplicateSource": null
          },
          "img": "icons/creatures/unholy/demon-horned-black-yellow.webp",
          "type": "base",
          "system": {},
          "sort": 0,
          "_key": "!actors.items.effects!sWFnd99cdZN8YDDm.hl49HO4Uqe3dQoh6.58qQecyzGEp3kuUA"
        }
      ],
      "img": "icons/creatures/unholy/demon-horned-black-yellow.webp",
      "folder": "qUHjLOJ6GhNjE4HD",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274674796,
        "modifiedTime": 1721274674796,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "hl49HO4Uqe3dQoh6",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.hl49HO4Uqe3dQoh6"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<p><b>Special Notes: self only.</b></p>\n\n<div class=\"ddb\">\n<p>You and up to eight willing creatures who link hands in a circle are transported to a different plane of existence. You can specify a target destination in general terms, such as the City of Brass on the &amp;Reference[elemental]{Elemental} Plane of &amp;Reference[fire]{Fire} or the palace of Dispater on the second level of the Nine Hells, and you appear in or near that destination. If you are trying to reach the City of Brass, for example, you might arrive in its Street of Steel, before its Gate of Ashes, or looking at the city from across the Sea of &amp;Reference[fire]{Fire}, at the GM's discretion.</p>\n<p>Alternatively, if you know the sigil sequence of a teleportation circle on another plane of existence, this spell can take you to that circle. If the teleportation circle is too small to hold all the creatures you transported, they appear in the closest unoccupied spaces next to the circle.</p>\n<p>You can use this spell to banish an unwilling creature to another plane. Choose a creature within your reach and make a melee spell attack against it. On a hit, the creature must make a &amp;Reference[cha]{Charisma} saving throw. If the creature fails this save, it is transported to a random location on the plane of existence you specify. A creature so transported must find its own way back to your current plane of existence.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "266",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "self",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "touch"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "cha",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 7,
        "school": "con",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Plane Shift (self only)",
      "flags": {
        "ddbimporter": {
          "id": 138554,
          "definitionId": 2206,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Plane Shift",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 266,
              "sourceType": 1
            }
          ],
          "tags": [
            "Teleportation",
            "Banishment"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/skills/targeting/target-glowing-yellow.webp",
      "folder": "e8UeRF8mmfaJRx4e",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "12.331",
        "createdTime": 1721274673649,
        "modifiedTime": 1721274673649,
        "lastModifiedBy": "6yhz13iFYYklKtgA",
        "compendiumSource": null,
        "duplicateSource": null
      },
      "sort": 0,
      "_id": "Xil6FQi1mPBnlGP7",
      "_key": "!actors.items!sWFnd99cdZN8YDDm.Xil6FQi1mPBnlGP7"
    }
  ],
  "effects": [],
  "folder": "ESzjRzm6DRDI0Q26",
  "sort": 0,
  "ownership": {
    "default": 0,
    "6yhz13iFYYklKtgA": 3
  },
  "flags": {
    "dnd5e": {},
    "monsterMunch": {
      "url": "https://www.dndbeyond.com/monsters/17175-mind-flayer-arcanist",
      "img": "https://www.dndbeyond.com/avatars/68/53/636460903219259112.png",
      "tokenImg": "https://www.dndbeyond.com/avatars/9/18/636322598566818119.jpeg",
      "isStockImg": false,
      "spellList": {
        "class": [
          "detect magic",
          "disguise self",
          "shield",
          "sleep",
          "blur",
          "invisibility",
          "ray of enfeeblement",
          "clairvoyance",
          "lightning bolt",
          "sending",
          "confusion",
          "hallucinatory terrain",
          "telekinesis",
          "wall of force"
        ],
        "pact": [],
        "atwill": [
          "blade ward",
          "dancing lights",
          "mage hand",
          "shocking grasp"
        ],
        "innate": [
          {
            "name": "detect thoughts",
            "type": "atwill",
            "value": null,
            "innate": true
          },
          {
            "name": "levitate",
            "type": "atwill",
            "value": null,
            "innate": true
          },
          {
            "name": "dominate monster",
            "type": "day",
            "value": "1",
            "innate": true
          },
          {
            "name": "plane shift",
            "type": "day",
            "value": "1",
            "innate": true
          }
        ],
        "edgeCases": [
          {
            "name": "plane shift",
            "type": "innate",
            "edge": "self only"
          }
        ],
        "material": false,
        "innateMatch": false
      },
      "overTime": [
        "Tentacles"
      ]
    },
    "ddbimporter": {
      "id": 17175,
      "entityTypeId": 779871897,
      "creatureGroupId": null,
      "creatureFlags": [],
      "version": "5.1.27",
      "isLegacy": false,
      "flatAC": false
    }
  },
  "_stats": {
    "systemId": "dnd5e",
    "systemVersion": "3.3.1",
    "coreVersion": "12.331",
    "createdTime": 1721275299940,
    "modifiedTime": 1730039090547,
    "lastModifiedBy": "6yhz13iFYYklKtgA",
    "compendiumSource": null,
    "duplicateSource": null
  },
  "_key": "!actors!sWFnd99cdZN8YDDm"
}
