{
  "name": "Pixie",
  "type": "npc",
  "_id": "MuY6F1zYtjv3PgLm",
  "img": "https://www.dndbeyond.com/avatars/30834/691/638063894967407910.png",
  "system": {
    "currency": {
      "pp": 0,
      "gp": 0,
      "ep": 0,
      "sp": 0,
      "cp": 0
    },
    "abilities": {
      "str": {
        "value": 2,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "dex": {
        "value": 20,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "con": {
        "value": 8,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "int": {
        "value": 10,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "wis": {
        "value": 14,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      },
      "cha": {
        "value": 15,
        "proficient": 0,
        "max": null,
        "bonuses": {
          "check": "",
          "save": ""
        }
      }
    },
    "bonuses": {
      "mwak": {
        "attack": "",
        "damage": ""
      },
      "rwak": {
        "attack": "",
        "damage": ""
      },
      "msak": {
        "attack": "",
        "damage": ""
      },
      "rsak": {
        "attack": "",
        "damage": ""
      },
      "abilities": {
        "check": "",
        "save": "",
        "skill": ""
      },
      "spell": {
        "dc": ""
      }
    },
    "skills": {
      "acr": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ani": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "arc": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ath": {
        "ability": "str",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "dec": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "his": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ins": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "itm": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "inv": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "med": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "nat": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "prc": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "prf": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "per": {
        "ability": "cha",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "rel": {
        "ability": "int",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "slt": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "ste": {
        "ability": "dex",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 1,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      },
      "sur": {
        "ability": "wis",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "value": 0,
        "bonuses": {
          "check": "",
          "passive": ""
        }
      }
    },
    "tools": {},
    "spells": {
      "spell1": {
        "value": 0,
        "override": null
      },
      "spell2": {
        "value": 0,
        "override": null
      },
      "spell3": {
        "value": 0,
        "override": null
      },
      "spell4": {
        "value": 0,
        "override": null
      },
      "spell5": {
        "value": 0,
        "override": null
      },
      "spell6": {
        "value": 0,
        "override": null
      },
      "spell7": {
        "value": 0,
        "override": null
      },
      "spell8": {
        "value": 0,
        "override": null
      },
      "spell9": {
        "value": 0,
        "override": null
      },
      "pact": {
        "value": 0,
        "override": null
      }
    },
    "attributes": {
      "init": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonus": ""
      },
      "movement": {
        "burrow": null,
        "climb": null,
        "fly": 30,
        "swim": null,
        "walk": 10,
        "units": "ft",
        "hover": false
      },
      "attunement": {
        "max": 3
      },
      "senses": {
        "darkvision": 0,
        "blindsight": 0,
        "tremorsense": 0,
        "truesight": 0,
        "units": "ft",
        "special": ""
      },
      "spellcasting": "cha",
      "exhaustion": 0,
      "concentration": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "bonuses": {
          "save": ""
        },
        "limit": 1
      },
      "ac": {
        "flat": 15,
        "calc": "natural",
        "formula": ""
      },
      "hp": {
        "value": 1,
        "max": 1,
        "temp": 0,
        "tempmax": 0,
        "formula": "1d4 + -1"
      },
      "death": {
        "ability": "",
        "roll": {
          "min": null,
          "max": null,
          "mode": 0
        },
        "success": 0,
        "failure": 0
      }
    },
    "details": {
      "biography": {
        "value": "",
        "public": ""
      },
      "alignment": "Neutral Good",
      "race": null,
      "type": {
        "value": "fey",
        "subtype": ""
      },
      "environment": "Forest",
      "cr": 0.25,
      "spellLevel": 0,
      "source": {
        "book": "Monster Manual",
        "page": "253",
        "custom": "",
        "license": ""
      }
    },
    "resources": {
      "legact": {
        "value": 0,
        "max": 0
      },
      "legres": {
        "value": 0,
        "max": 0
      },
      "lair": {
        "value": false,
        "initiative": null
      }
    },
    "traits": {
      "size": "tiny",
      "di": {
        "value": [],
        "bypasses": [],
        "custom": ""
      },
      "dr": {
        "value": [],
        "bypasses": [],
        "custom": ""
      },
      "dv": {
        "value": [],
        "bypasses": [],
        "custom": ""
      },
      "dm": {
        "amount": {},
        "bypasses": []
      },
      "ci": {
        "value": [],
        "custom": ""
      },
      "languages": {
        "value": [
          "sylvan"
        ],
        "custom": ""
      }
    }
  },
  "prototypeToken": {
    "name": "Pixie",
    "displayName": 20,
    "actorLink": false,
    "appendNumber": false,
    "prependAdjective": false,
    "texture": {
      "src": "ddb-images/other/npc-token-Pixie.jpeg",
      "scaleX": 0.5,
      "scaleY": 0.5,
      "offsetX": 0,
      "offsetY": 0,
      "rotation": 0
    },
    "width": 1,
    "height": 1,
    "lockRotation": false,
    "rotation": 0,
    "alpha": 1,
    "disposition": -1,
    "displayBars": 20,
    "bar1": {
      "attribute": "attributes.hp"
    },
    "bar2": {
      "attribute": null
    },
    "light": {
      "alpha": 0.5,
      "angle": 360,
      "bright": 0,
      "coloration": 1,
      "dim": 0,
      "attenuation": 0.5,
      "luminosity": 0.5,
      "saturation": 0,
      "contrast": 0,
      "shadows": 0,
      "animation": {
        "type": null,
        "speed": 5,
        "intensity": 5,
        "reverse": false
      },
      "darkness": {
        "min": 0,
        "max": 1
      }
    },
    "sight": {
      "enabled": false,
      "range": 0,
      "angle": 360,
      "visionMode": "basic",
      "color": null,
      "attenuation": 0.1,
      "brightness": 0,
      "saturation": 0,
      "contrast": 0
    },
    "detectionModes": [],
    "flags": {
      "monks-tokenbar": {
        "include": "default"
      },
      "tagger": {
        "tags": [
          "dndbeyond",
          "ddb-importer",
          "fey"
        ]
      }
    },
    "randomImg": false
  },
  "items": [
    {
      "_id": "tOtNhxIkh8fSZcf0",
      "name": "Superior Invisibility",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p> The pixie magically turns &amp;Reference[invisible]{invisible} until its &amp;Reference[concentration]{concentration} ends (as if concentrating on a spell). Any equipment the pixie wears or carries is &amp;Reference[invisible]{invisible} with it.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "253",
          "custom": "",
          "license": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "spec"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "self",
          "prompt": true
        },
        "range": {
          "value": null,
          "units": "self",
          "long": null
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        }
      },
      "effects": [
        {
          "changes": [
            {
              "key": "macro.CE",
              "mode": 0,
              "value": "Invisible",
              "priority": 20
            }
          ],
          "duration": {
            "seconds": null,
            "startTime": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": null,
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName"
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Superior Invisibility feature",
          "statuses": [],
          "icon": "icons/magic/air/fog-gas-smoke-blue-gray.webp",
          "_id": "0LNwgMLZmhUDNYsG",
          "description": "",
          "origin": null,
          "_key": "!actors.items.effects!MuY6F1zYtjv3PgLm.tOtNhxIkh8fSZcf0.0LNwgMLZmhUDNYsG"
        }
      ],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {},
          "effectsApplied": true
        },
        "monsterMunch": {
          "titleHTML": "<strong>Superior Invisibility.</strong>",
          "fullName": "Superior Invisibility.",
          "actionCopy": false,
          "type": "action",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "concentration": true
        }
      },
      "img": "icons/magic/air/fog-gas-smoke-blue-gray.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": null,
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null
      },
      "_key": "!actors.items!MuY6F1zYtjv3PgLm.tOtNhxIkh8fSZcf0"
    },
    {
      "_id": "8NQ0BCiGzbGKRlSb",
      "name": "Magic Resistance",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong>Magic Resistance.</strong></em> The pixie has advantage on saving throws against spells and other magical effects.</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "253",
          "custom": "",
          "license": ""
        },
        "activation": {
          "cost": null,
          "type": "",
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<em><strong>Magic Resistance.</strong></em>",
          "fullName": "Magic Resistance.",
          "actionCopy": false,
          "type": "special",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/magic/defensive/shield-barrier-glowing-blue.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": null,
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null
      },
      "_key": "!actors.items!MuY6F1zYtjv3PgLm.8NQ0BCiGzbGKRlSb"
    },
    {
      "_id": "wloA6t6txedAJWBq",
      "name": "Innate Spellcasting",
      "type": "feat",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<section class=\"secret\">\n<p><em><strong>Innate Spellcasting.</strong></em> The pixie’s innate spellcasting ability is &amp;Reference[cha]{Charisma} (spell save DC 12). It can innately cast the following spells, requiring only its pixie dust as a component:</p><p>At will: druidcraft</p><p>1/day each: confusion, dancing lights, detect evil and good, detect thoughts, dispel magic, entangle, fly, phantasmal &amp;Reference[force]{force}, polymorph, sleep</p>\n</section>\nThe [[lookup @name]] uses [[lookup @item.name]].\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Monster Manual",
          "page": "253",
          "custom": "",
          "license": ""
        },
        "activation": {
          "cost": null,
          "type": "",
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": ""
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": ""
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": null,
          "amount": null,
          "scale": false
        },
        "ability": null,
        "actionType": null,
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "dc": null,
          "ability": "",
          "scaling": "flat"
        },
        "summons": null,
        "type": {
          "value": "monster",
          "subtype": ""
        },
        "properties": [],
        "requirements": "",
        "recharge": {
          "value": null,
          "charged": false
        }
      },
      "effects": [],
      "flags": {
        "ddbimporter": {
          "levelBonus": false,
          "dndbeyond": {}
        },
        "monsterMunch": {
          "titleHTML": "<em><strong>Innate Spellcasting.</strong></em>",
          "fullName": "Innate Spellcasting.",
          "actionCopy": false,
          "type": "special",
          "actionInfo": {
            "damage": {
              "parts": [],
              "versatile": ""
            },
            "baseAbility": null,
            "toHit": 0,
            "proficient": false,
            "extraAttackBonus": 0
          }
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default"
        }
      },
      "img": "icons/magic/unholy/orb-smoking-green.webp",
      "folder": null,
      "sort": 0,
      "ownership": {
        "default": 0
      },
      "_stats": {
        "systemId": null,
        "systemVersion": null,
        "coreVersion": null,
        "createdTime": null,
        "modifiedTime": null,
        "lastModifiedBy": null
      },
      "_key": "!actors.items!MuY6F1zYtjv3PgLm.wloA6t6txedAJWBq"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>Whispering to the spirits of &amp;Reference[nat]{nature}, you create one of the following effects within range:</p>\n<ul>\n<li>You create a tiny, harmless sensory effect that predicts what the weather will be at your location for the next 24 hours. The effect might manifest as a golden orb for clear skies, a cloud for rain, falling snowflakes for snow, and so on. This effect persists for 1 round.</li>\n<li>You instantly make a flower blossom, a seed pod open, or a leaf bud bloom.</li>\n<li>You create an instantaneous, harmless sensory effect, such as falling leaves, a puff of wind, the sound of a small animal, or the faint odor of skunk. The effect must fit in a 5-foot &amp;Reference[cube]{cube}.</li>\n<li>You instantly light or snuff out a candle, a torch, or a small campfire.</li>\n</ul>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "236",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 30,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": null,
          "max": "",
          "per": null,
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 0,
        "school": "trs",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": false
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Druidcraft",
      "flags": {
        "ddbimporter": {
          "id": 136700,
          "definitionId": 2080,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Druidcraft",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 236,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/creatures/tentacles/tentacles-thing-green.webp",
      "folder": "Muf6CObMiNg37DS4",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274674555,
        "modifiedTime": 1721274674555,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "Ei2uY815ZnwkXq9E",
      "_key": "!actors.items!MuY6F1zYtjv3PgLm.Ei2uY815ZnwkXq9E"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>This spell assaults and twists creatures' minds, spawning delusions and provoking uncontrolled action. Each creature in a 10-foot-radius &amp;Reference[sphere]{sphere} centered on a point you choose within range must succeed on a &amp;Reference[wis]{Wisdom} saving throw when you cast this spell or be affected by it.</p>\n<p>An affected target can't take reactions and must roll a d10 at the start of each of its turns to determine its behavior for that turn.</p>\n<table>\n<thead>\n<tr>\n<th>d10</th>\n<th>Behavior</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>The creature uses all its movement to move in a random direction. To determine the direction, roll a d8 and assign a direction to each die face. The creature doesn't take an action this turn.</td>\n</tr>\n<tr>\n<td>2-6</td>\n<td>The creature doesn't move or take actions this turn.</td>\n</tr>\n<tr>\n<td>7-8</td>\n<td>The creature uses its action to make a melee attack against a randomly determined creature within its reach. If there is no creature within its reach, the creature does nothing this turn.</td>\n</tr>\n<tr>\n<td>9-10</td>\n<td>The creature can act and move normally.</td>\n</tr>\n</tbody>\n</table><div id=\"table-link\">@UUID[Compendium.world.ddb-lost-mines-phandelver-tables.RollTable.kYKdNvAUgqNvA9Iz]{Open RollTable Confusion: Behavior}</div>\n<p> </p>\n<p>At the end of each of its turns, an affected target can make a &amp;Reference[wis]{Wisdom} saving throw. If it succeeds, this effect ends for that target.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 5th level or higher, the radius of the &amp;Reference[sphere]{sphere} increases by 5 feet for each slot level above 4th.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "224",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 10,
          "units": "ft",
          "type": "sphere",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 90,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "wis",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 4,
        "school": "enc",
        "properties": [
          "vocal",
          "somatic",
          "material",
          "concentration"
        ],
        "materials": {
          "value": "three nut shells",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Confusion",
      "flags": {
        "ddbimporter": {
          "id": 136256,
          "definitionId": 2038,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Confusion",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 224,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dae": {
          "macro": {
            "name": "Confusion",
            "type": "script",
            "scope": "global",
            "command": "if (args[0] === \"each\") {\n  const findEffect = token.actor.effects.find((effect) => effect.name === \"Confusion\");\n\n  if (findEffect) {\n    const changeIndex = findEffect.changes.findIndex(\n      (change) =>\n        change.key === \"system.attributes.movement.all\" &&\n        change.mode === CONST.ACTIVE_EFFECT_MODES.CUSTOM &&\n        change.value === 0\n    );\n\n    if (changeIndex !== -1) {\n      findEffect.changes.splice(changeIndex, 1);\n\n      await MidiQOL.socket().executeAsGM(\"updateEffects\", {\n        actorUuid: token.actor.uuid,\n        updates: [{ _id: findEffect.id, changes: findEffect.changes }],\n      });\n    } else {\n      console.log(\"Specified change not found in the Confusion effect.\");\n    }\n  } else {\n    console.log(\"Confusion effect not found on the actor.\");\n  }\n\n  const hasEffectApplied = await game.dfreds.effectInterface.hasEffectApplied(\"Reaction\", token.actor.uuid);\n  if (!hasEffectApplied) {\n    game.dfreds.effectInterface.addEffect({ effectName: \"Reaction\", uuid: token.actor.uuid });\n  }\n\n  const confusionRoll = await new CONFIG.Dice.DamageRoll(\"1d10\").evaluate({ async: true });\n  await MidiQOL.displayDSNForRoll(confusionRoll, \"damageRoll\");\n  const result = confusionRoll.total;\n  let content;\n  let selectedTokenMessage;\n  let directionResult;\n  let directionContent;\n  switch (result) {\n    case 1: {\n      content = \"The creature uses all its movement to move in a random direction. To determine the direction, roll a d8 and assign a direction to each die face. The creature doesn't take an action this turn.\";\n      const directionRoll = await new CONFIG.Dice.DamageRoll(\"1d8\").evaluate({ async: true });\n      await MidiQOL.displayDSNForRoll(directionRoll, \"damageRoll\");\n      directionResult = directionRoll.total;\n      directionContent = null;\n      switch (directionResult) {\n        case 1:\n          directionContent = \"North\";\n          break;\n        case 2:\n          directionContent = \"South\";\n          break;\n        case 3:\n          directionContent = \"East\";\n          break;\n        case 4:\n          directionContent = \"West\";\n          break;\n        case 5:\n          directionContent = \"Northwest\";\n          break;\n        case 6:\n          directionContent = \"Northeast\";\n          break;\n        case 7:\n          directionContent = \"Southwest\";\n          break;\n        case 8:\n          directionContent = \"Southeast\";\n          break;\n      }\n      break;\n    }\n    case 2:\n    case 3:\n    case 4:\n    case 5:\n    case 6: {\n      content = \"The creature doesn't move or take actions this turn.\";\n      const findEffect = token.actor.effects.find((effect) => effect.name === \"Confusion\");\n      if (findEffect)\n        findEffect.changes.push({\n          key: \"system.attributes.movement.all\",\n          mode: CONST.ACTIVE_EFFECT_MODES.CUSTOM,\n          value: 0,\n          priority: 20,\n        });\n      await MidiQOL.socket().executeAsGM(\"updateEffects\", {\n        actorUuid: token.actor.uuid,\n        updates: [{ _id: findEffect.id, changes: findEffect.changes }],\n      });\n      break;\n    }\n    case 7:\n    case 8: {\n      content = \"The creature uses its action to make a melee attack against a randomly determined creature within its reach. If there is no creature within its reach, the creature does nothing this turn.\";\n      const rangeCheck = MidiQOL.findNearby(null, token.actor, token.actor.system.attributes.movement.walk, {\n        includeToken: false,\n      });\n      if (rangeCheck.length > 0) {\n        const randomSelection = rangeCheck[Math.floor(Math.random() * rangeCheck.length)];\n        selectedTokenMessage = `The creature must move to ${randomSelection.actor.name} and attack them with a melee attack.`;\n        if (game.modules.get(\"sequencer\")?.active) {\n          const target = randomSelection;\n          new Sequence()\n            .effect()\n            .from(target)\n            .belowTokens()\n            .attachTo(target, { locale: true })\n            .scaleToObject(1, { considerTokenScale: true })\n            .spriteRotation(target.rotation * -1)\n            .filter(\"Glow\", { color: 0x911a1a, distance: 15 })\n            .duration(30000)\n            .fadeIn(2000, { delay: 1000 })\n            .fadeOut(3500, { ease: \"easeInSine\" })\n            .opacity(0.8)\n            .zIndex(0.1)\n            .loopProperty(\"alphaFilter\", \"alpha\", { values: [0.5, 0], duration: 1000, pingPong: true, delay: 500 })\n            .effect()\n            .file(\"jb2a.extras.tmfx.outflow.circle.01\")\n            .attachTo(target, { locale: true })\n            .scaleToObject(3, { considerTokenScale: false })\n            .randomRotation()\n            .duration(30000)\n            .fadeIn(5000, { delay: 1000 })\n            .fadeOut(3500, { ease: \"easeInSine\" })\n            .scaleIn(0, 3500, { ease: \"easeInOutCubic\" })\n            .tint(0x870101)\n            .opacity(0.5)\n            .belowTokens()\n            .play();\n        }\n      } else {\n        selectedTokenMessage = `The creature does nothing this turn.`;\n      }\n      break;\n    }\n    case 9:\n    case 10:\n      content = \"The creature can act and move normally.\";\n      break;\n  }\n  ChatMessage.create({ content: `Confusion roll for ${token.actor.name} is ${result}:<br> ` + content });\n  if (result === 1)\n    ChatMessage.create({\n      content: `Movement roll for ${token.actor.name} is ${directionResult}: ${token.actor.name} must move ${directionContent} using all (${token.actor.system.attributes.movement.walk} feet) of their movement.`,\n    });\n  if (result === 7 || result === 8) ChatMessage.create({ content: selectedTokenMessage });\n}\n\nif (args[0] === \"off\") {\n  const findEffect = token.actor.effects.find((effect) => effect.name === \"Confusion\");\n\n  if (findEffect) {\n    const changeIndex = findEffect.changes.findIndex(\n      (change) =>\n        change.key === \"system.attributes.movement.all\" &&\n        change.mode === CONST.ACTIVE_EFFECT_MODES.CUSTOM &&\n        change.value === 0\n    );\n\n    if (changeIndex !== -1) {\n      findEffect.changes.splice(changeIndex, 1);\n\n      await MidiQOL.socket().executeAsGM(\"updateEffects\", {\n        actorUuid: token.actor.uuid,\n        updates: [{ _id: findEffect.id, changes: findEffect.changes }],\n      });\n    } else {\n      console.log(\"Specified change not found in the Confusion effect.\");\n    }\n  } else {\n    console.log(\"Confusion effect not found on the actor.\");\n  }\n}\n"
          }
        }
      },
      "effects": [
        {
          "icon": "icons/magic/air/air-burst-spiral-teal-green.webp",
          "changes": [
            {
              "key": "flags.midi-qol.OverTime",
              "mode": 5,
              "value": "label=Confusion (End of Turn),turn=end,saveAbility=wis,saveDC=@attributes.spelldc,saveMagic=true,killAnim=true",
              "priority": 20
            },
            {
              "key": "macro.itemMacro",
              "value": "",
              "mode": 0,
              "priority": 20
            }
          ],
          "duration": {
            "seconds": null,
            "startTime": null,
            "rounds": 10,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": null,
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName",
              "macroRepeat": "startEveryTurn"
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Confusion",
          "statuses": [],
          "_id": "zwoSXsak3zGDDOwW",
          "description": "",
          "origin": null,
          "_key": "!actors.items.effects!MuY6F1zYtjv3PgLm.BJI5D7Vm68jIOkh1.zwoSXsak3zGDDOwW"
        }
      ],
      "img": "icons/magic/air/air-burst-spiral-teal-green.webp",
      "folder": "qUHjLOJ6GhNjE4HD",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274673990,
        "modifiedTime": 1721274673990,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "BJI5D7Vm68jIOkh1",
      "_key": "!actors.items!MuY6F1zYtjv3PgLm.BJI5D7Vm68jIOkh1"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You create up to four torch-sized lights within range, making them appear as torches, lanterns, or glowing orbs that hover in the air for the duration. You can also combine the four lights into one glowing vaguely &amp;Reference[humanoid]{humanoid} form of Medium size. Whichever form you choose, each light sheds dim light in a 10-foot radius.</p>\n<p>As a bonus action on your turn, you can move the lights up to 60 feet to a new spot within range. A light must be within 20 feet of another light created by this spell, and a light winks out if it exceeds the spell's range.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "230",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 120,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 0,
        "school": "evo",
        "properties": [
          "vocal",
          "somatic",
          "material",
          "concentration"
        ],
        "materials": {
          "value": "a bit of phosphorus or wychwood, or a glowworm",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "prepared",
          "prepared": false
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Dancing Lights",
      "flags": {
        "ddbimporter": {
          "id": 136489,
          "definitionId": 2057,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Dancing Lights",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 230,
              "sourceType": 1
            }
          ],
          "tags": [
            "Utility"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "onUseMacroName": "[postActiveEffects]ItemMacro",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dae": {
          "macro": {
            "name": "Dancing Lights",
            "type": "script",
            "scope": "global",
            "command": "if (!DDBImporter?.EffectHelper.checkJB2a(true, true, true)) return false;\n\nconst summonType = 'Dancing light';\nconst caster = game.actors.get(args[0].actor._id);\nconst spawnedIds = [];\n\n// this is called when the item is created, you can run this manually if your actors are not created yet\n// await DDBImporter.EffectHelper._createJB2aActors(\"Dancing Lights\", \"Dancing light\");\n\nconst lightActors = game.actors.filter((f) =>f.name.includes(summonType));\n\nconst actorChoices = lightActors.map((actor) => {\n  const labelSrc = actor.img.replace(/\\\\d+x\\\\d+\\\\.webm$/, 'Thumb.webp');\n  const labelText = actor.name.split(' - ')[1];\n  return {\n    label: `<img src=\"${labelSrc}\" width=\"40\" height=\"40\" style=\"border:0px\"><br>${labelText}`,\n    value: actor,\n  };\n});\n\nasync function preEffects(template, update) {\n  //prep summoning area\n  new Sequence()\n    .effect()\n    .atLocation(template)\n    .file(getJB2aName(update.token.name))\n    .center()\n    .scale(1.5)\n    .belowTokens()\n    .play();\n}\n\nasync function postEffects(template, token) {\n  //bring in our minion\n  new Sequence().animation().on(token).fadeIn(2000).play();\n}\n\nfunction getJB2aName(colorChoice) {\n  if (game.modules.get('jb2a_patreon')?.active) {\n    if (colorChoice.includes('Blue')) {\n      return 'jb2a.markers.light.intro.blue';\n    } else if (colorChoice.includes('Green')) {\n      return 'jb2a.markers.light.intro.green';\n    } else if (colorChoice.includes('Yellow')) {\n      return 'jb2a.markers.light.intro.yellow02';\n    } else {\n      return 'jb2a.markers.light.intro.yellow';\n    }\n  } else {\n    return 'jb2a.markers.light.intro.blue';\n  }\n}\n\nfor (let i = 0; i < 4; i++) {\n  const choice = await warpgate.buttonDialog({\n    title: 'Choose your color:',\n    buttons: actorChoices,\n  });\n\n  if (!choice) break;\n\n  const updates = {\n    token: {\n      name: `${choice.name} of ${caster.name}`,\n      alpha: 0,\n    },\n    actor: {\n      name: `${choice.name} of ${caster.name}`,\n      system: {\n        attributes: {\n          hp: {\n            value: 100,\n            max: 100,\n          },\n        },\n        details: {\n          type: {\n            custom: 'NoTarget',\n            value: 'custom',\n          },\n        },\n      },\n    },\n    flags: {\n      'mid-qol': {\n        neverTarget: true,\n      }\n    }\n  };\n\n  const callbacks = {\n    pre: async (template, update) => {\n      preEffects(template, update);\n      await DDBImporter?.EffectHelper.wait(500);\n    },\n    post: async (template, token, updates) => {\n      postEffects(template, token);\n      await DDBImporter?.EffectHelper.wait(500);\n      const sourceActorOrToken = fromUuidSync(\n        updates.actor.flags.warpgate.control.actor\n      );\n      const sourceActor = sourceActorOrToken.actor ?? sourceActorOrToken;\n      const concentrationFlag = sourceActor.getFlag('midi-qol', 'concentration-data');\n      concentrationFlag.removeUuids.push(token.uuid);\n      await sourceActor.setFlag('midi-qol', 'concentration-data', concentrationFlag);\n    },\n  };\n\n  const options = { controllingActor: caster };\n  const ids = await warpgate.spawn(\n    await choice.getTokenDocument(),\n    updates,\n    callbacks,\n    options,\n  );\n\n  if (!ids) break;\n  spawnedIds.push(ids[0]);\n}\n\nawait token.actor.setFlag('midi-qol', 'spawnedTokenIds', spawnedIds);\nfor (const id of spawnedIds) {\n  const spawnedActor = canvas.scene.tokens.get(id).actor;\n  await DAE.setFlag(spawnedActor, 'spawnedByTokenUuid', token.document.uuid);\n}\n\nconst hookIdForSpawnedCreatures = Hooks.on('preDeleteToken', async (tokenDoc) => {\n  const sourceTokenUuid = tokenDoc.actor.getFlag('dae', 'spawnedByTokenUuid');\n  if (!sourceTokenUuid) return;\n  new Sequence()\n    .effect()\n    .atLocation(tokenDoc.object.center)\n    .file(`jb2a.smoke.puff.centered.grey.2`)\n    .scale(tokenDoc.width / canvas.scene.grid.distance)\n    .play();\n  const sourceActor = fromUuidSync(sourceTokenUuid).actor;\n  const spawnedIds = sourceActor.getFlag('midi-qol', 'spawnedTokenIds');\n  if (!spawnedIds) return;\n  const spawnedTokenDocs = [];\n  for (const i of spawnedIds) {\n    if (canvas.scene.tokens.get(i))\n      spawnedTokenDocs.push(canvas.scene.tokens.get(i));\n  }\n  if (spawnedTokenDocs.length === 1) {\n    await sourceActor.unsetFlag('midi-qol', 'spawnedTokenIds');\n    Hooks.off('preDeleteToken', hookIdForSpawnedCreatures);\n  }\n});\n"
          }
        }
      },
      "effects": [],
      "img": "icons/magic/light/explosion-star-glow-yellow.webp",
      "folder": "rkqMMY58A8Xdl9Mg",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274675268,
        "modifiedTime": 1721274675268,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "6tMltL4RVbNlm31L",
      "_key": "!actors.items!MuY6F1zYtjv3PgLm.6tMltL4RVbNlm31L"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>For the duration, you know if there is an &amp;Reference[aberration]{aberration}, &amp;Reference[celestial]{celestial}, &amp;Reference[elemental]{elemental}, &amp;Reference[fey]{fey}, &amp;Reference[fiend]{fiend}, or &amp;Reference[undead]{undead} within 30 feet of you, as well as where the creature is located. Similarly, you know if there is a place or object within 30 feet of you that has been magically consecrated or desecrated.</p>\n<p>The spell can penetrate most barriers, but it is blocked by 1 foot of stone, 1 inch of common metal, a thin sheet of lead, or 3 feet of wood or dirt.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "231",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "10",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 30,
          "units": "ft",
          "type": "sphere",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "div",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Detect Evil and Good",
      "flags": {
        "ddbimporter": {
          "id": 136555,
          "definitionId": 2064,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Detect Evil and Good",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 231,
              "sourceType": 1
            }
          ],
          "tags": [
            "Detection"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/magic/light/explosion-star-blue.webp",
      "folder": "Sve3VzpVw1SFqYSn",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274673345,
        "modifiedTime": 1721274673345,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "rcQp6cKhLIX8GTt4",
      "_key": "!actors.items!MuY6F1zYtjv3PgLm.rcQp6cKhLIX8GTt4"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>For the duration, you can read the thoughts of certain creatures. When you cast the spell and as your action on each turn until the spell ends, you can focus your mind on any one creature that you can see within 30 feet of you. If the creature you choose has an &amp;Reference[int]{Intelligence} of 3 or lower or doesn’t speak any language, the creature is unaffected.</p>\n<p>You initially learn the surface thoughts of the creature—what is most on its mind in that moment. As an action, you can either shift your attention to another creature’s thoughts or attempt to probe deeper into the same creature’s mind. If you probe deeper, the target must make a &amp;Reference[wis]{Wisdom} saving throw. If it fails, you gain &amp;Reference[ins]{insight} into its reasoning (if any), its emotional state, and something that looms large in its mind (such as something it worries over, loves, or hates). If it succeeds, the spell ends. Either way, the target knows that you are probing into its mind, and unless you shift your attention to another creature’s thoughts, the creature can use its action on its turn to make an &amp;Reference[int]{Intelligence} check contested by your &amp;Reference[int]{Intelligence} check; if it succeeds, the spell ends.</p>\n<p>Questions verbally directed at the target creature naturally shape the course of its thoughts, so this spell is particularly effective as part of an interrogation.</p>\n<p>You can also use this spell to detect the presence of thinking creatures you can’t see. When you cast the spell or as your action during the duration, you can search for thoughts within 30 feet of you. The spell can penetrate barriers, but 2 feet of rock, 2 inches of any metal other than lead, or a thin sheet of lead blocks you. You can’t detect a creature with an &amp;Reference[int]{Intelligence} of 3 or lower or one that doesn’t speak any language.</p>\n<p>Once you detect the presence of a creature in this way, you can read its thoughts for the rest of the duration as described above, even if you can’t see it, but it must still be within range.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "231",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "self",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "self"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "util",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 2,
        "school": "div",
        "properties": [
          "vocal",
          "somatic",
          "material",
          "concentration"
        ],
        "materials": {
          "value": "a copper piece",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Detect Thoughts",
      "flags": {
        "ddbimporter": {
          "id": 136574,
          "definitionId": 2067,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Detect Thoughts",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 231,
              "sourceType": 1
            }
          ],
          "tags": [
            "Social",
            "Detection"
          ],
          "version": "5.1.27",
          "effectsApplied": true,
          "chrisEffectsApplied": true,
          "chrisPreEffectName": "Detect Thoughts"
        },
        "custom-character-sheet-sections": {
          "sectionName": ""
        },
        "midi-qol": {
          "effectActivation": false,
          "onUseMacroName": "[postActiveEffects]function.chrisPremades.macros.detectThoughts.item",
          "onUseMacroParts": {
            "items": {
              "0": {
                "macroName": "function.chrisPremades.macros.detectThoughts.item",
                "option": "postActiveEffects"
              }
            }
          },
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "nodam": false,
          "fulldam": false,
          "halfdam": false,
          "rollOther": false,
          "critOther": false,
          "magicdam": false,
          "magiceffect": false,
          "concentration": false,
          "toggleEffect": false,
          "autoFailFriendly": false,
          "offHandWeapon": false,
          "ignoreTotalCover": false,
          "autoSaveFriendly": false,
          "confirmTargets": "default"
        },
        "autoanimations": {
          "id": "7bf5c74e-fef9-4068-a08a-d09619b7e088",
          "label": "Detect Thoughts",
          "macro": {
            "enable": false,
            "playWhen": "0"
          },
          "menu": "aura",
          "primary": {
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "detectmagic",
              "variant": "01",
              "color": "purple",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": true,
              "alpha": false,
              "alphaMax": 0.5,
              "alphaMin": -0.5,
              "alphaDuration": 1000,
              "breath": false,
              "breathMax": 1.05,
              "breathMin": 0.95,
              "breathDuration": 1000,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isRadius": true,
              "isWait": false,
              "opacity": 1,
              "playbackRate": 1,
              "playOn": "source",
              "size": 6,
              "tint": false,
              "tintColor": "#FFFFFF",
              "tintSaturate": 0,
              "unbindAlpha": false,
              "unbindVisibility": false,
              "zIndex": 1
            }
          },
          "secondary": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": true,
              "isWait": false,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "size": 1.5,
              "zIndex": 1
            }
          },
          "soundOnly": {
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            }
          },
          "source": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "isWait": true,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "size": 1,
              "zIndex": 1
            }
          },
          "target": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "opacity": 1,
              "persistent": false,
              "repeat": 1,
              "repeatDelay": 250,
              "size": 1,
              "unbindAlpha": false,
              "unbindVisibility": false,
              "zIndex": 1
            }
          },
          "isEnabled": true,
          "isCustomized": true,
          "fromAmmo": false,
          "version": 5
        },
        "exportSource": {
          "world": "development-testing",
          "system": "dnd5e",
          "coreVersion": "10.291",
          "systemVersion": "2.1.4"
        },
        "rest-recovery": {
          "data": {
            "recovery": {
              "enabled": false
            }
          }
        },
        "chris-premades": {
          "info": {
            "name": "Detect Thoughts",
            "version": "0.7.01",
            "mutation": {
              "self": "Detect Thoughts - Probe Deeper"
            }
          }
        },
        "dnd5e": {}
      },
      "effects": [],
      "img": "icons/commodities/biological/organ-brain-pink.webp",
      "folder": "Sve3VzpVw1SFqYSn",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274674767,
        "modifiedTime": 1721274674767,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "hJufShnukcwMUV8M",
      "_key": "!actors.items!MuY6F1zYtjv3PgLm.hJufShnukcwMUV8M"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>Choose one creature, object, or magical effect within range. Any spell of 3rd level or lower on the target ends. For each spell of 4th level or higher on the target, make an ability check using your spellcasting ability. The DC equals 10 + the spell's level. On a successful check, the spell ends.</p>\n<p><em><strong>At Higher Levels.</strong></em> When you cast this spell using a spell slot of 4th level or higher, you automatically end the effects of a spell on the target if the spell's level is equal to or less than the level of the spell slot you used.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "234",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "",
          "units": "inst"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "units": "",
          "type": "",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 120,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 3,
        "school": "abj",
        "properties": [
          "vocal",
          "somatic"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Dispel Magic",
      "flags": {
        "ddbimporter": {
          "id": 136615,
          "definitionId": 2072,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Dispel Magic",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 234,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [],
      "img": "icons/magic/light/orbs-hand-gray.webp",
      "folder": "QG5P4iTezYNjNLlu",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274673369,
        "modifiedTime": 1721274673369,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "OCaeM9sXT4XJImH7",
      "_key": "!actors.items!MuY6F1zYtjv3PgLm.OCaeM9sXT4XJImH7"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>Grasping weeds and vines sprout from the ground in a 20-foot square starting from a point within range. For the duration, these plants turn the ground in the area into difficult terrain.</p>\n<p>A creature in the area when you cast the spell must succeed on a &amp;Reference[str]{Strength} saving throw or be &amp;Reference[restrained]{restrained} by the entangling plants until the spell ends. A creature &amp;Reference[restrained]{restrained} by the plants can use its action to make a &amp;Reference[str]{Strength} check against your spell save DC. On a success, it frees itself.</p>\n<p>When the spell ends, the conjured plants wilt away.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "238",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 20,
          "units": "ft",
          "type": "square",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 90,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "str",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "con",
        "properties": [
          "vocal",
          "somatic",
          "concentration"
        ],
        "materials": {
          "value": "",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Entangle",
      "flags": {
        "ddbimporter": {
          "id": 136716,
          "definitionId": 2085,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Entangle",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 238,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        }
      },
      "effects": [
        {
          "icon": "icons/magic/nature/root-vine-entangle-foot-green.webp",
          "changes": [
            {
              "key": "macro.CE",
              "mode": 0,
              "value": "Restrained",
              "priority": 20
            },
            {
              "key": "flags.midi-qol.OverTime",
              "mode": 0,
              "value": "You can take an action to break free by rolling a Strength Ability Check",
              "priority": 20
            },
            {
              "key": "flags.midi-qol.OverTime",
              "mode": 0,
              "value": "turn=end, rollType=check, actionSave=true, saveAbility=str, saveDC=@attributes.spelldc, label=Restrained by Entangle",
              "priority": 20
            }
          ],
          "duration": {
            "seconds": 60,
            "startTime": null,
            "rounds": 10,
            "turns": null,
            "startRound": null,
            "startTurn": null,
            "combat": null
          },
          "tint": null,
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "noneName"
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "core": {}
          },
          "name": "Entangle - Restrained",
          "statuses": [],
          "_id": "dwMTBkmCa4cT96je",
          "description": "",
          "origin": null,
          "_key": "!actors.items.effects!MuY6F1zYtjv3PgLm.yoJ0O9axxRXNam0T.dwMTBkmCa4cT96je"
        }
      ],
      "img": "icons/magic/nature/root-vine-entangle-foot-green.webp",
      "folder": "e8UeRF8mmfaJRx4e",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274674057,
        "modifiedTime": 1721274674057,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "yoJ0O9axxRXNam0T",
      "_key": "!actors.items!MuY6F1zYtjv3PgLm.yoJ0O9axxRXNam0T"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>You touch a willing creature. The target gains a flying speed of 60 feet for the duration. When the spell ends, the target falls if it is still aloft, unless it can stop the fall.</p>\n<p><strong>At Higher Levels.</strong> When you cast this spell using a spell slot of 4th level or higher, you can target one additional creature for each slot level above 3rd.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "243",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "",
          "cost": null,
          "condition": ""
        },
        "duration": {
          "value": "10",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": null,
          "width": null,
          "units": "",
          "type": "creature",
          "prompt": true
        },
        "range": {
          "value": null,
          "long": null,
          "units": "touch"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 3,
        "school": "trs",
        "properties": [
          "vocal",
          "somatic",
          "material",
          "concentration"
        ],
        "materials": {
          "value": "a wing feather from any bird",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Fly",
      "flags": {
        "ddbimporter": {
          "id": 137868,
          "definitionId": 2111,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Fly",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 243,
              "sourceType": 1
            }
          ],
          "tags": [
            "Movement"
          ],
          "version": "5.1.27",
          "effectsApplied": true,
          "chrisEffectsApplied": true,
          "chrisPreEffectName": "Fly"
        },
        "midi-qol": {
          "forceCEOff": true,
          "effectActivation": false,
          "forceCEOn": false,
          "rollAttackPerTarget": "default",
          "itemCondition": "",
          "reactionCondition": "",
          "otherCondition": "",
          "effectCondition": "",
          "removeAttackDamageButtons": "default"
        },
        "custom-character-sheet-sections": {
          "sectionName": ""
        },
        "rest-recovery": {
          "data": {
            "recovery": {
              "enabled": false
            }
          }
        },
        "midiProperties": {
          "nodam": false,
          "fulldam": false,
          "halfdam": false,
          "autoFailFriendly": false,
          "autoSaveFriendly": false,
          "rollOther": false,
          "critOther": false,
          "offHandWeapon": false,
          "magicdam": false,
          "magiceffect": false,
          "concentration": false,
          "toggleEffect": false,
          "ignoreTotalCover": false,
          "confirmTargets": "default",
          "noConcentrationCheck": false
        },
        "chris-premades": {
          "info": {
            "name": "Fly",
            "version": "0.7.45",
            "hasAnimation": true
          }
        },
        "autoanimations": {
          "id": "a21b3999-3913-4ed7-a1d5-16c6740c6205",
          "label": "Fly",
          "levels3d": {
            "type": "explosion",
            "data": {
              "color01": "#FFFFFF",
              "color02": "#FFFFFF",
              "spritePath": "modules/levels-3d-preview/assets/particles/dust.png"
            },
            "sound": {
              "enable": false
            },
            "secondary": {
              "enable": false,
              "data": {
                "color01": "#FFFFFF",
                "color02": "#FFFFFF",
                "spritePath": "modules/levels-3d-preview/assets/particles/dust.png"
              }
            }
          },
          "macro": {
            "enable": false
          },
          "meleeSwitch": {
            "video": {
              "dbSection": "range",
              "menuType": "weapon",
              "animation": "arrow",
              "variant": "regular",
              "color": "regular"
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "detect": "automatic",
              "range": 2,
              "returning": false,
              "switchType": "on"
            }
          },
          "menu": "melee",
          "primary": {
            "video": {
              "dbSection": "melee",
              "menuType": "weapon",
              "animation": "club",
              "variant": "01",
              "color": "white",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "isWait": false,
              "opacity": 1,
              "playbackRate": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "secondary": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": true,
              "isWait": false,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1.5,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "soundOnly": {
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            }
          },
          "source": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "isWait": true,
              "opacity": 1,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "zIndex": 1
            }
          },
          "target": {
            "enable": false,
            "video": {
              "dbSection": "static",
              "menuType": "spell",
              "animation": "curewounds",
              "variant": "01",
              "color": "blue",
              "enableCustom": false,
              "customPath": ""
            },
            "sound": {
              "enable": false,
              "delay": 0,
              "repeat": 1,
              "repeatDelay": 250,
              "startTime": 0,
              "volume": 0.75
            },
            "options": {
              "addTokenWidth": false,
              "anchor": "0.5",
              "contrast": 0,
              "delay": 0,
              "elevation": 1000,
              "fadeIn": 250,
              "fadeOut": 500,
              "isMasked": false,
              "isRadius": false,
              "opacity": 1,
              "persistent": false,
              "repeat": 1,
              "repeatDelay": 250,
              "saturate": 0,
              "size": 1,
              "tint": false,
              "tintColor": "#FFFFFF",
              "unbindAlpha": false,
              "unbindVisibility": false,
              "zIndex": 1
            }
          },
          "isEnabled": false,
          "isCustomized": false,
          "fromAmmo": false,
          "version": 5
        },
        "dnd5e": {}
      },
      "effects": [
        {
          "icon": "icons/commodities/treasure/trinket-wing-white.webp",
          "changes": [
            {
              "key": "system.attributes.movement.fly",
              "mode": 4,
              "value": "60",
              "priority": 20
            }
          ],
          "duration": {
            "startTime": null,
            "seconds": null,
            "combat": null,
            "rounds": null,
            "turns": null,
            "startRound": null,
            "startTurn": null
          },
          "tint": null,
          "transfer": false,
          "disabled": false,
          "flags": {
            "dae": {
              "transfer": false,
              "stackable": "none",
              "selfTarget": false,
              "selfTargetAlways": false,
              "durationExpression": "",
              "macroRepeat": "none",
              "specialDuration": []
            },
            "ddbimporter": {
              "disabled": false
            },
            "midi-qol": {
              "forceCEOff": true
            },
            "dfreds-convenient-effects": {
              "description": ""
            },
            "core": {
              "statusId": ""
            },
            "ActiveAuras": {
              "isAura": false,
              "aura": "None",
              "radius": "undefined",
              "alignment": "",
              "type": "",
              "ignoreSelf": false,
              "height": false,
              "hidden": false,
              "displayTemp": false,
              "hostile": false,
              "onlyOnce": false
            },
            "effectmacro": {
              "onCreate": {
                "script": "await chrisPremades.macros.fly.animationStart(token, origin);"
              },
              "onDelete": {
                "script": "await await chrisPremades.macros.fly.animationEnd(token, origin);"
              }
            }
          },
          "_id": "9Fq76qcX7xoTN7vx",
          "origin": null,
          "name": "Fly",
          "description": "",
          "statuses": [],
          "_key": "!actors.items.effects!MuY6F1zYtjv3PgLm.n62C2z0zHkWAzBhQ.9Fq76qcX7xoTN7vx"
        }
      ],
      "img": "icons/commodities/treasure/trinket-wing-white.webp",
      "folder": "Muf6CObMiNg37DS4",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274674870,
        "modifiedTime": 1721274674870,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "n62C2z0zHkWAzBhQ",
      "_key": "!actors.items!MuY6F1zYtjv3PgLm.n62C2z0zHkWAzBhQ"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>This spell transforms a creature that you can see within range into a new form. An unwilling creature must make a &amp;Reference[wis]{Wisdom} saving throw to avoid the effect. The spell has no effect on a shapechanger or a creature with 0 hit points.</p>\n<p>The transformation lasts for the duration, or until the target drops to 0 hit points or dies. The new form can be any &amp;Reference[beast]{beast} whose challenge rating is equal to or less than the target's (or the target's level, if it doesn't have a challenge rating). The target's game statistics, including mental ability scores, are replaced by the statistics of the chosen &amp;Reference[beast]{beast}. It retains its alignment and personality.</p>\n<p>The target assumes the hit points of its new form. When it reverts to its normal form, the creature returns to the number of hit points it had before it transformed. If it reverts as a result of dropping to 0 hit points, any excess damage carries over to its normal form. As long as the excess damage doesn't reduce the creature's normal form to 0 hit points, it isn't knocked &amp;Reference[unconscious]{unconscious}.</p>\n<p>The creature is limited in the actions it can perform by the &amp;Reference[nat]{nature} of its new form, and it can't speak, cast spells, or take any other action that requires hands or speech.</p>\n<p>The target's gear melds into the new form. The creature can't activate, use, wield, or otherwise benefit from any of its equipment.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "266",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "hour"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 1,
          "units": "",
          "type": "creature",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 60,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "save",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "wis",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 4,
        "school": "trs",
        "properties": [
          "vocal",
          "somatic",
          "material",
          "concentration"
        ],
        "materials": {
          "value": "a caterpillar cocoon",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "none",
          "formula": ""
        }
      },
      "name": "Polymorph",
      "flags": {
        "ddbimporter": {
          "id": 138572,
          "definitionId": 2209,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Polymorph",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 266,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control",
            "Shapechanging"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default"
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true,
          "autoFailFriendly": true
        }
      },
      "effects": [],
      "img": "icons/creatures/abilities/dragon-breath-purple.webp",
      "folder": "Muf6CObMiNg37DS4",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274674215,
        "modifiedTime": 1721274674215,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "yVAHVESx2C6Z8dBd",
      "_key": "!actors.items!MuY6F1zYtjv3PgLm.yVAHVESx2C6Z8dBd"
    },
    {
      "type": "spell",
      "system": {
        "description": {
          "value": "<div class=\"ddb\">\n<p>This spell sends creatures into a magical slumber. Roll 5d8; the total is how many hit points of creatures this spell can affect. Creatures within 20 feet of a point you choose within range are affected in ascending order of their current hit points (ignoring &amp;Reference[unconscious]{unconscious} creatures).</p>\n<p>Starting with the creature that has the lowest current hit points, each creature affected by this spell falls &amp;Reference[unconscious]{unconscious} until the spell ends, the sleeper takes damage, or someone uses an action to shake or slap the sleeper awake. Subtract each creature’s hit points from the total before moving on to the creature with the next lowest hit points. A creature’s hit points must be equal to or less than the remaining total for that creature to be affected.</p>\n<p>&amp;Reference[undead]{Undead} and creatures immune to being &amp;Reference[charmed]{charmed} aren’t affected by this spell.</p>\n<p><em><strong>At Higher Levels.</strong></em> When you cast this spell using a spell slot of 2nd level or higher, roll an additional 2d8 for each slot level above 1st.</p>\n</div>",
          "chat": ""
        },
        "source": {
          "book": "Player’s Handbook",
          "page": "276",
          "license": "",
          "custom": ""
        },
        "activation": {
          "type": "action",
          "cost": 1,
          "condition": ""
        },
        "duration": {
          "value": "1",
          "units": "minute"
        },
        "cover": null,
        "crewed": false,
        "target": {
          "value": 20,
          "units": "ft",
          "type": "sphere",
          "width": null,
          "prompt": true
        },
        "range": {
          "value": 90,
          "long": null,
          "units": "ft"
        },
        "uses": {
          "value": 1,
          "max": "1",
          "per": "day",
          "recovery": "",
          "prompt": true
        },
        "consume": {
          "type": "",
          "target": "",
          "amount": null,
          "scale": false
        },
        "ability": "",
        "actionType": "other",
        "attack": {
          "bonus": "",
          "flat": false
        },
        "chatFlavor": "",
        "critical": {
          "threshold": null,
          "damage": ""
        },
        "damage": {
          "parts": [
            [
              "5d8",
              "midi-none"
            ]
          ],
          "versatile": ""
        },
        "formula": "",
        "save": {
          "ability": "",
          "dc": null,
          "scaling": "spell"
        },
        "summons": null,
        "level": 1,
        "school": "enc",
        "properties": [
          "vocal",
          "somatic",
          "material"
        ],
        "materials": {
          "value": "a pinch of fine sand, rose petals, or a cricket",
          "consumed": false,
          "cost": 0,
          "supply": 0
        },
        "preparation": {
          "mode": "innate",
          "prepared": true
        },
        "scaling": {
          "mode": "level",
          "formula": "2d8"
        }
      },
      "name": "Sleep",
      "flags": {
        "ddbimporter": {
          "id": 138729,
          "definitionId": 2254,
          "entityTypeId": 435869154,
          "dndbeyond": {
            "lookup": "generic",
            "lookupName": "generic",
            "level": null,
            "castAtLevel": null
          },
          "originalName": "Sleep",
          "sources": [
            {
              "sourceId": 1,
              "pageNumber": null,
              "sourceType": 2
            },
            {
              "sourceId": 2,
              "pageNumber": 276,
              "sourceType": 1
            }
          ],
          "tags": [
            "Control"
          ],
          "version": "5.1.27",
          "effectsApplied": true
        },
        "midi-qol": {
          "removeAttackDamageButtons": "default",
          "onUseMacroName": "[postActiveEffects]ItemMacro",
          "forceCEOff": true
        },
        "midiProperties": {
          "confirmTargets": "default",
          "magicdam": true,
          "magiceffect": true
        },
        "dae": {
          "macro": {
            "name": "Sleep",
            "type": "script",
            "scope": "global",
            "command": "// based on @ccjmk and @crymic macro for sleep. Gets targets and ignores those who are immune to sleep.\n// uses convinient effects\n// Midi-qol \"On Use\"\n\nconst sleepHp = await args[0].damageTotal;\nconst condition = \"Unconscious\";\nconsole.log(`Sleep Spell => Available HP Pool [${sleepHp}] points`);\nconst targets = await args[0].targets\n  .filter((i) => i.actor.system.attributes.hp.value != 0 && !i.actor.effects.find((x) => (x.name ?? x.label) === condition))\n  .sort((a, b) => (canvas.tokens.get(a.id).actor.system.attributes.hp.value < canvas.tokens.get(b.id).actor.system.attributes.hp.value ? -1 : 1));\nlet remainingSleepHp = sleepHp;\nlet sleepTarget = [];\n\nfor (let target of targets) {\n  const findTarget = await canvas.tokens.get(target.id);\n  const targetRaceOrType = DDBImporter?.EffectHelper.getRaceOrType(findTarget.actor);\n  const immuneType = [\"undead\", \"construct\", \"elf\", \"half-elf\"].some((race) => targetRaceOrType.includes(race));\n  const immuneCI = findTarget.actor.system.traits.ci.custom.includes(\"Sleep\");\n  const sleeping = findTarget.actor.effects.find((i) => (i.name ?? i.label) === condition);\n  const targetHpValue = findTarget.actor.system.attributes.hp.value;\n  const targetImg = target?.texture?.src;\n  if ((immuneType) || (immuneCI) || (sleeping)) {\n    console.log(`Sleep Results => Target: ${findTarget.name} | HP: ${targetHpValue} | Status: Resists`);\n    sleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>Resists</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n  } else if (remainingSleepHp >= targetHpValue) {\n    remainingSleepHp -= targetHpValue;\n    console.log(`Sleep Results => Target: ${findTarget.name} |  HP: ${targetHpValue} | HP Pool: ${remainingSleepHp} | Status: Slept`);\n    sleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>Slept</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n    const gameRound = game.combat ? game.combat.round : 0;\n    const effectData = {\n      label: \"Sleep Spell\",\n      name: \"Sleep Spell\",\n      icon: \"icons/svg/sleep.svg\",\n      origin: args[0].uuid,\n      disabled: false,\n      duration: { rounds: 10, seconds: 60, startRound: gameRound, startTime: game.time.worldTime },\n      flags: { dae: { specialDuration: [\"isDamaged\"] } },\n      changes: [\n        DDBImporter.EffectHelper.generateCEStatusEffectChange(game.i18n.localize(\"Unconscious\"), 20, true),\n      ]\n    };\n\n    await MidiQOL.socket().executeAsGM(\"createEffects\", { actorUuid: findTarget.actor.uuid, effects: [effectData] });\n  } else {\n    console.log(`Sleep Results => Target: ${target.name} | HP: ${targetHpValue} | HP Pool: ${remainingSleepHp - targetHpValue} | Status: Missed`);\n    sleepTarget.push(`<div class=\"midi-qol-flex-container\"><div>misses</div><div class=\"midi-qol-target-npc midi-qol-target-name\" id=\"${findTarget.id}\"> ${findTarget.name}</div><div><img src=\"${targetImg}\" width=\"30\" height=\"30\" style=\"border:0px\"></div></div>`);\n  }\n}\nawait DDBImporter?.EffectHelper.wait(500);\nconst sleptResults = `<div><div class=\"midi-qol-nobox\">${sleepTarget.join('')}</div></div>`;\nconst chatMessage = game.messages.get(args[0].itemCardId);\nlet content = foundry.utils.duplicate(chatMessage.content);\nconst searchString = /<div class=\"midi-qol-hits-display\">[\\s\\S]*<div class=\"end-midi-qol-hits-display\">/g;\nconst replaceString = `<div class=\"midi-qol-hits-display\"><div class=\"end-midi-qol-hits-display\">${sleptResults}`;\ncontent = await content.replace(searchString, replaceString);\nawait chatMessage.update({ content: content });\n"
          }
        }
      },
      "effects": [],
      "img": "icons/magic/control/sleep-bubble-purple.webp",
      "folder": "qUHjLOJ6GhNjE4HD",
      "ownership": {
        "default": 0,
        "6yhz13iFYYklKtgA": 3
      },
      "_stats": {
        "systemId": "dnd5e",
        "systemVersion": "3.1.2",
        "coreVersion": "11.315",
        "createdTime": 1721274675100,
        "modifiedTime": 1721274675100,
        "lastModifiedBy": "6yhz13iFYYklKtgA"
      },
      "sort": 0,
      "_id": "SlW4rnppfR5AQx6l",
      "_key": "!actors.items!MuY6F1zYtjv3PgLm.SlW4rnppfR5AQx6l"
    }
  ],
  "effects": [],
  "folder": "tLQdpi1nOdTiBmSO",
  "sort": 0,
  "ownership": {
    "default": 0,
    "6yhz13iFYYklKtgA": 3
  },
  "flags": {
    "dnd5e": {},
    "monsterMunch": {
      "url": "https://www.dndbeyond.com/monsters/17192-pixie",
      "img": "https://www.dndbeyond.com/avatars/30834/691/638063894967407910.png",
      "tokenImg": "https://www.dndbeyond.com/avatars/9/52/636322779296621597.jpeg",
      "isStockImg": false,
      "spellList": {
        "class": [],
        "pact": [],
        "atwill": [],
        "innate": [
          {
            "name": "druidcraft",
            "type": "atwill",
            "value": null,
            "innate": true
          },
          {
            "name": "confusion",
            "type": "day",
            "value": "1",
            "innate": true
          },
          {
            "name": "dancing lights",
            "type": "day",
            "value": "1",
            "innate": true
          },
          {
            "name": "detect evil and good",
            "type": "day",
            "value": "1",
            "innate": true
          },
          {
            "name": "detect thoughts",
            "type": "day",
            "value": "1",
            "innate": true
          },
          {
            "name": "dispel magic",
            "type": "day",
            "value": "1",
            "innate": true
          },
          {
            "name": "entangle",
            "type": "day",
            "value": "1",
            "innate": true
          },
          {
            "name": "fly",
            "type": "day",
            "value": "1",
            "innate": true
          },
          {
            "name": "phantasmal force",
            "type": "day",
            "value": "1",
            "innate": true
          },
          {
            "name": "polymorph",
            "type": "day",
            "value": "1",
            "innate": true
          },
          {
            "name": "sleep",
            "type": "day",
            "value": "1",
            "innate": true
          }
        ],
        "edgeCases": [],
        "material": true,
        "innateMatch": true
      }
    },
    "ddbimporter": {
      "id": 17192,
      "entityTypeId": 779871897,
      "creatureGroupId": null,
      "creatureFlags": [],
      "version": "5.1.27",
      "isLegacy": false,
      "flatAC": false
    }
  },
  "_stats": {
    "systemId": "dnd5e",
    "systemVersion": "3.1.2",
    "coreVersion": "11.315",
    "createdTime": 1721275312702,
    "modifiedTime": 1721275312702,
    "lastModifiedBy": "6yhz13iFYYklKtgA"
  },
  "_key": "!actors!MuY6F1zYtjv3PgLm"
}
